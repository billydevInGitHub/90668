# _Meta
  ^^^  <--means good points !!

## _Markdown format 

Markdown format (https://guides.github.com/features/mastering-markdown/)

## _Important Folders

### BLIB diagram 

D:\Backup\PM1000\Billydev080107\MyBLIBBPOTDiagram\191114-1-BLIB





# BLIB numbers  

10000-10020  reserved

​      <---10000-10099 Meta Data and  shared stuff  

10021 meta data 

10023 Automation
10025 DailP and planning

10060 folders setup ( how dev folders, elcipse workspace setup) 
10070 source code backup
10080 open source license

10088 online video and stream
10090 cloud service
10092 AWS
10095 Azure


10100 networking 

10200 windows OS


10180 BillyDevNetwork??maybe merged to 10060?? 

10200 Windows

10300 Virtual Box and All Virtual Machine Info

10500 Apache web server 
10502 Nginx 
10506 Jetty

10600 Tomcat web server  

10700 Netty Web Server
10800  Linux Setup  
10802   Bash for windows and WSL

10808 Putty and related

10900 MacOS

11001 eclipse 
11003 all dev IDE stuff 
11005  vs.code 
11008 IntelliJ IDEA
11011 cvs ???  <-----when they come out as a tab, then give a number !! 
11021 git
11022 source tree
11031 Jenkins
11041 Docker
11051 Sonar
​              <---32602 maven
11061 gradle
11071 jira
11081 Kubernetes

15001  aurora BRM billing 
15003  CAWA

30000~30100 Programming Meta
      30012 algorithm
      30040 source and java code convention
30101-30600 Core Programming language

30160 IO Overall 

30200 Utils classes

30601-30800 encoding, threading, I18N

30660 I18N and Encoding

30801-31000 lel3  DB, network, graphic, xml, syntax ,security

                       File System Management, 
30820 Network Programming

30840 File Directory Ops

30860 XML Programming

30862 JSON API

30870 SOAP webservice

30960 Syntax and JavaCC
30966 Rhino  
31000-31999 OOP-Inheritance, polymophism, encapsulation
31122 method chain

31428 Java8AggregationAndMapReduce

​             <---consider merge to stream programming?

32001 PDE eclipse plugin dev
32005 GEF 

32020 JavaFX

32050 JVM

32100 UUID and Hash
32600 DevOps

32602 maven

32609 CI(moved to 51005)
32651 Java Security
32800 Community and standard

32811 Lombok
32814 Annotation
32815 reflection and JDK dynamic proxy

32818 cglib 

32900 Advanced Design Pattern (31900 simple pattern)
33000-
 33300 is Servlet and JSP  (relate to 10600 tomcat) 
33102 Restful webservice 
33804 JEE
33806 Spring
33808 Spring Boot 
33810_SpringCloud

33830_JavaLog
        33832_LogBack<--should be merged to 33830

33840_MyBatis (java)      
33842_ORM
33845_Hibernate


33850 JMX
33852_JNDI

33880 Jprofiler 
33888 Apache commons

36500 DDL and schema design
using ERmaster, other type of objects 
36600 basic queries and join
    CRUD,case, decode stuff here
null stuff here 
36602 Insert
36604 retrieve ( select basic)
36606 update
36608 delete
36700 advanced query and tech
   aggregation
36800 Analytical query
36900 Query optimization

38000 MySQL

38900  Query Optimization(to be merged)
38916  Index and explain plan
38980 DB Structure 
    the above three merge to one 
38888  QueryOptimization

39000 DB2 
39002 MS SQL Servr
39006 Derby

39020 C
39022 Perl
39028 Python

50100 Performance

50110 Performance tools
50112 Jprofile


50200 Security
50202 Web Security
502XX lots of security things
50216 authorization

50220 LDAP

50300_Distributed System

50800_设计思想 & 开发模式**( abstract exampls) 
50802_项目管理
50806_架构师素质

51111**** Software best practice*********
51012 common basic algorithm
51015 **** Software features***


51040 microservice
51050 service mesh

51100 cloud 
51102 Virtualization
    (51104 Docker-->moved to 11041)

51200 Cache
51202 local cache
51204 client cache
51206 server cache (including redis)
51208 redis



51300 MessageQueue
51302 RabbitMQ
51310 Zookeeper

51312 Consul 

51320 Schduler 

51330 RPC

51340 Logging Service  (see 33830)

51350_Configuration

51360_APIGateway

51500 DevOps
51502 Test***
51555 Agile

51600 OSI Layers

51700 Search Engine
51720 Big Data
51722 kafka
51724 Hadoop
51726 Spark

51800 Tools Framework


51999 UML

52300_NoSQL
52302_MongoDB
52304_Hbase


52900 Query optimization

52910 Normalization
52912 Constraints

52916 Index and explain

52980 DB Structure and design


55000 
We plan to use this as our web dev template

55000-55100
55101-   Setup 
55201-   Basic language setup ( varaible, loop 
        if etc.) 

73001_HTMLElement
(now pure Html stuff)
73002_Browsers
Lots of other stuff here 
73003 CSS
73005 BootStrap
73007 Less

73010 Chrome

73022 ajax 
73023 JSON
73025 Web Charts
73026 ImagesAndIcons
73030 JavaScript

73032 D3 JS
73036 Node.js
73038 webpack

73040 loopback


73050_JQueryMobile

73055_JQuery
73058_WebJars
73060_AngularJS
73062_typescript
73066 ReactJS
73068 ReactNative
73077 Vue.js



73080_http_protocol
73082 http client
??
  web security see 50202 !!
73083 curl
73085 wireshark



73086 Stomp

73088 Ext.js

73090 Web Link 

75001_antroid

80001 Probablity&Statistics
80003 Linear Algebra
80005 Math Analysis
80007 analytic geometry

81001 Basic Programming Algorithm
82001 software Patent
82005 Data Science
82007 Data Science Presentation

88010 Diagram application
88012 GUI model 
88888 Financial applications

90666 certification 
90668 job search and CTS URL diagram for API stuff        

# API decrease resources
Important resource will be *emphasized* or _another way_.
Also we can use **bold** or __another way__. 

# API

## 10200 Windows

### 10200 Windows Doc

### 10200 Windows Data

#### Windows Important folders:

```
host folder: C:\Windows\System32\drivers\etc\host  
              <--- set up own "domain" 33808Exp034_(01)
```

```
weChat backup folder: C:\Users\Billy\Documents\WeChat Files\wxid_vue5o6gxnrbf12\BackupFiles\
```

```
Startup: C:\Users\Billy\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup 
        <----can use windows Key+R to run dialog box , then type in: hell:startup
```



### 10200 Windows Collection

#### CMD command 

    telnet
    <---type in search box telnet, then "turn windows feature on and off, then click telent --install 
export 

## 10300 Virtual Box

Linux open terminal   ctrl+Alt+T 

## 10502 Nginx 

 


## 10600  Tomcat 

Tomcat 9 API (http://tomcat.apache.org/tomcat-9.0-doc/api/index.html?org/apache/catalina/startup/Tomcat.html)

Tomcat 8 API (https://tomcat.apache.org/tomcat-8.0-doc/api/index.html?org/apache/catalina/startup/Tomcat.html)

Tomcat 7 API (https://tomcat.apache.org/tomcat-7.0-doc/api/index.html)

## 10700 Netty

10700 Netty API~ 4.1 (https://netty.io/4.1/api/index.html)
10700 Netty API~ 4.0 (https://netty.io/4.0/api/index.html?io/netty/channel/ChannelPipeline.html)

## 10800 Linux
### 10800 Linux Doc

### 10800 Linux Data

#### Common Folders

See also Qus14
refer to: https://www.howtogeek.com/117435/htg-explains-the-linux-directory-structure-explained/
​             
/      – The Root Directory
/bin  – Essential User Binaries          ,  二进制可执行命令
/boot – Static Boot Files
/cdrom – The Root Directory
/dev – Device Files                 ,

​                   终端/dev/tty  设备特殊文件  

​                   黑洞文件/dev/null

/etc – Configuration Files , 系统管理和配置文件  
​      /etc/rc.d                                         ,启动的配置文件和脚本
/home – Home Folders, 用户主目录的基点，比如用户user的主目录就是/home/user，可以用~user表示
/lib – Essential Shared Libraries,      标准程序设计库，又叫动态链接共享库，作用类似windows里的.dll文件 
/lost+found – Recovered Files,      

​           这个目录平时是空的，系统非正常关机而留下“无家可归”的文件（windows下叫什么.chk）就在这里 
/media – Removable Media
/mnt – Temporary Mount Points,   系统提供这个目录是让用户临时挂载其他的文件系统。
/opt – Optional Packages
/proc – Kernel & Process Files,    虚拟的目录，是系统内存的映射。可直接访问这个目录来获取系统信息
/root – Root Home Directory             , 系统管理员的主目录（呵呵，特权阶级） 
/run – Application State Files
/sbin – System Administration Binaries,    系统管理命令，这里存放的是系统管理员使用的管理程序

​          <--------compare with bin ? 

/selinux – SELinux Virtual File System
/srv – Service Data
/tmp – Temporary Files                                 , 公用的临时文件存储点 
/usr – User Binaries & Read-Only Data,     最庞大的目录，要用到的应用程序和文件几乎都在这个目录。
/usr/x11r6 存放x window的目录                 <---180601: I guess /usr/opt might be some user optional application ??
/usr/bin 众多的应用程序 
/usr/sbin 超级用户的一些管理程序 
/usr/doc linux文档 
/usr/include linux下开发和编译应用程序所需要的头文件 
/usr/lib 常用的动态链接库和软件包的配置文件 
/usr/man 帮助文档 
/usr/src 源代码，linux内核的源代码就放在/usr/src/linux里 
/usr/local/bin 本地增加的命令 
/usr/local/lib 本地增加的库
/var – Variable Data Files,                       某些大文件的溢出区，比方说各种服务的日志文件

 also refer to:   refer to:  http://www.cnblogs.com/amboyna/archive/2008/02/16/1070474.html

```
                          <-------------add to above after ","  also there more to be read !!
```

https://askubuntu.com/questions/308045/differences-between-bin-sbin-usr-bin-usr-sbin-usr-local-bin-usr-local

```
          <--------talked about difference between bin and sbin etc. 
```

#### Questions

1.What are the two ways to install the software on ubuntu ? 
2.What is apt-key ?
3.What is difference between apt-key and apt-get ?
4.What is asc file?
5.How to install or upgrade java version?
6.How to enable ssh service ? 
7.Do we have examples of Linux installation?
8.How to install git on Linux?
9.What is difference between apt and apt-get?
10.How to install docker on linux?
11.How to install docker-compose on linux?
12.How to install curl on linux ?
13.How to determine what kind of linux storage type?
14.What is linux disk type ?what does sda mean ?
15.What does ext4 mean ?
16.How to setup gcc in linux?
17.How to install open jdk 8 on linux ?
18.How to install vim ?
19.How to enable ssh on CentOS?
20.How to install netstats on CentOS?
21.What is snap vs apt ?
22.How to setup root pwd and su root? 
23.Why we need GPG certificate ?
24.What is supervisord ?
25.How do we know which software installed on the system?
26.How to remove the installed software ?
27.What is package management system ?
28.How to install redis docker version ?
29.What is system profile and user profile ?
30.How to setup static ip address in linux ?
31.How to do the ssh login with public key pair ?

### 10800 Linux Collection

#### Linux setup

##### Profile setup

vim .profile 

source .profile

```
alias lrt="ls -lrt"
      <---.profile sample
```



##### Folders

Linux Setup folder names (https://www.howtogeek.com/117435/htg-explains-the-linux-directory-structure-explained/)

##### Network setup

###### static ip address

```
billy@billy-VirtualBox:/etc/netplan$ cat 01-network-manager-all.yaml
network:
  version: 2
  renderer: NetworkManager
  ethernets:

      enp0s3:
              dhcp4: no
              dhcp6: no
              addresses: [192.168.1.100/24,]
              gateway4: 192.168.1.254
              nameservers:
                      addresses: [8.8.8.8,8.8.4.4]   
                      
billy@billy-VirtualBox:sudo netplan apply <---apply  above  setting
```

   <--check screen shot: D:\Backup\PM1000\Billydev080107\MyEnabil\170424-1-AllScreenCopiesBPOT\191027-1-10800Qus030

  <---see Qus030

###### enable ssh service 

sudo systemctl status ssh      <--this is check
sudo apt install openssh-server



#### Software installation

##### install docker 

  sudo apt install docker.io

​             <----  might need: sudo rm /var/lib/dpkg/lock    <---kill lock

​              <--- might  need:     ps -A |grep apt   , then  :   kill -9 522 602 1766 (listed processes) 

​       <--10800Qus010

#### Virtual Box

Linux open terminal   ctrl+Alt+T 

#### Linux Bash Command

​      <--order by alphanumeric 

##### &

​     <---一般都是使用& 在命令结尾来让程序自动运行

##### cat 

​          <---vi 文件名#编辑方式查看，可修改
​                cat 文件名#显示全部文件内容
​                more 文件名#分页显示文件内容
​                less 文件名#与more 相似，更好的是可以往前翻页
​                tail 文件名#仅查看尾部， 还可以指定行数
​                head 文件名#仅查看头部,还可以指定行数

##### chmod

chmod 751 file

​           <---给file 的属主分配读、写、执行(7)的权限， 给file 的所在组分配读、执行(5)的权限， 给其他用户
​                  分配执行(1)的权限

chmod  u=rwx,g=rx,o=x   file 

​           <---上例的另一种形式chmod =r file 为所有用户分配读权限

chmod 444  file 

​             <--same as chmod  a-wx, a+r    file    同上例

chmod -R u+r directory 

​              <----this -R is interesting 递归地给directory 目录下所有文件和子目录的属主分配读的权限

##### ctrl+z 

​             <--- book146pd436 need a try  挂起当前进程fg 恢复后台

##### firewall-cmd    

​              <--need a try   cbeck (https://www.cnblogs.com/woshimrf/p/ldap.html)

##### ip 

​     alias ifconfig="ip -c a | sed -e 's/\// \//g'"

​        <--so     ip -c a worked 

​      <----https://askubuntu.com/questions/1031640/ifconfig-missing-after-ubuntu-18-04-install 

##### job -l

​            <---

##### less 

​           <--- -i to ignore the case , so both lower case and uppper case work

##### ln -s slink source

ln link source

​           <---this is hard link, need a try

##### netstat

 netstat -an |grep -i listen

​          <---need to install net tools first:   apt install net-tools

##### ps 

​     ps -ef (system v 输出)
​     ps -aux bsd 格式输出
​     ps -ef | grep pid

##### service slapd start  

​             <---seems start daemon service (https://juejin.im/post/6844903586980167688)

##### su 

su - root 

​     <--root might be disabled, use sudo -i   <--it worked

​      <--check: https://askubuntu.com/questions/446570/why-does-su-fail-with-authentication-error

##### systemctl           

​      <--cbeck (https://www.cnblogs.com/woshimrf/p/ldap.html)

##### touch 

​           <---can create file 

## 11008 IntelliJ IDEA

### 11008 Doc

IntelliJ IDEA icons (https://www.jetbrains.com/help/idea/symbols.html#common-icons)

IntelliJ IDEA Plugin  Java Convention (https://github.com/alibaba/p3c)


IntalliJ IDEA Reference doc Chinese (https://www.w3cschool.cn/intellij_idea_doc/intellij_idea_doc-q3ke2coy.html)

IntalliJ IDEA Reference doc Chinese How to auto generate code  (https://www.w3cschool.cn/intellij_idea_doc/intellij_idea_doc-jpu72ecd.html)
                                           <--- this is some automation we can do first 
IntalliJ IDEA Reference doc Chinese How to create real time template (https://www.w3cschool.cn/intellij_idea_doc/intellij_idea_doc-hnk72eaw.html)
                                           <---will do it later
### 11008 Data

#### Questions

1.How to open multiple project in IntelliJ?
2.How to setup java language level for IntelliJ project ?
3.What is module concept in Idea ?
4.How to exclude project from compile ?
5.What happen when error loading facade ?
6.Can we use IDEA for Eclipse plugin development?
7.How to GUI setup related to the configuration file ?
8.How to do the cheat sheet diagram and absorb all cts shortcut etc. ?
9.How compare with eclipse shortcuts ?
10.How to setup editorconfig file ?
11.What is the overview of IDEA ?
12.How to setup VCS ?
15.How to setup git?
16.Why IDEA not break in break point ?
17.How to do github stuff ?
18.How to do maven in Idea ?
19.How to do gradle in Idea ?
20.How can we debug the decompiled java code ?
21.What is practical IDEA debug tech for big project like spring source code ?
22.Where is bookmark saved ?
23.Why IDEA skip breakpoint because it happened in debug evaluation?
24.How can we decide the maven path from a specific code or class ?
25.Do we have spring plugin for Idea community?
26.How to setup java convention plugin?
27.How to create template ?
28.How about online IDEA shortcuts ?
29.How to operater docker in IDEA ?

30.How  to print call stack  of current break point ?

31.How to install Yaml and properties conversion plugin?

### 11008 Collections

#### Debug tech

right click break point call stack , then copy stack or export thread  

​                 <---check Qus030 for details; 

## 11021

### 11021 Doc



### 11021 Data



### 11021 Collection

#### Git __Team work

​      branch

​      merge    <--do it by yourself 

​      patch      <--create patch and let others do this 

​      rebase    <--to catch up others in master branch

​      squash   <--squash my multiple commits in my branch 

​      stash      <--temp stash my current working on

#### Git branch

 git branch   <--- ctrl+shift+~ in IDEA list all branches menus 

     git branch -a  <-------will list local and remote branches 
     git branch -av   <---with more info
     git branch -avv  <----more detailed with how branches are bound, need look into 
    
     git branch iss553   <--this will create branch
     git branch XXXX oldBranchName <----I guess oldtype is based on which branch, for examp git branch xxx master 
                          <---from Luban  D180, there are 4 types of stuff we can create the branch: 
                           <---from current branch, from new branch, from  remote branch, from  commit hash 
    
     git branch -d hotfix      <---this will delett hot fix 
     git check -b iss553   <---this willl do create branch and check at thesame time 
     git checkout master     <--switch to master or branch, if workspace file no new change, will stick to the branch
                                             <--if workspace file has new change,  then must commit change or stash them !! 
     git merge issu553        <--merge the branch, that means you stand in master and from master point of view merge 
                                                 the branch of issu553 stuff , you always in your own branch !! 
                                            <---issue553 is always "the other " source of information !! 

#### Git Checkout 

git checkout  <--should checkout the head
git checkout -b localbranch b775a749a5

​              <--I guess the above  checkout a commit from a branch <---need to confirm 

​             <---33808Exp148 200913,  we can direct check out with branch name,
​             <---if I do git checkout b775a749a5, I will be in detached head!!

201010: the following need more editing :) 

Check out (normal working want to go to another branch ,  reset --hard want fix messed up things

 git checkout HEAD -- my-file.txt
         example: git checkout HEAD -- src/main/java/com/billydev/blib/controller/RestApiController.java
                                   <--this will revert specific file to HEAD !! 
      git checkout @ -- myfile.ext
      git checkout -- myfile.ext   <---this is     reset to index if index is not empty
       git checkout upstream/master -- myfile.txt            <----all these checkout stuff check Qus34
       git checkout TAGNAME --myfile.txt <-----------seems use  use myfile.txt without -- also ok
                                                         <----finally use git diff head to compare work director to the head  ( git diff will not show anything)

https://segmentfault.com/a/1190000006185954
前面讲到checkout是会修改HEAD的指向，变更Index区域里的内容，修改Working Directory里的内容。

这看上去很像reset --hard，但和reset --hard相比有两个重要的差别
   reset会把working directory里的所有内容都更新掉
   checkout不会去修改你在Working Directory里修改过的文件
   reset把branch移动到HEAD指向的地方
   checkout则把HEAD移动到另一个分支
            <---need to take more look at

#### Git diff and commit 

##### Git diff

git diff      

     <---compare local with the one within index(staged) !! 
         if new file is never added--never indexed, will not be checked in "git diff") 
         if the file is staged using git add xxx, then the git diff show nothing
             <--I guess the newly added is the same for local and indexed) 
git diff  head   
     <--- compare local once indexed with head  (seems not included brand new file which is not indexed) 
     <---must commit at least one version
     <---git diff always begin from local directory indexed file unless using --cached or --staged 
git diff  --cached  or  git diff --staged     <---compare head with indexed !!   
git diff 73066Exp039_190513_01    
    <---check qus24, compare tag with currently staged 
    <--looks like the git diff --cached, need check
git diff master iss553                <--compare master with the branch 
git diff master origin/master   

​       <---compare local git with remote git ; need to do a "git fetch" first to get "remote" stuff , check Qus27 

##### Git add

git add *.java   <---see 33808Exp016 190815S005
git add -A         <-----should add the whole tree, need to compare with git add . ??
git rm --cached  newFile      

​          <--this will  unstage the  cached, useful when fix the files not ignored by moving them out of cache

##### Git commit

git commit  <-- In IDEA ctrl+K , then ctrl+M after get into commit dialog box

          <----in command line, git commit only commit those 'added' stuff !! 
git commit -a    <--- could do the unstaged file directly   check 35000Exp001 (01) S008
        <---if multiple file, must use "git add xx xxx", can not use  "commit -a -m "xx" xx  xx "
        <---seems git commit -a -m "xxxx"    if the file never added (first time file) not working
               so new files must be explictly added, new files could not be sneak in using -a !! 
#### Git Init and config

git init  <--setup .git folder

​              <---after git init, IDEA need to be launched or relaunched 

​              <-- About .gitignore 
​                       (a) must add .gitigore file before git init ; 
​                       (b) If not, need to do :  git rm --cached <folder or file>

​                               <---details see Qus029_(3) 

git config --global user.name "billy"
git config --global user.email "billydev@gmail.com"    <--refer to: 11005Qus01
git config --list --local    

​    <---this could list local settings including the remote name like "origin"    Check Qus28

​          local I guess means for this directory and remote origin should be related to project

git config  --list --global   <--- seems like user.name is global for the whole computer,  
git config --edit --global    <---this will show username or email setting  Check Qus28 



#### Git Log

(1) git log       <---can only list current branch log
(2) git reflog              <------------this one seems also good for the quick one 
(3) when differnt formatting needed
   git log --pretty=oneline                               <------from luban, show history each one line
   git log --pretyy=oneline  --decorate=full   <----this could show tag and more info <----will use this one !! 
   git log --pretyy=oneline --tags --decorate=full <---seems --tags is not necessary 
   git log --no-walk --tags --pretty="%h %d %s" --decorate=full  <---this is useful to us  (hard to remember)

           <--from: https://stackoverflow.com/questions/4211604/show-all-tags-in-git-log
   git log -p    <---will show details  
   git log --stat  --summary         <--- seems create mode
(4) git log branchXXX
         <---check log on one branch
(5) git tag -l   <--just list the tag



#### Git Patch

git format-patch <target_branch> -o <directory> 

​           <--from: https://devconnected.com/how-to-create-and-apply-git-patch-files/

​           <---there are still many stuff to do like patch trouble shooting etc. from the above link

​           <--sitting in current branch and compare with target_branch , output to a directory

git format-patch master

​            <---this is real one, sitting in branch1 and targeting master 

git format-patch master -o patches

patches/0001-add-a.patch

​           <--- output to the patches directory,  directory is created automatically

​          <---201010:  **better to have output folder out of the git tracking folder !!** 



git format-patch -1 <commit_sha>

​           <---patch for a specific commit  <--need test



git log master..feature

​          <---need test 

git checkout feature

​          <---need check out target branch before apply

git am patches/0001-My-feature-commit-1.patch

​          <---apply patch

git am patches\0001-add-a.patch

​         <--this is real one

```
Applying: add a
error: patch failed: 11021Exp020/src/main/java/billydev/App.java:6
error: 11021Exp020/src/main/java/billydev/App.java: patch does not apply
Patch failed at 0001 add a
The copy of the patch that failed is found in: .git/rebase-apply/patch
When you have resolved this problem, run "git am --continue".
If you prefer to skip this patch, run "git am --skip" instead.
To restore the original branch and stop patching, run "git am --abort".
        <----this is the msg when patch apply has conflict, need manully merge first 
```

git log --oneline --graph

​           <----check log after patch

#### Git Rebase

git rebase master 

    <---should first checkout the branch which need rebase
    <---after run: it will show like: 
       First, rewinding head to replay your work on top of it...
    Applying: add a
    Using index info to reconstruct a base tree...
    M       11021Exp020/src/main/java/billydev/App.java
    Falling back to patching base and 3-way merge...
    Auto-merging 11021Exp020/src/main/java/billydev/App.java
    CONFLICT (content): Merge conflict in 11021Exp020/src/main/java/billydev/App.java
    error: Failed to merge in the changes.
    Patch failed at 0001 add a
    The copy of the patch that failed is found in: .git/rebase-apply/patch
    
    When you have resolved this problem, run "git rebase --continue".
                          <-----in App.java will show things like <<<<<, then do manual merge
                              after manual merge done, git add App.java <---this means merge done!!
    If you prefer to skip this patch, run "git rebase --skip" instead.
    To check out the original branch and stop rebasing, run "git rebase --abort".
edit xxxx
git add xxx.java  <---tell git conflict fixed 
git rebase --continue 
    <----Qus044, 200804S001-S008
    <---another try: 20080907Sxxx

#### Git remote 

##### remote setup

git remote -v    <--list all remote stuff
git remote set-url origin   https://github.com/billydevInGitHub/30170.git

​              <--reset remote url , this one should be useful 

##### fetch

git fetch                                      <--this step is a must before we can proceed
git diff master origin/master   <---compare local master with remote master



##### Remote ops

git push      <---use ctrl+shift+K in IDEA 
git remote add origin https://github.com/xxxxxx   

​        <--ready to push to remote 

​        <--need to create a repository in  remote site like github first 
git push -u origin master                                   <---actual push
git branch -a     <---this will list all branches including remote, if no remote, need to do a   "git fetch"    first  
git diff master  origin/master     

​        <----once remote fetched, can compare local master to remote master branch ! 

git pull --tags                   

​      <---this pull remote tags to local  ( usually git clone remote does not include the tags ) 
git push origin "tagname"  <---we can also push the local tag to the remote
git pull origin          

​      <---origin is the remote, when pull origin might have conflict if local changed made, then can do git stash 



#### Git Reset

good link: https://segmentfault.com/a/1190000006185954

​     <--git reset是会修改版本历史的，丢弃掉一些版本历史

​      <-- can change the commit or index or local to certain
git reset --soft  target       <-- only change the head,    index and working dir no change; 
git reset --mixed target    <-- change head and indexed 
git reset --hard  target      <-- change head, indexed and working directory         

(***)without file as parameter

git reset  . 

```
  <--this will unstage the changes ( without file git reset does mixed, clean index, the same as unstage!!) 
```


 git reset --hard tagname         

```
      <---this could avoid the duplicated files caused by TOD diskbackup !! 
             as this tag should be clean one !!
```

git reset --hard 8f4b  

```
     <---8f4b is the hash of commit 
     <--if you are in branch, this reset only affect branch 
```



  git reset --hard     

```
 <-----should reset to what you committed , like svn revert 
```




  git reset --hard  head^     

```
                     <---head^^  head^^^^ will roll back more versions !! 
                     <----need test 
```


  git reset --hard  head~2               

```
<----this will quickly roll back to 2 versions
```


  git reset --mixed 0b7fa140d960543572e0d6d6e121e70929cf75b5 

​               refer to: (https://segmentfault.com/a/1190000006185954)

```
                <---git reset has lots of stuff, the above did myself is reset index 
                     as well  the head ( as tag name is head, so head no change) 
                <---so basically git reset is reset to certain version of repository !! 
```

(***) with file as parameter 带文件参数的reset
​     上面讲到的git reset实际上不带参数的，如果带上文件参数，那么效果会是怎样的？

git reset  file.txt        <---can use file name ( with file name, seems only --mixed worked by default)
​       HEAD不会动       <---can not understand this ???   

​             <---it looks like reset the cached stuff from head ?? need confirm 
​       将那个commit的snapshot里的那个文件放到Index区域中
​       需要注意的是带文件参数的git reset没有--hard, --soft这两个参数。只有--mixed参数。

#### Git Revert

git revert    

​    <-----undoes the changes from a previous commit, keep the history 

​     是根据那个commit逆向生成一个新的commit，版本历史是不会被破坏的。 

​     refer to:  https://segmentfault.com/a/1190000006185954 

​     referto:https://stackoverflow.com/questions/8358035/whats-the-difference-between-git-revert-checkout-and-reset
​             <---I guess git revert only affect the index/cached stuff
​             <---SEEMS REVERT JUST REVERT ONE SPECIFIC COMMIT STUFF NOT OVERALL HISTORY

#### Git Show

git show  

    <---seems show the most recent changes or hash ??
    <--seems the most recent committed stuff 
#### Git Squash

git rebase -i xxxx  

     <----xxxx is the begin commit( if we squash b and c, it is a )
     <----check screenshots 200804S001-S005  Qus046
      <---example in "vi": 
               pick  xxxxx    a        <----this is previous commit 
               pick  xxxxx    b    <--change the pick to s if you want merege b to a 
               pick  xxxxx    c    <---change the pick to s if you want to merge  c to a
          after change: 
               pick  xxxxx    a     
               s     xxxxx    b     
               s     xxxxx    c    <---type :wq will hint you to do the message editing!!       
#### Git Stash

IDEA: might be better to use shelf : https://www.jetbrains.com/help/idea/work-on-several-features-simultaneously.html#shelve

      <---the menu of stash in in VCS menu not in git view ; <---stash need at least one commit !! 
      <---shelf can do some local different "group" which stash must apply for all uncommitted changes; 
      <---patch created by shelf could only apply to IDEA I gues 
git stash    <----check Qus31
    git stash              <----when git pull origin, local changes made, use git stash to let it remember see Qus31
    git stash list   <---- can see what stuff has been stashed !!

#### Git Status

git status        <--- I guess this is the only chance to see the un-indexed file !! 

#### Git tag

git tag -a v1.4 -m "my version 1.4"   <----add tag name and with message    check Qus08
git tag v1.4-lw                 <---this is light weight tag , no further information

git show v1.4-lw

​          <----seems will show what commit (change related to this tag)

git tag -a v1.2 9fceb02           

​         <---this is kind of later tag !!  

​         <---this one seems will create a new hash, but in IDEA seem bind to the same hash

​              but (see below)               in git show-ref --tags we can see a new hash

git tag -l             

​                   <---just list tag with no more information 

​                    <---seems only in IDEA will show tag stuff together with branch and master names

 git log --tags      <----?? seems not see any tag stuff 

git show-ref --tags

​        <---will give tag and hash reference 

​       <---from: https://stackoverflow.com/questions/1862423/how-to-tell-which-commit-a-tag-points-to-in-git

#### GitHub stuff 

##### fork

click the fork 
190413S007

##### do code change

clone to local 190413S010
push to remote  S015 toS021

##### pull request PR

(1) create new one:  190413S023
   or 200802S002
(2) Compare the changes S024
(3) Create pull request S025   
(4) Send pull request S026 

##### rep owner check PR

(1) Can see the pull request and fork 
(2) Merge the pull request through communication
   ~S036

​     <--this step need communication from both sides

#### Ops in .git folder

git cat-file -t  XXXhashcode           <---get the type of the object 
git cat-file -p  XXXhashcode         <---get the content of the object 

​         <---from Luban course ??

## 11041 Docker


### 11041 Docker API

Docker~  resource Chinese (http://c.biancheng.net/view/3257.html)

Commands check   https://springbootdev.com/2017/11/10/docker-most-important-and-frequently-used-commands/
                       <---this is quick command check 
### 11041 Docker Data

#### Questions

1.Can we access like Linux interface through docker ?
2.What's difference between windows Docker and Linux Docker?
3.How docker deal with the difference of hosts?
4.What does container have ?  Or what does Docker image have?  
5.How docker share the host IO ? 
6.How powershell related to docker ?(per: https://containerjournal.com/2016/10/28/linux-vs-windows-containers-whats-difference/  seems we can access docker through powershell)
7.How docker manage image repository? Is it universal in the world ?  
8.Can docker construct 2 linux env on my windows? Can we use putty to connext to those machine?
9.How can we port our developed docker instance to other machines ?
10.Can we run a windows docker on linux machine ?
11.What is docker service used for ?
12.Docker vs Kerbenets ? 
13.Can the application in docker use software deployed in host ? Like Java on host ?
14.In Jenkins tutorial docker example, after we run the tutorial, why  maven repository in the container list ? Is the container registry shared by all containers ?
15.What is the most common application pattern of docker ?    
16.When we need BIOS to debug docker stuff ?
17.When docker and host have MAVEN installed at the same time, how can the command line interpreted ? like mvn, which one will run ??
18.How upload docker image to docker cloud ?
19.Sometimes, we need run the docker application to operate on local machine? how can docker share local folders? Or how to access the host resources??
20.How to import docker local images ( instead of from docker hub) ?
21.How to export docker images ? 
22.How to create a Java/MySQL docker ?  
23.Is there any this kind of docker available ?
24.Is there any need to deploy MAVEN/Jenkins into docker ? My understanding is deployed jar files to "java docker", is that correct ? 
25.What is docker stack or compose ?
26.What is docker interactive shell ?
27.What is docker?
28.Difference between docker run and docker service ?
29.Differene between docker service and docker stack?
30.How to use docker for Spring Boot application ?
31.Docker vs multi-container docker ?
32.Where is docker image files ?
33.How to remove docker inages ?
34.What is docker clean up stuff ?
35.How to access Docker container file system ?
36.How to check and setup  mysql db in docker ?
37.Does Mysql contaier in different composer share the same volumn?
38.How to fix mysql  version 5.7  start up failed due to previous installed version 8.0.13?
39.How to write Docker file ?
40.How to write composer.yml ?
41.How to do the composer for node.js ?
42.How to do a composer with multiple java applications?
43.Docker Swarm vs Kubnets ? 
44.What is online docker playground?
45.How to setup docker run ?
46.What is volume used for ?
47.How to setup composer file ?
48.How to setup docker for production?
49.How to access docker logs after docker container started and user relogin?
50.How to turn down the composer ?
51.Where docker store the image files ?
52.How is docker compared with kubernet?
53.How to install and run  oracle DB docker ?
54.What is docker.sock ?
55.How to operate on docker volume ?
56.How to setup docker daemon socket?

#### Exp to key word



#### Keyword to Exp

33808Exp117 has docker files; 

### 11041 Docker Collections

#### Commands: 

Folders setup: 
  docker cp   <--- can copy docker folders to host and restart container  (https://juejin.im/post/6844904016086827016) 

##### Build

  docker build  -t java-app .                   

​             <--see 181022-2 S002  

  sudo docker build --tag scg-demo-uaa .

​              <---tag should be image name 

​              <--see: D:\Backup\PM1000\Billydev080107\MyEnabil\170424-1-AllScreenCopiesBPOT\201106-1-33808exp186  S002

##### Compose 

```
docker-compose up
     <---33808exp187 keycloak ,docker-compose need a install
```

  docker-compose build <-----this is how to compose the docker stuff  check Exp004(1)
  docker-compose stop
  docker-compose down 
  docker-compose down -v   <---check Qus50 with more details 

##### Container:

  docker container ls -a               <----this is very important even can see exited containers 
  docker ps                                          check the runnning process of containers 
  docker rm ef                       

​              <---- remove the container, ef is container id (https://juejin.im/post/6844904016086827016)
  docker start d582226a3acc          <---- the next day only need start the container
  docker stop CONTAINER_ID           <-- from (https://stackoverflow.com/questions/35122773/single-command-to-stop-and-remove-docker-container)
  docker stop 34e1de1c6c41           <--the real action 

##### Images: 

  docker pull rabbitmq:3.8.9-management   <-- 51302Qus005  from:(https://juejin.im/post/6844903970545090574) also check: (https://hub.docker.com/_/rabbitmq)
  docker search rabbitmq       <-- 51302Qus005  from:(https://juejin.im/post/6844903970545090574)

                               <---this is image search
  docker images            to list current images, need start virtual box server first; 
  docker images -a          <-----this will list all images  
  docker image rm 75835a67d134 2a4cca5ac898      
  docker image rm -f b7753b5d1711 f81dd8c39a58 990386cbd5c0    
                            <---once used by container must force remove it 
  docker image rmi   xxxxx   <-----this is really reclaim diskspace 

##### Inspect: 

```
   docker inspect --format '{{ (index (index .NetworkSettings.Ports "5672/tcp") 0).HostPort }}' rabbitmq_container
   docker inspect --format '{{ (index (index .NetworkSettings.Ports "5672/tcp") 0).HostPort }}' 350d344abd1e
```

​                       <---this is real command 
​                       <-- from: https://stackoverflow.com/questions/42137216/i-cant-connect-to-rabbitmq-server-port-5672                            

```
docker inspect ea93faa92337
       <---ea93..  is image id !!
       <---from 201119 33808exp019 S019  worked
```

 

##### Log:

  docker logs  350d344abd1e |less   <---this is the best one 350d344abd1e is container id 
  docker logs -f 容器ID    <--from (https://juejin.im/post/6844903970545090574)

                           <--this one seems can not move the cursor 
  tail -f `docker inspect --format='{{.LogPath}}' containername`  <--from (https://stackoverflow.com/questions/41144589/how-to-redirect-docker-container-logs-to-a-single-file)
                          <---this one might have permission issue
##### Run:                    

```
  docker run --help                   

                 <---to get the help hints   
```

​     

```
  docker run   "image_name"           

             <---do not know that it is about ????  docker run   -p 6379:6379 redis
```

  docker run   --rm   -u root   -p 8080:8080  -v jenkins-data:/var/jenkins_home 

          -v /var/run/docker.sock:/var/run/docker.sock   -v "$HOME":/home  jenkinsci/blueocean
                            <------- -v should map volumn,    11031Tut02(01) 
                            <---   --rm    Automatically remove the container when it exits
  docker run --name rabbitmq -d -p 15672:15672 -p 5672:5672  b876c920f541                          
                           <--- from (https://juejin.im/post/6844903970545090574)
                               --name指定了容器名称
                                -d 指定容器以后台守护进程方式运行
                                -p指定容器内部端口号与宿主机之间的映射，rabbitMq默认要使用15672为其web端界面访问时端口，5672为数据通信端口
  docker run -d --name mynginx -p 80:80 231d   <---231d is image id (https://juejin.im/post/6844904016086827016)

   tag::tagname[]
  docker run --name my-openldap-container --detach osixia/openldap:1.2.2  
                               <--- detach or -d means running in background (https://blog.csdn.net/liumiaocn/article/details/83719568)
  docker run  --name my_openldap_container -d  osixia/openldap             
                                <--actual run command 50220Qus001 
  docker run -p 389:389 --name myopenldap --network bridge --hostname openldap-host --env LDAP_ORGANISATION="mylitboy" --env LDAP_DOMAIN="mylitboy.com" --env LDAP_ADMIN_PASSWORD="ldap123" --detach osixia/openldap
                                <---setup LDAP users from (https://blog.csdn.net/mylitboy/article/details/88865428)
  docker run --rm -p 389:389 --name myopenldap --env LDAP_ORGANISATION="billydev" --env LDAP_DOMAIN="billydev.com" --env LDAP_ADMIN_PASSWORD="123456" --detach osixia/openldap
                                <---try my own , did not use hostname and network bridge   
​     **docker run -p 389:389 --name 33808exp181LdapContainer --network bridge --hostname openldap-host --env  LDAP_ORGANISATION="MyCompany Inc." --env LDAP_DOMAIN="mycompany.com" --detach osixia/openldap**

​                    <---For 33808Exp181 and it will create container that can be reused 

end::tagname[]
​                                
  docker run --rm -p 27017:27017 --name mymongodb --detach mongo                                
​                   

```
docker run --rm -p2181:2181 --name myzookeeper  zookeeper
            <---zookeeper is repostiory id
            <---from 33808exp195  201119
```

​                                                                      

##### Run inside command

Run a command inside container bash: 
  docker exec -i -t 3ae bin/bash  <--get into container from (https://juejin.im/post/6844903970545090574)


```
 docker exec -i -t 350d344abd1e  bin/bash   
       <---real command, 350d.. is container id 
```


  docker exec -it my-openldap-container sh   <--- from (https://blog.csdn.net/liumiaocn/article/details/83719568)

```
docker exec -i -t 097169c5ef05 /bin/sh
         <---from 201119 33808exp019 S021  worked
```



##### Volume

  docker volume ls   <---- will list:  DRIVER   VOLUME NAME   local  jenkins-data <--from 11031Tut02(01) S018
  docker volume inspect xxxx   <-----will give the details of docker volume with local folder name!!

## 11061 Gradle

### 11061 Doc

API reference (https://docs.gradle.org/current/dsl/index.html)

### 11061 Data

### 11061 Collections

#### upgrade gradle 

<--check 33808exp198 201121S012 around

<--check: https://www.jianshu.com/p/4eab3743fec0   how to upgrade 

 <--https://services.gradle.org/distributions/   all gradle distributions

## 30000 Java 

### API and doc

Java Core~ API class diagram - very good (http://www.falkhausen.de/Java-8/index.html)

Java Core~ API doc 8.0 (https://docs.oracle.com/javase/8/docs/api/)

### Java Core Blog

Java Core Blog Alibaba (https://www.javaweb.shop/article/310.html)
        <--there are many books to download

Java Core Blog Clawhub (https://clawhub.club/page/13/)

Java Core Blog Clawhub  Algorithm and data structure  (https://clawhub.club/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/)
                         <--this is our 30012Exp037-042 ...on going 
Java Core Blog cnlogs with Spring source code read (https://www.cnblogs.com/Java-Starter/tag/SpringMVC/)

Java Core Blog JavaBoy (http://www.javaboy.org/)

Java Core Blog JavaBoy vhr (https://github.com/lenve/vhr)

Java Core puke spring source code overall diagram (https://blog.csdn.net/q649381130/article/details/88600021)

### Java Core Developer's guide (Oracle)  

Java developer's guide (https://docs.oracle.com/en/database/oracle/oracle-database/19/jjdev/using-JMX.html#GUID-FDE7091A-893B-4776-8ACB-036196C16CC8)

### Java Core Versions 

Java Core Version wiki java history (https://en.wikipedia.org/wiki/Java_version_history)

## 30040 Java Code convention

### 30040 Doc

Java Code Convention Ali conventions (https://github.com/alibaba/p3c)

Book144 

### 30040 Data

#### Questions

1.How about variable name convention ? How about the underscore stuff ?
2.How about package name convention ? Can we have underscore in it ? 
  How about lower case or upper case ?

3.Can we use tips to collect all the main conventions and put in the example ?
So we can understand all tips(gains) and easily find them in the example.  

4.What is best practice of code deprecation ?

### 30040 Collection

#### Coding best practice: 

```
OVERALL： 

     Code convention must be strictly followed, this is training of a new way of thinking; 
      names need think and think； 

Details： 

1 Logging the most important thing for the info

    debug stuff use debug logging level ; 

    logging information must have specific information for this domain like concrete path name etc. 

    logging information must begin with upper case character; 

2 info.md for all projects
```

#### Coding comments

##### From Book 145

1【强制】类、类属性、类方法的注释必须使用Javadoc规范，使用/**内容*/格式，不得使用// xxx方式。 说明：在IDE编辑窗口中，Javadoc方式会提示相关注释，生成Javadoc可以正确输出相应注释；在IDE中，工程调用方法时，不进入方法即可悬浮提示方法、参数、返回值的意义，提高阅读效率。

​       <--(1) setting /editor/copyright profile to setup copy right and alt+insert to add copy right

​       <-- (2) use: " /** return "  to add comments   ( not use ctl+/)

​      <---(3) follow line 143, MockMvc.java in 33808exp083

​                 then in line 49 of BookControllerTest.java, mouse over the class and method get information; 

​           <---@author

​                 @since   <---use only major and minor version  ( not include revision)

​           <---TODO: use  link in  "@param" and "@see also"  ( we try one and leave the other  for the future)

​      <--- (4) seems: length of comments is 80 

​       <---(5) follow line 30 of WebMvcProperties class in 33808Exp083 for  properties class

​                     <----comments for private properties as well !! 

​                              format properties  need to give examples like date format

​                     <---- no need to put comments on getter and setters

​                      <----seems nested inner class need no comments 

2【强制】所有的抽象方法（包括接口中的方法）必须要用Javadoc注释、除了返回值、参数、异常说明外，还必须指出该方法做什么事情，实现什么功能。 说明：对子类的实现要求，或者调用注意事项，请一并说明。

3【强制】所有的类都必须添加创建者和创建日期。 说明：在设置模板时，注意IDEA的@author为`${USER}`，而eclipse的@author为`${user}`，大小写有区别，而日期的设置统一为yyyy/MM/dd的格式。 正例： /**

* @author yangguanbao

* @date 2016/10/31

  4【强制】方法内部单行注释，在被注释语句上方另起一行，使用//注释。方法内部多行注释使用/* */注释，注意与代码对齐。

​          <---- seems inner can use // to multiple line comments :

​                     line 616,  655 DispatcherServlet.java in 33808exp083

​                    line 511 DefaultListableBeanFactory  in 33808exp083

​           <---so we use // for all cases

5【强制】所有的枚举类型字段必须要有注释，说明每个数据项的用途。

6【推荐】与其“半吊子”英文来注释，不如用中文注释把问题说清楚。专有名词与关键字保持英文原文即可。 反例：“TCP连接超时”解释成“传输控制协议连接超时”，理解反而费脑筋。

7【推荐】代码修改的同时，注释也要进行相应的修改，尤其是参数、返回值、异常、核心逻辑等的修改。 说明：代码与注释更新不同步，就像路网与导航软件更新不同步一样，如果导航软件严重滞后，就失去了导航的意义。

​             <---for the method use /** and return it will create  @param,  @return , @throws automatically 

8【推荐】在类中删除未使用的任何字段、方法、内部类；在方法中删除未使用的任何参数声明与内部变量。

9【参考】谨慎注释掉代码。在上方详细说明，而不是简单地注释掉。如果无用，则删除。 说明：代码被注释掉有两种可能性：1）后续会恢复此段代码逻辑。2）永久不用。前者如果没有备注信息，难以知晓注释动机。后者建议直接删掉即可，假如需要查阅历史代码，登录代码仓库即可。

10【参考】对于注释的要求：第一、能够准确反映设计思想和代码逻辑；第二、能够描述业务含义，使别的程序员能够迅速了解到代码背后的信息。完全没有注释的大段代码对于阅读者形同天书，注释是给自己看的，即使隔很长时间，也能清晰理解当时的思路；注释也是给继任者看的，使其能够快速接替自己的工作。

11【参考】好的命名、代码结构是自解释的，注释力求精简准确、表达到位。避免出现注释的一个极端：过多过滥的注释，代码的逻辑一旦修改，修改注释又是相当大的负担。 反例：
// put elephant into fridge
put(elephant, fridge);
方法名put，加上两个有意义的变量名elephant和fridge，已经说明了这是在干什么，语义清晰的代码不需要额外的注释。

​        <--I guess public methods and class still need comments 

12【参考】特殊注释标记，请注明标记人与标记时间。注意及时处理这些标记，通过标记扫描，经常清理此类标记。线上故障有时候就是来源于这些标记处的代码。

 1） 待办事宜（TODO）:（标记人，标记时间，[预计处理时间]） 表示需要实现，但目前还未实现的功能。这实际上是一个Javadoc的标签，目前的Javadoc还没 有实现，但已经被广泛使用。只能应用于类，接口和方法（因为它是一个Javadoc标签）。 

2） 错误，不能工作（FIXME）:（标记人，标记时间，[预计处理时间]） 在注释中用FIXME标记某代码是错误的，而且不能工作，需要及时纠正的情况。



#### Coding Rules

##### Naming convention

​       <---from book145,only list something need attention: 

常量命名全部大写，单词间用下划线隔开，力求语义表达完整清楚，不要嫌名字长。 正例：MAX_STOCK_COUNT / CACHE_EXPIRED_TIME 反例：MAX_COUNT / EXPIRED_TIME

​                <---so here we have to use underline

抽象类命名使用Abstract或Base开头；异常类命名使用Exception结尾；测试类命名以它要测试的类的名称开始，以Test结尾。

​              <---need a practice

POJO类中的任何布尔类型的变量，都不要加is前缀

​             <--- good 

包名统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。包名统一使用单数形式，但是类名如果有复数含义，类名可以使用复数形式。 正例：应用工具类包名为com.alibaba.ei.kunlun.aap.util、类名为MessageUtils（此规则参考spring的框架结构）

​               <---it looks ok to have long package name !! 

​                <--again: the most important is : all lower cases

【推荐】为了达到代码自解释的目标，任何自定义编程元素在命名时，使用尽量完整的单词组合来表达。

正例：对某个对象引用的volatile字段进行原子更新的类名为AtomicReferenceFieldUpdater。

​            <--- it is good to reflect volatile in variable name !! 

【推荐】在常量与变量的命名时，表示类型的名词放在词尾，以提升辨识度。 正例：startTime / workQueue / nameList / TERMINATED_THREAD_COUNT 反例：startedAt / QueueOfWork / listName / COUNT_TERMINATED_THREAD

​             <---need some practice 

【推荐】如果模块、接口、类、方法使用了设计模式，在命名时需体现出具体模式。 说明：将设计模式体现在名字中，有利于阅读者快速理解架构设计理念。 正例： public class OrderFactory; public class LoginProxy; public class ResourceObserver;

​              <---ok, good to have design pattern in the name 

【推荐】接口类中的方法和属性不要加任何修饰符号（public 也不要加），保持代码的简洁性，并加上有效的Javadoc注释。

尽量不要在接口里定义变量，如果一定要定义变量，确定与接口方法相关，并且是整个应用的基础常量。 

正例：接口方法签名 void commit(); 接口基础常量 String COMPANY = "alibaba"; 

反例：接口方法定义 public abstract void f(); 说明：JDK8中接口允许有默认实现，那么这个default方法，是对所有实现类都有价值的默认实现。

​                    <---- good to learn more stuff about interface

接口和实现类的命名有两套规则： 

1）【强制】对于Service和DAO类，基于SOA的理念，暴露出来的服务一定是接口，内部的实现类用Impl的后缀与接口区别。 

正例：CacheServiceImpl实现CacheService接口。 

2）【推荐】如果是形容能力的接口名称，取对应的形容词为接口名（通常是–able的形容词）。 

正例：AbstractTranslator实现 Translatable接口。

​                          <----really good to learn the second one and Impl is a standard now !!

【参考】枚举类名带上Enum后缀，枚举成员名称需要全大写，单词间用下划线隔开。 说明：枚举其实就是特殊的常量类，且构造方法被默认强制是私有。 

正例：枚举名字为ProcessStatusEnum的成员名称：SUCCESS / UNKNOWN_REASON。

​                    <---need a try 

【参考】各层命名规约： 

A) Service/DAO层方法命名规约 

1） 获取单个对象的方法用get做前缀。 

2） 获取多个对象的方法用list做前缀，复数结尾，如：listObjects。 

3） 获取统计值的方法用count做前缀。 

4） 插入的方法用save/insert做前缀。 

5） 删除的方法用remove/delete做前缀。 

6） 修改的方法用update做前缀。

B) 领域模型命名规约

1） 数据对象：xxxDO，xxx即为数据表名。

 2） 数据传输对象：xxxDTO，xxx为业务领域相关的名称。 

3） 展示对象：xxxVO，xxx一般为网页名称。 

4） POJO是DO/DTO/BO/VO的统称，禁止命名成xxxPOJO。

​          <----this one need some observation

##### Constants

【强制】不允许任何魔法值（即未经预先定义的常量）直接出现在代码中。

​            <--I will extract all these stuff into a package

【强制】在long或者Long赋值时，数值后使用大写字母L，不能是小写字母l，小写容易跟数字混淆，造成误解。 说明：Long a = 2l; 写的是数字的21，还是Long型的2？

​           <---long must use big L

【推荐】不要使用一个常量类维护所有常量，要按常量功能进行归类，分开维护。 说明：大而全的常量类，杂乱无章，使用查找功能才能定位到修改的常量，不利于理解，也不利于维护。
正例：缓存相关常量放在类CacheConsts下；系统配置相关常量放在类SystemConfigConsts下。

​                <---seems spring put constants in beginning of class : line 24 in AsyncContext 33808exp083

​                     I think I can follow Spring as constants with class make sense, but for those need to be 

​                    configured or need to be customized, put in a package called customize 

【推荐】常量的复用层次有五层：跨应用共享常量、应用内共享常量、子工程内共享常量、包内共享常量、类内共享常量。

​             <--use different layer of constants , make sense 

##### Code format 

【强制】左小括号和右边相邻字符之间不出现空格；右小括号和左边相邻字符之间也不出现空格；而左大括号前需要加空格。详见第5条下方正例提示。 反例：if (空格a == b空格)

​             <---looks better than myself 

【强制】if/for/while/switch/do等保留字与括号之间都必须加空格。

​             <---ok, follow it, learnt 

【强制】任何二目、三目运算符的左右两边都需要加一个空格。 说明：包括赋值运算符=、逻辑运算符&&、加减乘除符号等。

​           <---ok, my original "+" seems not have space !!

【强制】采用4个空格缩进，禁止使用Tab字符。
说明：如果使用Tab缩进，必须设置1个Tab为4个空格。IDEA设置Tab为4个空格时，请勿勾选Use tab character；而在Eclipse中，必须勾选insert spaces for tabs。

​               <---agree

```
正例： （涉及1-5点）
public static void main(String[] args) {
    // 缩进4个空格
    String say = "hello";
    // 运算符的左右必须有一个空格
    int flag = 0;
    // 关键词if与括号之间必须有一个空格，括号内的f与左括号，0与右括号不需要空格
    if (flag == 0) {
      System.out.println(say);
    }
    // 左大括号前加空格且不换行；左大括号后换行
    if (flag == 1) {
      System.out.println("world");
    // 右大括号前换行，右大括号后有else，不用换行
    } else {
      System.out.println("ok");
     // 在右大括号后直接结束，则必须换行
    }
}
```

【强制】注释的双斜线与注释内容之间有且仅有一个空格。
正例： // 这是示例注释，请注意在双斜线之后有一个空格
String commentString = new String();

​              <--just followed

【强制】在进行类型强制转换时，右括号与强制转换值之间不需要任何空格隔开。
正例： double first = 3.2d; int second = (int)first + 2;

​              <--ok

【强制】单行字符数限制不超过120个，超出需要换行，换行时遵循如下原则： 

1）第二行相对第一行缩进4个空格，从第三行开始，不再继续缩进，参考示例。 

2）运算符与下文一起换行。 

3）方法调用的点符号与下文一起换行。 

4）方法调用中的多个参数需要换行时，在逗号后进行。 

5）在括号前不要换行，见反例。

```
正例：
  StringBuilder sb = new StringBuilder();
  // 超过120个字符的情况下，换行缩进4个空格，并且方法前的点号一起换行
  sb.append("yang").append("hao")...
      .append("chen")...
      .append("chen")...
      .append("chen");
反例：
  StringBuilder sb = new StringBuilder();
  // 超过120个字符的情况下，不要在括号前换行
  sb.append("you").append("are")...append
  ("lucky");
  // 参数很多的方法调用可能超过120个字符，逗号后才是换行处
  method(args1, args2, args3, ...
  , argsX);
```

​         <---good to learn, check: line 255, 250 of HttpServlet3RequestFactory in 33808exp083

【强制】方法参数在定义和传入时，多个参数逗号后面必须加空格。 

正例：下例中实参的args1，后边必须要有一个空格。
method(args1, args2, args3);

​                   <---good to learn, seems trying to make "operator" and "," more graceful !!

【强制】IDE的text file encoding设置为UTF-8; IDE中文件的换行符使用Unix格式，不要使用Windows格式

​         <--- IDEA:  Settings/Editor/File Encoding  

​                 3 global encoding, project encoding and properties encoding setting  for UTF-8

​         <---Settings/Editor/Code Style/right pane/Line separator  <---120 char per line also here !!    

【推荐】单个方法的总行数不超过80行。 说明：除注释之外的方法签名、左右大括号、方法内代码、空行、回车及任何不可见字符的总行数不超过80行。 正例：代码逻辑分清红花和绿叶，个性和共性，绿叶逻辑单独出来成为额外方法，使主干代码更加清晰；共性逻辑抽取成为共性方法，便于复用和维护。

​                     <--- this need a think

【推荐】不同逻辑、不同语义、不同业务的代码之间插入一个空行分隔开来以提升可读性。 说明：任何情形，没有必要插入多个空行进行隔开。

​              <---I seems use too much empty lines 

#####   OOP convention

【强制】所有的覆写方法，必须加@Override注解。 说明：getObject()与get0bject()的问题。一个是字母的O，一个是数字的0，加@Override可以准确判断是否覆盖成功。另外，如果在抽象类中对方法签名进行修改，其实现类会马上编译报错。

​           <---2 advantages, ok follow it 

【强制】相同参数类型，相同业务含义，才可以使用Java的可变参数，避免使用Object。 说明：可变参数必须放置在参数列表的最后。（建议开发者尽量不用可变参数编程） 正例：public List<User> listUsers(String type, Long... ids) {...}

​            <---try not use variable arguments

【强制】外部正在调用或者二方库依赖的接口，不允许修改方法签名，避免对接口调用方产生影响。接口过时必须加@Deprecated注解，并清晰地说明采用的新接口或者新服务是什么。

​           <---good !! 

【强制】不能使用过时的类或方法。

​            <----try to avoid this and learn new stuff 

【强制】Object的equals方法容易抛空指针异常，应使用常量或确定有值的对象来调用equals。 

正例："test".equals(object); 

反例：object.equals("test"); 

说明：推荐使用JDK7引入的工具类java.util.Objects#equals(Object a, Object b)

​                    <---ok, learn a new stuff 

【强制】所有整型包装类对象之间值的比较，全部使用equals方法比较。 说明：对于Integer var = ? 在-128至127之间的赋值，Integer对象是在 IntegerCache.cache产生，会复用已有对象，这个区间内的Integer值可以直接使用==进行判断，但是这个区间之外的所有数据，都会在堆上产生，并不会复用已有对象，这是一个大坑，推荐使用equals方法进行判断。

​              <---this is sth  IT group discussed

【强制】任何货币金额，均以最小货币单位且整型类型来进行存储。

​               <--good

【强制】浮点数之间的等值判断，基本数据类型不能用==来比较，包装数据类型不能用equals来判断。 说明：浮点数采用“尾数+阶码”的编码方式，类似于科学计数法的“有效数字+指数”的表示方式。二进制无法精确表示大部分的十进制小数

```
正例： 
(1) 指定一个误差范围，两个浮点数的差值在此范围之内，则认为是相等的。 float a = 1.0F - 0.9F;
float b = 0.9F - 0.8F;
float diff = 1e-6F;
if (Math.abs(a - b) < diff) {
System.out.println("true");
} 
(2) 使用BigDecimal来定义值，再进行浮点数的运算操作。
BigDecimal a = new BigDecimal("1.0");
BigDecimal b = new BigDecimal("0.9");
BigDecimal c = new BigDecimal("0.8");
BigDecimal x = a.subtract(b);
BigDecimal y = b.subtract(c);
if (x.compareTo(y) == 0) {         <---do not use equals as it will compare the precision as well
System.out.println("true");
}                      <---good to learn big decimal 
```

【强制】如上所示BigDecimal的等值比较应使用compareTo()方法，而不是equals()方法。 说明：equals()方法会比较值和精度（1.0与1.00返回结果为false），而compareTo()则会忽略精度。

​           <--very good to learn 

【强制】定义数据对象DO类时，属性类型要与数据库字段类型相匹配。 

正例：数据库字段的bigint必须与类属性的Long类型相对应。 

反例：某个案例的数据库表id字段定义类型bigint unsigned，实际类对象属性为Integer，随着id越来越大，超过Integer的表示范围而溢出成为负数。

​             <---we need to do example for this 

## 30140 Date and Time 

### Date and Time  Doc

### Date and Time Data

Epoch time converter (https://www.epochconverter.com/) 

​        <--Epoch has seconds or milliseconds

#### Questions:

1. How to convert java datatime to mysql timestamp ?
2. Is epoch always UTC or GMT time zone ?
3. Current local time or String to DB timestamp ?
4. How timestamp display with different time zone ?
5. How to do the calculation based on Timestamp ? 
6. How to do the calculation based on Calendar ?
7. How to do string to date and calendar and milliseconds convertion?
8. Why it was difficult before in timezone stuff ?
  9.How to do the JDBC operation for java.time package?
  10.How is locale related to timezone ?

### Date and Time Collection

#### Old Date and time



#### New Date and time 

##### current time 

```
userEntity.setCreateDate(LocalDateTime.now());
      <---date type is: LocalDateTime
      <---MapperUserService in 33808exp185
```

##### instant to LocalDateTime

```
//Instant timestampNow=Instant.now();
Instant timestampNow=Instant.ofEpochSecond(1606180581);
          <--mimic things from db
 
// Instant timestampNow=Instant.now();
   Instant timestampNow=Instant.ofEpochSecond(1606180581);
          <--epoch second is 10 digits
          <--get from database ?
// LocalDateTime ldt = LocalDateTime.ofInstant(timestampNow, ZoneId.systemDefault());
   LocalDateTime ldt = LocalDateTime.ofInstant(timestampNow, ZoneId.of("Asia/Shanghai"));
            <--LocalDateTime itself does not contain zone information
   System.out.printf("Information of LocalDateTime constructed from instant : %s %d %d at %d:%d%n", ldt.getMonth(), ldt.getDayOfMonth(), ldt.getYear(), ldt.getHour(), ldt.getMinute());
            <---free format
   System.out.println(ldt);
            <---standard format 
            <---from 30140exp015
```

​       <--timezone id: https://mkyong.com/java8/java-display-all-zoneid-and-its-utc-offset/

##### same instance with zone

```
DateTimeFormatter format = DateTimeFormatter.ofPattern("MMM d yyyy  hh:mm a");
          <--thread safe
          
// Leaving from San Francisco on July 20, 2013, at 7:30 p.m.
        LocalDateTime leaving = LocalDateTime.of(2013, Month.JULY, 20, 19, 30);
        ZoneId leavingZone = ZoneId.of("America/Los_Angeles");
        ZonedDateTime departure = ZonedDateTime.of(leaving, leavingZone);

        try {
            String out1 = departure.format(format);
            System.out.printf("LEAVING:  %s (%s)%n", out1, leavingZone);
        } catch (DateTimeException exc) {
            System.out.printf("%s can't be formatted!%n", departure);
            throw exc;
        }

// Flight is 10 hours and 50 minutes, or 650 minutes
        ZoneId arrivingZone = ZoneId.of("Asia/Tokyo");
        ZonedDateTime arrival = departure.withZoneSameInstant(arrivingZone)
                .plusMinutes(650);

        try {
            String out2 = arrival.format(format);
            System.out.printf("ARRIVING: %s (%s)%n", out2, arrivingZone);
        } catch (DateTimeException exc) {
            System.out.printf("%s can't be formatted!%n", arrival);
            throw exc;
        }

        if (arrivingZone.getRules().isDaylightSavings(arrival.toInstant())) {
            System.out.printf("  (%s daylight saving time will be in effect.)%n",
                    arrivingZone);
        } else {
            System.out.printf("  (%s standard time will be in effect.)%n",
                    arrivingZone);
        }
              <---from 30140exp014
```

##### time calculation

```
System.out.printf("6 months from now: %s%n",
        LocalDateTime.now().plusMonths(6));
System.out.printf("6 months ago: %s%n",
        LocalDateTime.now().minusMonths(6));
       <---from 30140exp013
LocalDate date = LocalDate.of(2000, Month.NOVEMBER, 20);
LocalDate nextWed = date.with(TemporalAdjusters.next(DayOfWeek.WEDNESDAY));
        System.out.println(nextWed);   
       <-- from 30140exp012
```



## 30160 IO Overall

### 30160 IO Overall Doc

### 30160 IO Overall Data

### 30160 IO Overall Collection

#### Formatting

##### String Formatting

```
String.format("Book %s.%s", (i+1), (j+1))
```

​                <--- 33808exp117

```
String.format("Resource accessed by: %s (with subjectId: %s)" ,
        jwt.getClaims().get("user_name"),
        jwt.getSubject());
      <---33808exp186, we shall use more this way than use string + string
          need collect other more formats
```

#### Stream Copy

​      InputStream in = resource.getInputStream()....

​      StreamUtils.copy(in, outputMessage.getBody());

​                    <----33808exp082 ResourceHttpMessageConverter

​                            use this Util the buffer size is 4096 and also will do the flush and return byte count !!!!

## 30200 Util classes

### 30200 Doc

### 30200 Data

### 30200 Collection

#### Random 

```
Random rand = new Random();
int randomNum = rand.nextInt(greetings.size());    <---pass aray size to nextInt method
return greetings.get(randomNum);
             <---from 33808exp193
```

## 30660 I18N and encoding

### 30660 I18N and encoding Doc

### 30660 I18N and encoding Data

UTF-8  <--BPOT2098  TODProperties use @PropetySource , its encoding 

### 30660 I18N and encoding Collection

## 30820 Network Programming

### 30820 Network Programming Doc

### 30820 Network Programming Data

### 30820 Network Programming Collection

Scanner and User input

​             <---30820Exp012 

## 30840 File and Directory Ops

see also Resource in Spring 

### 30840 File and Directory Ops Doc

### 30840 File and Directory Data

### 30840 File and Directory Collection

#### Dir Ops

Create Dir

​    Files.createDirectories(rootLocation);

​             <---33808exp082 , roootLocation is Path

Delete Dir

​    FileSystemUtils.deleteRecursively(rootLocation.toFile())

​                <---the source code of Utils can take a look, actually use Files.walk and visitor pattern to delete

List all files in Dir

​      <--33808exp082 FileSystemStorageService  line 57

​           Files.walk(this.rootLocation, 1)  got stream, then use filter and lambda to get pure file names



#### File Ops

File Copy using Stream:   

​       <--33808exp082 FileSystemStorageService line 45 

​           use: Files.copy(inputStream, this.rootLocation.resolve(filename),    

​           StandardCopyOption.REPLACE_EXISTING);

​              <----this one has copy option !! 

File relative path and absolute path

​      this.rootLocation.resolve(filename)

​                 <---got absolue path  33808Exp082 FileSystemStorageService line 45

​       this.rootLocation::relativize

​                 <---extract pure file name: 33808Exp082 FileSystemStorageService line 59

File time check and compare

​      BasicFileAttributes fileAttributes = Files.readAttributes(source,   BasicFileAttributes.class);

​      FileTime ft1=fileAttributes.lastModifiedTime();

​      if (ft1.compareTo(ft2)<=0) { ...

​                   <---BPOT2098 tools class

31420 Nested Class

## 31422 Lambda 

Lambda ~~ Good tutorial (https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/Lambda-QuickStart/index.html#section5)

## 32050 JVM

### 32050 JVM Doc

### 32050 JVM Data

### 32050 JVM Collection 

#### MBeans

​             <--see 32050Qus005

##### jvm.gc.pause in metrix





Paramaters article1 (https://www.javadevjournal.com/java/jvm-parameters/)

Paramters article2 (https://www.baeldung.com/jvm-parameters)

Put JVM param examples here: 
   Book145 pd50 good example of jvm param !! 

## 32602 Maven

### 32602 Doc 

Maven central (https://repo.maven.apache.org/maven2/ https://repo1.maven.org/maven2/)

Maven central (user interface) (https://mvnrepository.com/repos/central)

### 32602 Data
local repository:  C:\Users\Billy\.m2  <---could be found in IDEA setting/build tools/maven

    <properties>
        <java.version>1.8</java.version>
    </properties>         <--used in POM.xml
### 32602 Collection 

#### POM format

<dependencyManagement>

​       <---33808exp184, just manage the dependency version  stuff so children only need give 

​            simple name of dependency

<packaging>pom</packaging>

​       <---33808exp184, usually for the parent project sharing with children



## 32606 JUnit

### 32606 Junit Doc

JUnit 4 API~ (https://junit.org/junit4/javadoc/latest/index.html)

JUnit 5 API~ (https://junit.org/junit5/docs/5.0.1/api/index.html?overview-summary.html)
            <---Assertions.java class 
### 32606 Junit Data

### 32606 Junit Collections

#### Junit 4 Examples 

assertEquals(MediaType.APPLICATION_JSON_UTF8, response.getHeaders().getContentType());  

​            <---33808Exp083 BookControllerRestTemplateTest line 57            
assertEquals(HttpStatus.OK, response.getStatusCode());                                  

​           <---33808Exp083 BookControllerRestTemplateTest line 58
assertEquals(employee2.getFirstName(), employee.getFirstName()); 

​          <--- Employee employee2 = employeeRepository.findByFirstName("admin"); line 41  

​                   EmployeeRepositoryTests in 33808Exp125
assertNotNull(id); 

​            <---Long id = entityManager.persistAndGetId(employee, Long.class); line 37 EmployeeRepositoryTests in 33808Exp125

JSONAssert.assertEquals(expected, response.getBody(), false);     

​             <--- expected is hardcoded json String  <---33808Exp083 BookControllerRestTemplateTest line 60  

#### JUnit 5 Examples

```
assertEquals(HttpStatus.OK, entity.getStatusCode());
assertEquals("http://localhost:9000", entity.getHeaders().getAccessControlAllowOrigin());
Greeting greeting = entity.getBody();
assertEquals("Hello, World!", greeting.getContent());
```

​             <--- 33808exp179

```
assertThrows(StorageException.class, () -> {
		service.store(new MockMultipartFile("foo", "../foo.txt",
		MediaType.TEXT_PLAIN_VALUE, "Hello, World".getBytes()));
	});    
```

​              <---- line 59 FileSystemStorageServiceTests 33808exp082 





#### AssertJ
32606 JUnit AssertJ~ Unit5 compare  (http://testinglikeaboss.com/tips-tricks/migrating-from-junit-5-assertions-to-assertj/)

32606 JUnit AssertJ examples
assertThat(response.getStatusCode()).isEqualByComparingTo(HttpStatus.FOUND) <---33808exp082 FileUploadIntegrationTests line 47
assertThat(service.load("foo.txt")).exists();

#### Spring Util Assert 
Assert.isTrue(bookingService.findAllBookings().size() == 3,	"First booking should work with no problem"); <---line23 AppRunner 33808exp137

## 32811 Lombok

### 32811 Lombok Doc

### 32811 Lombok Data

### 32811 Lombok Collection

#### Annotation

@AllArgsConstructor 

​         <--33808Exp146

​           <--UserEntity in 33808exp185

@Builder  

​        <-- 33808Exp132 

​          <--- seems client side can use builder pattern: 

​                 Person.builder().age(22).name("zhangyu").grade(67).build();

​                from: https://blog.csdn.net/zy345293721/article/details/106892948

​                tried in Exp132: Author author = Author.builder().firstName((xxxx...

​                            <---and New Author() is not allowed, can only use builder !!

@Data   <--33808Exp053
@EqualsAndHashCode(callSuper = false)  <--33808Exp146
@NoArgsConstructor 

​               <--33808Exp146

​               <--UserEntity in 33808exp185

@ToString

​            <--UserEntity in 33808exp185

@Slf4j  

​     <--we can directly use log, like log.info(xxx)   33808Exp053

​     <---log.debug(xxx)       UserConfigMetaData.java in API  module  33808exp185

## 32815 Reflection

Reflection Reference doc - Discover Class Members (API) (https://docs.oracle.com/javase/tutorial/reflect/class/classMembers.html)

Reflection Tutorial Official (https://docs.oracle.com/javase/tutorial/reflect/TOC.html)

Reflection Tutorial Good one (http://tutorials.jenkov.com/java-reflection/annotations.html)



## 32818 CGLIB

### 32818 Doc

### 32818 Data

#### Questions: 

1.What are cglib, ASM and javassist ?
2.What is java agent ?

### 32818 Collections



## 33804 JEE

JEE API (https://docs.oracle.com/javaee/6/api/index.html?javax/servlet/http/HttpServletRequest.html)

### JEE JPA 

JEE JPA API (https://docs.oracle.com/javaee/7/api/index.html?javax/persistence/package-summary.html)

## 33808 Spring

### 33808 Spring Doc

#### Current API Doc

Spring Boot API (https://docs.spring.io/spring-boot/docs/current/api/)

(1) Spring boot reference doc (overall) (https://docs.spring.io/spring-boot/docs/2.2.6.RELEASE/reference/html/)

(2) Spring boot build ( used by U020) (https://docs.spring.io/spring-boot/docs/2.2.6.RELEASE/reference/html/using-spring-boot.html#using-boot-build-systems)

(3) Spring boot feature (******my second read enter from sprig boot U021******) (https://docs.spring.io/spring-boot/docs/2.2.6.RELEASE/reference/html/spring-boot-features.html#boot-features-external-config) 

(4) Spring boot how to (like FQA with details, very useful when doing examples) (https://docs.spring.io/spring-boot/docs/2.2.6.RELEASE/reference/html/howto.html#howto-spring-boot-application)

(5) All Spring projects -Boot,Data,Session etc.(https://spring.io/projects/spring-data-jdbc)

(6) Spring Framework~ API (https://docs.spring.io/spring-framework/docs/current/javadoc-api/index.html?org/springframework/web/servlet/config/annotation/EnableWebMvc.html)

​              <---WebFlux: ClientResponse, WebClient, 
​              <---WebMVC:   RestTemplate,
​              <---MockMVC
​              <---shared: MediaType,

(7) Spring Framework~ class diagram (https://blog.csdn.net/strivezxq/article/details/44560771)

(8) Starter guide:

​     https://spring.io/guides

#### Release Notes

https://spring.io/blog/category/releases

### 33808 Spring Data

#### Questions

1 (18--07-16) Why Spring use runtime class to call Spring instead of call Spring
as a lib probably is a typical IOC !! then the control is on Spring side 
now !! 
2 What is <<<SpringApplicationContext>>> ?  What's its main functions?How is it related to IoC?  
3 How configuration is used by Context ???
4 How to setup WebMVC WebFlux context? what are they ?
5 What is <<<SpringEnvironment>>>??? what's different from context ??
   180731: check springbootdoc 24.2 , looks Spring Environment is similar to Linux shell env ?
6 (18--08-10) What is lazy load ? why we need lazy singleton??
7 (18--08-13) what is method level annotation ?  ( from : Doc1 1.12.3) 
  Are there any other types of annotations?
8 (18--08-13) *****What is the differnce between Configuration and Component ??*****
9 (18--08-13) What is difference between @component and @Bean ?
10 (18--08-15) How Spring Boot integrate with Tomcat ?    ---- check tab same day 
11 (18--08-15) What is the relation ship between @Component and @Autowired ?
12 (18--08-15) How in Spring Boot we override the default configuration ? give examples here !!
13 (18--08-22) How Spring ApplicationContext integrated with AOP ?
14 (18--08-22) How ApplicationContext implement enterprise specific functionalities ?
15 (18--08-22) Annotation based vs Java Based configuration ?

    Seems not much difference . Check: https://stackoverflow.com/questions/41615041/java-based-vs-annotation-based-configuration-autowiring    
    seems Java-based configuration is newer than Annotation based configuration and java based configuration has more annotation tags!!  refer to: https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#spring-core
16(18--08-22) Why Spring difficult ? 
  A: 18--09-04: example how http request coupled to Spring? Dispatcher servlet or listener ??     
     how different kind of listener implemented ? how are they used ?
17 (18--08-24) Bean scope and its application seems interesting ?
18 (18--09-04 see BLIB) AOP vs DI ? 
19 (18--09-05) How many context does Spring application have ? Example like WebApplicationContext is different from ServiceContext ??
20 (18--09-05) What is the overall Spring context initialization process ? Concerning:  Spring BeanPostProcessor implementations which in turn means that you cannot apply these annotations within your own BeanPostProcessor or BeanFactoryPostProcessor types
and also AOP stuff .  Spring framework doc 1.8, 1.9 etc.

21 (18--09-06) Spring ref doc 1.12.2 how WebContext setup ? What is listener ? Dispatch servlet ?
22 (18-09-21) How about Spring modules relationship? See also 33808U003
23 (18--09-21) How JdbcTemplate autowired the datasource ?

24. (19--01-25) How Spring Boot hold static html and javaScript ?
25. (19--01-28) How to use JdbcTemplate to query the complicated data structure ?
26. (19--01-28) Compare JdbcTemplate and MyBatis and JPA? 
   27.(19--01-29) How to use JDBCTemplate to make a complex JSON return value ? 
27. (19--01-31) How JDBCTemplate support transaction?
   29.(19--02-01) How to batch insert/update records using JDBCTemplate ?
28. (19-03-01) How Spring Boot restful API implementation process http post request ? 
29. (19--03-05) How to do general JDBCTemplate queries ?

30.(19-03-01) How Spring Boot restful API implementation process http post request ? 
31.(19--03-05) How to do general JDBCTemplate queries ?
32.(19--03-12) How to get autoincremental id when use JDBCtemplate?
33.(19--03-21) Is bean only injected in bean ?  Bean can call normal object, normal object can not call bean?
34.(19--03-22) How to setup multiple CROSS origin URLs?

35. What are application  enterpriese features? How Spring implement them ?
36. What is SpringBoot and its advantages?
37. What is IoC ?
38. Is servlet an IoC implementation?
39. What is class path auto scan ? How to use it ? Examples ?
40. How JPA implement complex Domain object using DDD(domain driven design)?

41.What's difference between JPA and JPA2 ? Which Spring version implment which ?
42.How Spring support JPA cache ?
43.CrudRepository vs JPARepository?
44.JPA API vs JPA implementation? Difference between different venders ?
45.What's difference between embeddable and one to many ?
46.What is Spring Data JPA ?**
47.How to implement websocket ?
48.Compare Spring Boot with Express.js?
49.What is @RequestBody annotation and otherREST API annotations?
50.How to debug jdbc template?
51.How to process static web pages ?
52.What are all options for Spring to access persistent data ?
53.Can we have Spring works with real JPA ( like hibernate) example ( not Spring Data JPA) ?
54.Is HQL really needed ?
55.How spring compared with JEE?
56.What is annotation and how it is implemented ?
57.How does Spring implement Message Queue ?
58.What is difference between JPQL and HQL ?
59.What is hibernate OGM ?
60.Can we use Sessioin Factory, EntityManager and  Spring Data JPA at the same time ?
61.How does the Spring implement the EntityManager injection ? 
62.Can we have an example of hibernaate Session factory ?
63.How to download and setup spring source code from github ?
64.How to analyze spring source code ?
65.Why and how Spring boot integrate with legacy system ?
66.When we need to use dynamic proxy in Spring ?
67.When do we use ImportBeanDefinitionRegistrar to do the customization?
68.How many ways can we extend Spring ?
69.What is relationship between spring cloud and servicemesh ?
70.What does @SpringBootApplication annotation mean ?
71.What is @EnableAutoConfiguration , this is kiind of EnableXXX style annotation?
72.What is Spring Boot initializer (Luban note D15)  used for ?
73.Spring MVC process analysis including tomcat start and dispatchServlet handle request?
74.Can we write our own DispatcherServlet handler to handle specific URL request ?
75.What is AOP and how is it implemented ?
76.What is concepts like joinpoint and pointcut and advice within AOP ?
77.What is the application of AOP ?
78.Why Spring boot need spring-boot-starter-web dependency  and why need an parent in pom.xml? ?
79.What did spring-boot-maven-plugin do in details ? 
80.What is Spring boot auto configuration and how does it work ?
81.How many ways can Spring be extended ?
82.How to integrate Spring with POJO ?
83.What are three imports in Spring ?
84.Compare @Bean with @Import and @Component?
85.How annotation is implemented in source code level?
86.What is Shiro framework?
87.How user login and authentication implemented in Exp030 ?
88.What is difference bewteen FactoryBean and bean factory method?
89.What is difference bewteen FactoryBean and @Bean?
90.What is difference between jdk dynamic proxy and cglib ?
91.what is frequently used spring annotation ?
92.How does Spring implement transaction annotation ?
93.What is Spring transaction boundary ?
94.How does Spring call asynchronous method like a thread within a transaction ?
95.Can Spring transaction boundary methods be within the same class ?
96.Why Spring annotation transaction not rollback?
97.What is Spring scope ?
98.What is Spring MVC ?
99.How to position some options in Spring MVC ?
100.How is Spring MVC security ?

101:What is Spring HATEOAS ?
102.What is Spring reactive and webflux ?
103.How to read Spring MVC source code ?
104.What is spring boot ? 
105.What is relaionship between WebMvcConfigurationSupport and WebMvcConfigurer?
106.How to do source code analyze of sprint boot with mvc ?
107.What is CGLIB in Spring?
108.what is difference between @EnableXXX and spring.factories?
109.What spring boot retarted ?
110.What is difference between Spring annotation and java annotation or other annotations ?
111.How cglib is involved in Spring ?
112.How many ways do spring  instantiate a bean ?
113.How many types of autowire in Spring ?
114.What is the relationship between @Import, ImportSelector and ImportBeanDefinitionRegistrar?
115.What is aware interface ?
116.How spring implement http session ?
117.How can we check spring release from source code repository ?
118.How to build spring boot project using gradle especially with multiple modules?
119.What is micrometer in actuator ?
120.How is Spring Listener infrastructure ?
121.What are the useful understandable information we can get from actuator ?
122.How to do spring boot test ?
123.Does websocket use http ?
124.Can we use webflux and webmvc mixed in one controller ?
125.How to setup springBoot datasource ?
126.How to config Spring Boot with external tomcat  JDNI datasource ? 
127.How Spring data JPA handle practical problems ?
128.How Spring JPA (hibernatee) handle practical problem?
129.How to implement reactive repository ?
130.What filters are used in spring security ?
131.What is Spring security overview from blogs espcially chinese blog?
132.How about json conversion in Spring ?
133.What is difference between autowird and IcC ?
134.How is the thread modoel of webflux ?
135.What is SpEL?
136.When shall we avoid autowired?
137.How can webclient do both sync and async ?
138.What is difference between Spring boot test and Spring boot starter test?
139.How spring boot do auto configuration ?
140.How can we do webflux source code analysis ?
141.How to understand Mono and flux ?
142.How to deal with the backpressure ?
143.What is difference between stomp and websocket ?
144.Is Spring request a singleton ?
145.What is Spring cloud ?
146.How Spring boot deal with async processing ?
147.How Spring clound implement loadbalance ?
148.How Spring cloud eureka implement service discover and   register ?
149.How to compare router , gateway and zuul ?
150.What is Spring Security overview ?
151.How Spring do validation ?
152.How to compare sprint connection pool ?

153.How Spring Security implement OAuth2 ?

154.What is XSRF ？

155.How Spring Cloud do the authentication ?

156.How Spring cloud integrate with WebFlux ?

157.How to compare Spring MVC and WebFlux ?

158.How to compare 2 router solutions like Zuul and Gateway?

159.Can we have more webflux examples ?

160.What is zuul ?

161.How to understand hystrix and do the configuration?

162.What is basic ideas of Ribbon ?

163.How about the future trend of Spring cloud as Netflix in maintenance mode ?

164.How to integrate Spring Cloud gateway with Oauth2 ?

165.How to debug Webflux code ?

166.Can reactor do multiple subscription ?

167.How to do source code analyze of sprint boot with webflux ?

#### Keyword to Exp

##### AOP

   33808exp037

   33808exp073

   33808exp074

   33808exp079  

   33808exp147 ( ? used in source code analysis)

33808exp192

##### Central configuration 

​    33808exp159

​    33808exp185

##### Command Line Runner: 

​      implement interface:

​       33808Exp001

​       33808Exp011

​       33808Exp053

​       33808Exp054

​       33808Exp079  <--implement in main configuration class 

​       33808Exp080

​       33808Exp083

​       33808Exp085

​       33808Exp106 Seems use ApplicationRunner instead of CommandLine Runner

​                        <--https://www.concretepage.com/spring-boot/spring-boot-commandlinerunner-and-applicationrunner-example#:~:text=CommandLineRunner%20and%20ApplicationRunner%20serve%20the,spring%20ApplicationArguments%20as%20an%20argument.

​          <--- the same but ApplicationRunner will accept the args from main method 

​       33808Exp115

​       33808Exp116, 

​              <---      use bean: 

​       33808Exp054

​        33808Exp082

​        33808Exp137  

##### Configuration Properties: 

​       33808Exp003

​       33808Exp082

​        33808Exp144

##### Configuration Properties(bind to field)

​        33808Exp065    

##### Could circuit breaker 

33808exp199

##### Cloud configuration

​      33808exp159

33808exp198

33808exp197 spring cloud integration

##### Cloud consul

​        33808exp194 spring cloud consul

33808exp197

##### Cloud gateway

​       33808exp162

​       33808 exp187

​       33808exp197 spring cloud integration 

##### Cloud load balancer

​       33808exp193

​       33808exp197 spring cloud integration

##### Cloud Resilience 

33808exp198 spring cloud resilience 

##### Cloud zookeeper

​     33808exp195 spring cloud zookeeper 

​     33808exp196 embedded zookeeper

##### Custom annotation

​         <---201104: we really need pay more attention on this 

​       33808Exp079,

##### Data Source 

​       33808exp119

​       33808exp126

##### Gradle

​       33808exp192 original project 

33808exp198

JNDI

​        33808exp119

##### JWT 

​        33808exp136

##### Exception Handler

​        33808Exp147, Exp053, Exp083, Exp082,Exp004, Exp012     50216exp008,

##### Gateway

​         33808exp186,

##### Lombok

​        33808Exp053, 33808Exp130, 33808Exp132, 33808Exp145, 33808Exp146, 

##### Reactor(mono/flux)

​         33808exp150, 

​         33808exp189 simple 3 debug options ,

​         33808exp190 production ready debug

​         33808exp191 reactor debug spring boot

##### Reactor (debug)

​         33808exp189 simple 3 debug options ,

​         33808exp190 production ready debug

​         33808exp191 reactor debug spring boot

##### Ribbon

​        33808exp035

​         33808exp174

##### SSL

33808qus164-(03)-2_b_5

##### Tomcat :  

​        33808Exp119， 33808Exp121

##### Validation: 

​         33808Exp147,Exp083 

##### WebFlux 

​      33808exp114 load test

​      33808exp134 access memory

​      33808exp144  access github

​      33808exp191 reactor debug spring boot

33808exp187

33808exp197

##### Webjars

​     33808exp187

##### WebMvcConfigurer:

​      33808exp145 add interceptor

##### WebSocket 

​     33808exp111

​     33808exp112

​     33808exp148

##### Zuul 

​     33808exp171

​     33808exp184

#### Exp to keyword

33808exp134 access memory

33808exp135 ribbonClient, EurekaClient,EnableFeignClients

33808Exp136 jwt and JPA many to many

33808exp144  access github

33808Exp145 interceptor 

33808Exp150 reactor 

33808exp159 cloud configuration

33808Exp162 gateway

33808Exp171 Zuul

33808exp174  client side load balance with ribbon

33808exp181 LDAP with docker

33808exp184  spring cloud and oauth2, zuul, eureka , not completed 

​                     <---chines blog , code make no sense 

33808exp185 spring cloud with oauth2 , configuration, zuul, load balance, 

​                      <----code ok, but zuul in maintenance mode also old 

33808exp186 Spring cloud Gateway  (working)

​                     <--using  OAuth2 and JWT

33808exp187 Spring cloud Gateway OpenId , keycloak, 

33808exp188 Spring SecurityReactive 

33808exp189 reactor debug

33808exp190 production ready debug 

33808exp191 reactor debug spring boot

33808exp192 aop to get webflux log

33808exp193 spring cloud load balancer

33808exp194 spring cloud consul

33808exp195 spring cloud zookeeper 

33808exp196 embedded zookeeper

33808exp197 spring cloud integration, gateway, load balancer, consul etc. 

33808exp198 spring cloud resilience , cloud configuration, 

33808exp199 spring cloud circuit breaker 

33808exp200 spring k8s

#### Tools

Check U035 setup break points etc.

All tools we can use: 

1. turn debug on  in application.properties to get autoconfiguration setup 
2. use actuator 

### 33808 Spring Collection





Spring~ all projects (https://spring.io/projects/spring-boot#learn)

Spring~ Over view (https://www.cnblogs.com/best/p/5748105.html)
             <--with a diagram (local: C:\Billydev080107\MyEnabil\170424-1-AllScreenCopiesBPOT\200902-3-SpringOverview)

Spring~ Official Getting Started Guides, Topics and Tutorials (https://spring.io/guides)  

Spring~ Interview Questions (https://www.edureka.co/blog/interview-questions/spring-interview-questions/#WhatarethemajorfeaturesindifferentversionsofSpringFramework?)
              <---seems from book146 
#### __Custom Components

##### Custom Annotations

#### __Source code

##### --Connection pool

```
spring:
  datasource:
    dbcp2:
      url: jdbc:mysql://localhost:3306/33808exp133?useSSL=false
      username: billy
      password: 123456
      driver-class-name: com.mysql.jdbc.Driver
      initial-size: 5
             <--#初始化连接数量:连接池启动时创建的初始化连接数量
             #默认为0
      maxIdle=8 <--add myself             
             <--#最大空闲连接:连接池中容许保持空闲状态的最大连接数量,超过的空闲连接将被释
                  放,如果设置为负数表示不限制
                  #默认为8
      min-idle: 2
             <--#最小空闲连接:连接池中容许保持空闲状态的最小连接数量,低于这个数量将创建新的连接,如果设
                 置为0则不创建
                 #注意：timeBetweenEvictionRunsMillis为正数时，这个参数才能生效。
                 #默认为0
      max-total: 20
             <--#最大活动连接数量:连接池在同一时间能够分配的最大活动连接的数量, 如果设置为负数则表示不
                 限制  #默认为8
      max-wait-millis: 60000
      time-between-eviction-runs-millis: 60000
      min-evictable-idle-time-millis: 300000
      validation-query: SELECT 1 FROM DUAL
      test-while-idle: true
      test-on-borrow: false
    type: org.apache.commons.dbcp2.BasicDataSource
    <---from 33808exp133
    <---see also Qus125_(03)_2 the source of comments
```

##### --Resource 

Resource resource = new UrlResource(file.toUri());

​            <--33808exp082, wrap path with Resource 

#### Spring Boot

##### Spring Boot Doc

###### initializer portal

https://start.spring.io/ 

##### Spring Boot Data



##### Spring Boot Collection

###### Actuator 

Spring Boot Actuator API document (https://docs.spring.io/spring-boot/docs/current/actuator-api/html/#overview)

###### -- Actuator Endpoints

   http://localhost:8080/actuator  overall Url  

​                <--from Exp096,list all url for actuator
   http://localhost:8080/actuator/env           
   http://localhost:8080/actuator/env   applicationConfig  <---application.propterties stuff double  check        
   http://localhost:8080/actuator/env   systemProperties  <--- connection pool number,  java  version, lib path etc.         
   http://localhost:8080/actuator/heapdump     <--use jvisualvm to open heapdump from: (https://cloud.tencent.com/developer/article/1586358)
   http://localhost:8080/actuator/logfile      <-- get log file from: (https://juejin.im/post/6844904000832159751)
   http://localhost:8080/actuator/loggers/root     use post to change log level <--from: (https://cloud.tencent.com/developer/article/1586358)
   http://localhost:8080/actuator/metrics  ~all metrix names 
   http://localhost:8080/actuator/metrics/hikaricp.connections            <---total connections 33808exp126
   http://localhost:8080/actuator/metrics/hikaricp.connections.creation   <---see connection creation time 33808Exp126
   http://localhost:8080/actuator/metrics/hikaricp.connections.idle     <---2  connection pools and idle  from Exp126 
   http://localhost:8080/actuator/metrics/hikaricp.connections.max       <---max connections 33808exp126
   http://localhost:8080/actuator/metrics/hikaricp.connections.min       <---min connections 33808exp126
   http://localhost:8080/actuator/metrics/hikaricp.connections.timeout   <---count is 0 make sense 33808exp126
   http://localhost:8080/actuator/metrics/http.server.requests  requests    <--from Exp096, gives request stat information
   http://localhost:8080/actuator/metrics/jvm.threads.daemon  daemon threads 
   http://localhost:8080/actuator/metrics/jvm.threads.peak  threads peak   <--
   http://localhost:8080/actuator/metrics/jvm.memory.used  memory used    
   http://localhost:8080/actuator/metrics/jvm.memory.max    memory max     
   http://localhost:8080/actuator/metrics/tomcat.sessions.active.current session active   <---check 33808Exp152 static metrics.html  with links when the above links not working in markdown
   http://localhost:8080/actuator/shutdow   <--when enabled, use:   curl -X POST "http://localhost:8080/actuator/shutdown" to shutdown (https://juejin.im/post/6844904000832159751)
   http://localhost:8080/actuator/threaddump   <--give big json and detailed thread information

###### Command Line Runner

```
@Bean  <---in BPOT2098 we use @Component also work
CommandLineRunner init(StorageService storageService) {   
                        <---use constructor to inject,we can try this in BPOT2098 as well
   return (args) -> {
      storageService.deleteAll();
      storageService.init();
   };
}  
      <--from 33808Exp082 , we also implemented in BPOT2098
      <--looks we can still pass args into lambda
      <--StorageService should be sth we can inject into, how about the other bean ?
```

```
@Configuration        <---use @Configuration + @Bean combination
@Slf4j
class LoadDatabase {

   @Bean
   CommandLineRunner initDatabase(EmployeeRepository repository) {
      return args -> {
         log.info("Preloading " + repository.save(new Employee("Bilbo Baggins", "burglar")));
         log.info("Preloading " + repository.save(new Employee("Frodo Baggins", "thief")));
      };
   }
}            
```



```
@Component // <1>
public class DatabaseLoader implements CommandLineRunner { // <2>

   private final EmployeeRepository repository;

   @Autowired // <3>     <--using constructor injection
   public DatabaseLoader(EmployeeRepository repository) {
      this.repository = repository;
   }

   @Override
   public void run(String... strings) throws Exception { // <4>
      this.repository.save(new Employee("Frodo", "Baggins", "ring bearer"));
   }
}            <---this is from 33808exp180, seem 
```

###### Configuration 

###### __collection type 

​      <-----check (https://www.baeldung.com/configuration-properties-in-spring-boot)

      #List properties
      mail.defaultRecipients[0]=admin@mail.com
      mail.defaultRecipients[1]=owner@mail.com
      #Map Properties      <---
      mail.additionalHeaders.redelivery=true
      mail.additionalHeaders.secure=true
                       <---redelivery and secure should be the key of the map
      #Object properties
      mail.credentials.username=john
      mail.credentials.password=password
      mail.credentials.authMethod=SHA1
      
      tod.rootLocation=D:\\Backup\\PM1000
      tod.inputSourceFolders[0]=D:\\Backup\\PM1000\\Billydev080107
      tod.inputSourceFolders[1]=D:\\Backup\\PM1000\\李斌收藏081226
                          <---pay attention to: \\     
      Sample code of configuration class: 
           @Configuration     <---still needed to make it as bean
                              <---@EnableConfigurationProperties might not be needed TOD2098
                              
           @ConfigurationProperties(prefix = "mail") 
           public class ConfigProperties {
                 private String host;
                 private int port;
                 private String from;
                 private List<String> defaultRecipients;
                 private Map<String, String> additionalHeaders;
                 private Credentials credentials;
                 // standard getters and setters <----THIS IS VERY IMPORTANT!!!!!!
        }      

###### __custom configuration properties 

      <---Exp126  own datasource properties
      <---Exp144  with nested properties class
      <---Exp133  a bit customized datasource of connection pool 
      <---Exp038  customized properties from luban, GitHubReps folder 
      <---Exp065     @Value("${billydev.name}")  on field   private String name;
###### __typical  configuration properties

​      WebMvcProperties.java in 33808Exp083

###### __yaml configuration

```
## Spring Boot Actuator Info Endpoint Customization
info:
  # static properties
  app:
    name: Spring Boot Actuator Info Endpoint Configuration Example
    description: This tutorial demonstrates how to customize the Spring Boot Actuator Info Endpoint.
                <---33808exp098
```



      <---Exp133  this yaml based is very important as the @configurationProperties are directly 
                 annotated on the target Bean !!!!!!!
      <---Exp104 actuator configuration
      <---Exp028 mvc and servlet configuration    
      <---Exp034 lots of configurations for the eureka stuff  
      <---Exp178 has lots of configuration stuff like ribbon, endpoints setting etc.  
###### __Online examples: 

https://docs.spring.io/spring-boot/docs/1.4.1.RELEASE/reference/html/common-application-properties.html

​                   <----list lots of examples 

###### --Config in Exp

```
debug=true     ^^^  <--in application.properties

debug: true      <---in yaml 
```

​              <---output debug info for core modules 

​                from: (https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/reference/html/boot-features-logging.html)   

​    
eureka.client.register-with-eureka=false            <---from 33808Exp158
eureka.client.fetch-registry=false                  <---from 33808Exp158

###### ----Logging

```
log4j.rootLogger=WARN                   
                <---from 33808exp155 
logging.file.path=C:\\Temp\\200501    
            <--exp067
logging.level.org.apache.tomcat.util.digester=info            <---from 33808exp069
logging.level.org.apache.catalina.session=info        <--from Exp071
logging.level.org.apache.catalina.core=info           <--from Exp071
logging.level.org.apache.jasper.servlet=info          <--from Exp071
logging.level.org.apache.tomcat.util=info             <--from Exp071
logging.level.org.apache.tomcat.util.compat=info      <--from Exp071
logging.level.org.hibernate.SQL=DEBUG             <---From Exp122
logging.level.org.hibernate.type=TRACE            <---from Exp011, Exp122        
logging.level.org.springframework=INFO
logging.level.org.springframework.jdbc.core = TRACE  <--from Exp127     <---need check,might be useful 
logging.level.root=debug
logging.level.root=ERROR             <--from 33808Exp083
logging.
```

​              <---logging format see 33830 

​	      <---log level can set to class level see BPOT2098 application.yml

```
logging:
  level:
    org:
      springframework:
        cloud.gateway: TRACE
        http.server.reactive: TRACE
        web.reactive: TRACE
         <--33808exp187
```

management.endpoint.health.show-components=always  <---there are a bunch of indicator stuff          
management.endpoint.health.show-details=always    <--from 33808Exp097

management.endpoint.health.show-details=always   <----33808exp153

management.endpoint.shutdown.enabled=true     <---shutdown spring boot using a post message from (https://cloud.tencent.com/developer/article/1586358)

management.endpoints.sessions.enable=true    <--from 33808Exp102
management.endpoints.web.base-path=/minitor    <--- from (https://cloud.tencent.com/developer/article/1586358)
management.endpoints.web.cors.allowed-origins=https://www.choupangxia.com  <---allow CORS from (https://juejin.im/post/6844904000832159751)
management.endpoints.web.cors.allowed-allowed-methods=GET,POST        <---from (https://juejin.im/post/6844904000832159751)
management.endpoints.web.exposure.exclude=beans,trace  <--from https://cloud.tencent.com/developer/article/1586358
management.endpoints.web.exposure.include=*   <--from 33808exp096, expose all web endpoints    

management.endpoints.web.exposure.include=*      <----33808exp153

management.health.defaults.enabled: false     

​       <--from (https://cloud.tencent.com/developer/article/1586358)         
management.health.mongo.enabled: false        

​         <--from (https://cloud.tencent.com/developer/article/1586358)  

management.endpoint.health.show-details=always   

​                              <---33808exp097
management.endpoint.health.show-components=always

​                               <---33808exp097

management.server.port=8080                   <--from 33808Exp099 for ssl configuration
management.server.ssl.enabled=true
management.server.ssl.key-store=classpath:sample.jks
management.server.ssl.key-password=password
management.server.ssl.key-store-password = secret
management.security.enabled: false                    <-- from 33808exp104, try to disable security 
management.trace.include: remote_address, parameters  <---from 33808exp104, what need to be added to trace
management.endpoints.web.exposure.exclude=beans,trace
​          
mybatis.typeAliasesPackage=com.billydev.entity     <---Exp032  
mybatis.mapperLocations=classpath:mapper/*.xml


security.oauth2.resource.filter-order = 3 <--33808Exp093

server.contextPath=/springboot-jndi-lookup   

​            <---I guess 33808exp121, once this is set use jndi, 

​                 then spring.datasource.jndi-name=java:comp/env/jdbc/j4s         will be used

server.error.include-stacktrace=never   <---from 33808Exp083 , Exp147      
server.port = 8443                      <--from 33808Exp099 for ssl configuration
server.port:8090                        <--from 33808Exp094
server.servlet.context-path   /yoyo     <--yaml from Exp028 
server.ssl.enabled = true               <--from 33808Exp099 for ssl configuration 
server.ssl.key-store = classpath:sample.jks
server.ssl.key-password = password                      

server.tomcat.max-threads=0;   

​          <----From 33808exp113 was commented out, I guess control tomcat thread

spring.aop.proxy-target-class=false  <--this should make Spring force use CGLIB dynamic proxy  from Exp079  (https://www.jianshu.com/p/05c262a67283)
spring.application.name=a-bootiful-client  <---from 33808Exp158
spring.application.name=contract-rest-client   <--from 33808Exp167
spring.banner.charset  utf-8  <--yaml from Exp028 

###### ----Spring.cloud

```
spring.cloud.gateway.discovery.locator.enabled=true
  <--can use discovery client as the router, exp187 does not have this 
  <--201122exp197S001
  <--from 33808exp197 
```

​        <--https://cloud.spring.io/spring-cloud-gateway/multi/multi__configuration.html  8.2 

```
spring.cloud.gateway.routes=[{id=caller-service, uri=lb://caller-service, predicates=[Path=/caller/**], filters=[RewritePath=/caller/(?<path>.*), /${path}]}, {id=callme-service, uri=lb://callme-service, predicates=[Path=/callme/**], filters=[RewritePath=/callme/(?<path>.*), /${path}]}]
   <--id is the service id, should be: spring.application.name, also registered in consul
   <--one service might have one uri, <--I guess lb is load balance ??
   <--predicates  should be the matcher of request 
   <--filters: <--?? still not understand 
   <--from 33808exp197
```

spring.cloud.config.uri=http://localhost:8888           <---from 33808Exp159

###### ----Spirng.cloud.consul

```
spring.application.name=gateway-service
spring.cloud.consul.config.format=YAML
    <--when read from configuration server, the format is yaml
    <--201122exp197s002, from exp197
spring.cloud.consul.discovery.hostname=localhost
    <--I guess this is the name registered in discover server
    <--from exp197
spring.cloud.consul.discovery.register-health-check=false
   <--I guess just not check the health from discovery
   <--from exp197
spring.cloud.consul.host=localhost
    <---I guess this is the place where to talk to consul server
    <--33808exp197
```



spring.cloud.gcp.project-id=iconic-access-229601              <---from 33808exp172
spring.cloud.gcp.credentials.location=file:[LOCAL_FS_CREDENTIALS_PATH]   <---from 33808exp172
spring.data.mongodb.host=192.168.1.100          <---33808exp175
spring.data.mongodb.port=27017                  <---33808exp175
spring.data.rest.base-path=/api                   <----33808Exp180, adjust rest root URI (https://spring.io/guides/tutorials/react-and-spring-data-rest/)
spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver

                   <---- this one is old: spring.datasource.driver-class-name=com.mysql.jdbc.Driver
spring.datasource.hikari.enabled=false  <--Exp120                   
spring.datasource.initialization-mode=always               <--from Exp127
                    <---when table not created ?? or sqlnot load ?
spring.datasource.jndiName=jdbc/myDataSource

​                        <---33808Exp119 use this to set jndi name and then use this to search up jndi datasource

spring.datasource.jndi-name=java:comp/env/jdbc/j4s

​                         <---33808exp121 use this, I guess this is Spring internal jndi name !!!!!!(need confirm)

spring.datasource.url=jdbc:mysql://localhost:3306/33808exp119?useSSL=false
spring.datasource.url=jdbc:mysql://localhost:3306/github_demo?useUnicode=true&characterEncoding=utf8&serverTimezone=GMT%2B8&useSSL=true <--Exp133 (https://www.cnblogs.com/ZhangZiSheng001/p/12003922.html)
spring.datasource.username=billy
spring.datasource.password=123456
spring.datasource.jndiName=jdbc/myDataSource    

             <--from 33808Exp119        
             <--we can use our own datasource properties check Exp126
             <--DBCP2 connection pool properties refer to: ()
spring.h2.console.enabled=true   <--show hikari connection pool info in console from 33808Exp102
spring.jackson.date-format  yyyy-MM-dd <--yaml from Exp028 
spring.jackson.time-zone    GMT+8 <--yaml from Exp028 

spring.jpa.hibernate.ddl-auto = update
spring.jpa.generate-ddl=true
              <--the above 2 shall generate the db tables automatically
spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5InnoDBDialect

​          <--from Exp119    

spring.jpa.properties.hibernate.generate_statistics=true      

​          <---From Exp117, will generate good hibernate statistics !! 

spring.jpa.show-sql=true            <--from Exp126 , Exp123, Exp125     
spring.ldap.embedded.ldif=classpath:test-server.ldif          <-- 33808Exp157
spring.ldap.embedded.base-dn=dc=springframework,dc=org        <-- 33808Exp157
spring.ldap.embedded.port=8389                                <-- 33808Exp157
spring.mail.host=smtp.qq.com       <--from vhr
spring.mail.protocol=smtp          <--from vhr
spring.mail.default-encoding=UTF-8   <--from vhr
spring.mail.password=fzvarxpndockbaeg    <--from vhr
spring.mail.username=1510161612@qq.com    <--from vhr
spring.mail.port=587                      <--from vhr
spring.mail.properties.mail.stmp.socketFactory.class=javax.net.ssl.SSLSocketFactory <--from vhr
spring.mail.properties.mail.debug=true  <--from vhr
spring.main.banner-mode=off
            <--from 33808Exp083            
spring.mvc
            <--WebMvcProperties @ConfigurationProperties use this prefix
spring.mvc.date-format  yyyy-MM-dd 

​             <--yaml from Exp028 

spring.profiles.active=Dev

```
@Component
@Profile("Dev")    <---this bean will be used as active 
public class DevDataSourceConfig implements DataSourceConfig {
    public void setup() {
        System.out.println("setting up dev datasource config!");
    }
}
@Component
@Profile("Production")
public class ProductionDataSourceConfig implements DataSourceConfig {
    public void setup() {
        System.out.println("setting up production data source!");
    }
}               
          <---from   33808exp066
          <---see also 33808exp147
```

​                

​                

spring.rabbitmq.username=guest          <---from vhr BPOT2123
spring.rabbitmq.password=guest           <---from vhr BPOT2123
spring.rabbitmq.host=192.168.91.128       <---from vhr BPOT2123

Spring.rabbitmq.host=192.168.1.100     <---from 33808exp156

spring.rabbitmq.port=5672                  <---from vhr BPOT2123
spring.rabbitmq.listener.simple.acknowledge-mode=manual   <---from vhr BPOT2123
spring.rabbitmq.listener.simple.prefetch=100               <---from vhr BPOT2123
spring.redis.host=192.168.91.128         <---from vhr BPOT2123
spring.redis.port=6379                 <---from vhr BPOT2123
spring.redis.password=123                  <---from vhr BPOT2123
spring.redis.database=0                   <---from vhr BPOT2123
spring.resources

            <--ResourceProperties @ConfigurationProperties use this prefix
spring.servlet.multipart.max-file-size=128MB
spring.servlet.multipart.max-request-size=128MB

​                 <--from 33808Exp082            

spring.session.store-type=jdbc  

​                      <--so we can see session in actuator ,  from 33808Exp102
spring.session.jdbc.initialize-schema=always  <--from 33808Exp102
spring.session.timeout.seconds=900    <--from 33808Exp102

spring.security.oauth2.client.registration.github.client-id: 7a53c7593fb2ca88c9d7

spring.security.oauth2.client.registration.github.client-secret:asfs <---from 33808exp084

spring.security.user.name=javaboy      <---basic authentication user info , from 33808exp141
spring.security.user.password=123      <---basic authentication user info , from 33808exp141
spring.thymeleaf.cache  false <--yaml from Exp028 
ribbon.eureka.enabled=false                 <---from 33808Exp171       
zuul.routes.books.url=http://localhost:8090  <---from 33808Exp171

#### Spring Data 

##### Spring Data Common 

Spring Data Common API (crud and pagingsorting here) (https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html)

##### Spring Data JPA

######  JPA Doc

Spring Data JPA API (https://docs.spring.io/spring-data/jpa/docs/2.3.1.RELEASE/api/)

Spring Data JPA query method name convention (see also Exp122) (https://www.javaguides.net/2018/11/spring-data-jpa-query-creation-from-method-names.html)

Spring Data JPA repository class diagram(local diagram 200810S001) (https://www.javaguides.net/2018/11/spring-data-jpa-tutorial-getting-started.html)

​          <---Repository,  CrudRepository, PagingAndSortingRepository  belong to Spring Data (common)

​               JpaRepository belongs to Spring Data JPA

Spring Data JPA tutorial (https://www.javaguides.net/p/spring-data-jpa-tutorial.html)

###### JPA Data

###### JPA Collection

###### --Annotations

###### ----@Column

    @Column(name ="role_name",nullable = false)
    private String roleName;
    @Column(name ="status",nullable = false)
    private String status;
    @Column(name ="create_date")
    private LocalDateTime createDate;
        <--from 33808exp185
    @Column(name = "user_name", unique = true)  <--column can have unique constraint
    @NotNull
    private String userName;    
          <--OauthAccessTokenEntity in 33808exp185
###### ----@Id

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
                  <---attention to: GenerationType
    @Column(name ="role_id",nullable = false)
    private Long roleId;
           <---UserRoleEntity in  33808exp185
###### ----@Column

```
@Column(name ="role_id",nullable = false)  <---nullable
private Long roleId;
   <---UserRoleEntity in  33808exp185    
```

    //    @Lob
    @Column(name = "client_secret",length = 4000)   <---has length
    private String clientSecret;
           <---OauthClientDetailEntity in 33808exp185
```
@Column(name = "token_id", unique = true)    <---unique stuff
@NotNull
private String tokenId;
       <---OauthRefreshTokenEntity in 33808exp185
```

###### ----@Lob

   private byte[] authentication;

​            <---OauthAccessTokenEntity  33808exp185

###### ----@ManyToOne

```
@ManyToOne
private PersonProfileEntity personProfileEntity;
      <--PersonAddressEntity in 33808exp185
```

###### ----@OneToOne

```
   @OneToOne(cascade = CascadeType.ALL)
   private PersonProfileEntity personProfileEntity;
           <----33808exp185
```

###### ----@OneToMany

    @OneToMany(mappedBy = "personProfileEntity", cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true)
    private Set<PersonAddressEntity> personAddressEntities = new HashSet<>(0);
          <---PersonProfileEntity in 33808exp185
###### ----@Table

@Table(name = "tbl_sec_user_role",uniqueConstraints = {@UniqueConstraint(columnNames={"role_name"})})

​        <----seems columnNames are from database not java class

​        <----UserRoleEntity in 33808exp185

##### Spring Data MongoDB

Spring Data MongoDB API (https://docs.spring.io/spring-data/data-mongodb/docs/current/api/index.html?overview-summary.html)



#### Spring Framework

##### Validation  

###### Validation Doc 

all constraints 

​         see: https://blog.csdn.net/shenchaohao12321/article/details/100163991

​                   <---Chinese blog list all constraints 

official site:

​     https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/core.html#validation

###### Validation Data

###### Validation Collection

###### --Annotations

###### ----@NotEmpty

```
@NotEmpty(message = "User name can't be null or empty")
private String userName;
     <---UserSignupDTO in 33808exp185
```

###### ----@NotNull

```
@NotNull
private String userName;
   <---OauthAccessTokenEntity in 33808exp185
```

###### ----@Size 

```
@Size(min = 8, max = 32, message = "Password must be between 2 and 32 characters long")
private String password;
 <---UserSignupDTO in 33808exp185
```

#### AOP 

##### AOP Doc

    aspect:一定要给spring去管理  抽象  aspectj->类  
    pointcut:切点表示连接点的集合  ------------------->           表
       （我的理解：PointCut是JoinPoint的谓语，这是一个动作，主要是告诉通知连接点在哪里，切点表达式决定 
         JoinPoint 的数量）
    Joinpoint:连接点   目标对象中的方法 ---------------->    记录
         （我的理解：JoinPoint是要关注和增强的方法，也就是我们要作用的点）
    Weaving :把代理逻辑加入到目标对象上的过程叫做织入
    target 目标对象 原始对象
    aop Proxy 代理对象  包含了原始对象的代码和增加后的代码的那个对象
    advice:通知    (位置 + logic)   
             <--33808Qus076_(02)_1
Spring Framework AOP API (https://javadoc.io/doc/org.springframework/spring-aop/latest/index.html)

Spring Framework AOP AspectJ API (https://javadoc.io/doc/org.aspectj/aspectjrt/latest/index.html)

Spring Framework AOP Concepts (https://www.edureka.co/blog/spring-aop-tutorial/)

##### AOP Data

###### PointCut Examples

```
@Pointcut("execution(public String com.baeldung.pointcutadvice.dao.FooDao.findById(Long))")
```

​            <---from: https://www.baeldung.com/spring-aop-pointcut-tutorial

##### AOP Collection

#### WebFlux/Reactor

##### WebFlux/Reactor Doc

###### ReactiveStream

Reactive Stream API (https://www.reactive-streams.org/reactive-streams-1.0.0-javadoc/index.html?org/reactivestreams/Publisher.html)

​           <---seems another project 

###### Core API


Core API (new, not part of spring) (https://projectreactor.io/docs/core/release/api/index.html?reactor/core/publisher/Mono.html)

​          <---Mono, Flux etc. 
​          <---Spring implmentation class API still within Spring Framework API doc

Core API (old) (https://projectreactor.io/docs/core/3.0.3.RELEASE/api/index.html?reactor/core/publisher/Mono.html)

###### Netty API

​    <---communication layer

​    API(https://projectreactor.io/docs/netty/snapshot/api/index.html?reactor/netty/channel/ChannelOperations.html)

###### WebFlux

reference doc(https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html)

##### WebFlux/Reactor Data

###### Topic to Exp

###### Exp to topic 

33808exp109   routing webflux

33808exp111  basic websocket 

##### WebFlux/Reactor Collection 

#### WebMVC 

Spring Framework WebMVC~ reference doc() (https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html)
      <---Spring implmentation class API still within Spring Framework API doc

Spring Framework WebMVC GetMapping URL pattern (https://stackoverflow.com/questions/2952196/learning-ant-path-style)
                                    <----example: 33808exp082 @GetMapping("/files/{filename:.+}") will also give filename variable
                                    <---@RequestMapping("/pdf/{fileName:.+}")  33808exp051

#### WebSocket 

##### WebSocket Doc

Spring Framework WebSocket 6455 websocket protocol (https://tools.ietf.org/html/rfc6455)
Spring Framework WebSocket API (https://www.w3.org/TR/websockets/)


##### WebSocket Data

###### keyword to Exp

websocket  Exp111, exp112, exp148

stomp   exp112

##### WebSocket Collections     

#### Spring HATEOAS 

Spring HATEOAS API (https://docs.spring.io/spring-hateoas/docs/current/api/index.html?org/springframework/hateoas/EntityModel.html)

#### Spring Security 

Spring Security API (https://docs.spring.io/spring-security/site/docs/current/api/index.html?org/springframework/security/config/annotation/web/builders/HttpSecurity.html)

Spring Security Blog (江南一点雨) (https://zhuanlan.zhihu.com/p/150397755)

## 33830 Java logging

### 33830 Doc

Java Logging slf4j API (http://docs.glngn.com/latest/api/org.slf4j.slf4j-api/index.html?org/slf4j/spi/MDCAdapter.html)

### 33830 Data

### 33830 Collection

#### Command line param

    -Dlogging.level.org.springframework=TRACE 
    -Dlogging.level.com.baeldung=TRACE
                     <---33808Exp152 


  Java Logging Command Line configure arguments (https://www.baeldung.com/spring-boot-logging)

#### Logback configuration

​            <---main log level config see 33808Spring Collection/Spring Boot/Spring Boot Configuration

The following is application.properties

```
logging.level.root=debug
logging.pattern.console=%d{dd-MM-yy HH:mm:ss.SSS} %magenta([%thread]) %highlight(%-5level) %logger.%M - %msg%n

output: 
20-10-20 10:33:11.353 [main] DEBUG billydev.SpringBootLoggingDemo.main - Going to divide 42 by 0
       <---date, [thread name in magenta color], Log Level DEBUG/INFO highlighted, 
           %logger. <--full class name with method name main, message 


logging.path=logs
logging.file=${logging.path}/log.log
logging.pattern.file=%d{dd-MM-yyyy HH:mm:ss.SSS} [%thread] %-5level %logger{36}.%M - %msg%n

output of log file: 
23-09-2020 11:48:00.586 [main] DEBUG o.s.u.c.s.UiApplicationContextUtils.initThemeSource - Unable to locate ThemeSource with name 'themeSource': using default [org.springframework.ui.context.support.ResourceBundleThemeSource@78fbff54]
      <---date with format,  [threadname], DEBUG is log level, 
          %logger has length and with method name, message, 
```

​                 <---33808Exp067                     

- `%d` – outputs the time that the log message occurred in formats that `SimpleDateFormat` allows.
- `%thread` – outputs the name of the thread that the log message occurred in.
- `$-5level` – outputs the logging level of the log message.
- `%logger{36}` – outputs the package + class name the log message occurred in. The number inside the brackets represents the maximum length of the package + class name. If the output is longer than the specified length, it will take a substring of the first character of each individual package starting from the root package until the output is below the maximum length. The class name will never be reduced. A nice diagram of this can be found in the [Conversion Word docs](https://logback.qos.ch/manual/layouts.html#conversionWord).
- `%M` – outputs the name of the method that the log message occurred in (apparently this is quite slow to use and not recommended unless you're not worried about performance, or if the method name is particularly important to you).
- `%msg` – outputs the actual log message.
- `%n` – line break.
- `%magenta()` – sets the color of the output contained in the brackets to magenta (other colors are available).
- `highlight()` – sets the color of the output contained in the brackets depending on the logging level (for example ERROR = red).

​                <---check: (https://dzone.com/articles/configuring-logback-with-spring-boot)
​    

In following in xml file: 

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <include resource="org/springframework/boot/logging/logback/defaults.xml" />

    <springProfile name="default">
        <include resource="org/springframework/boot/logging/logback/console-appender.xml"/>

        <root level="INFO">
            <appender-ref ref="CONSOLE"/>
        </root>
    </springProfile>

    <springProfile name="prod">

        <appender name="FILE-ROLLING" class="ch.qos.logback.core.rolling.RollingFileAppender">
            <file>app_prod.log</file>

            <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
                <fileNamePattern>logs/archived/app.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
                <!-- each archived file, size max 10MB -->
                <maxFileSize>2KB</maxFileSize>
                <!-- total size of all archive files, if total size > 20GB, it will delete old archived file -->
                <totalSizeCap>20GB</totalSizeCap>
                <!-- 60 days to keep -->
                <maxHistory>60</maxHistory>
            </rollingPolicy>

            <encoder>
                <pattern>%d %p %c{1.} [%t] %m%n</pattern>
            </encoder>
        </appender>

        <logger name="org.springframework" level="INFO"/>
        <logger name="com.mkyong" level="DEBUG"/>
        <root level="ERROR">
            <appender-ref ref="FILE-ROLLING"/>
        </root>
    </springProfile>

</configuration>

output log in log file: 
2020-10-20 10:26:33,669 INFO org.springframework.web.context.ContextLoader [restartedMain] Root WebApplicationContext: initialization completed in 3523 ms
        <--first date, INFO is log level, class name, [threadname], message: "Root Web...."
```

​    <--see also 33808Exp149               explained 

​                 %t thread, 

​                 %p log level of logging event, 

​                 %c class, 

​                %d date, 

​               %m message 

​               <--gives different setting from dev or production

​                <--- detailed patterns (https://www.cnblogs.com/chrischennx/p/6781574.html)

​                   

logging.pattern.level=%X{userId}%5p

​       <--For 33808exp143

​        <-- a pattern **%X{key}** to retrieve the values that are present in the **MDC**.

​              The key will be **userId** in our example.

​         <---more pattern : https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html








## 33845 Hibernate

Hibernate API (https://docs.jboss.org/hibernate/orm/5.0/javadocs/)

Hibernate Validator API (https://docs.jboss.org/hibernate/stable/validator/api/index.html?org/hibernate/validator/constraints/Email.html)

## 38000 MySQL 

### 38000 Doc

MySQL Doc (https://dev.mysql.com/doc/)

MySQL Doc reference manual(https://dev.mysql.com/doc/refman/8.0/en/)

My SQl blog Database normalization 3 norms (https://segmentfault.com/a/1190000022843792) 

### 38000 Data

DBeaver Script location:  D:\Backup\PM1000\Billydev080107\TempDev\200721-1-DBeaverScripts

cardinality=NUM_ROWS*selectivity

​            <---my guess 1000rows, each group(same value) has 3, selectivity = 1/3, cardinality is 330 

​           <--from: http://blog.itpub.net/26736162/viewspace-2140358/ 

### 38000 Collection

#### server operations 

server start up option

```
my.cnf on windows

"C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqld.exe" --defaults-file="C:\ProgramData\MySQL\MySQL Server 8.0\my.ini" MySQL80  
           <---see 201022-1  S001 
           <---open that ini file, we can get the following: 
datadir=C:/ProgramData/MySQL/MySQL Server 8.0/Data
default-storage-engine=INNODB
log-output=FILE
general-log=0
general_log_file="BILLYDELL.log"
slow-query-log=1
slow_query_log_file="BILLYDELL-slow.log"
long_query_time=10
             <-----logging might be important 
lower_case_table_names=1
              <--so case insensitive
max_connections=151              
```

​       <--from: https://stackoverflow.com/questions/1712646/i-can-not-find-my-cnf-on-my-windows-computer 

#### database operations

​     <--include user, log and data files,encoding ,  etc. 

###### create database 

create database abc

​        <---

show databases

```
mysql> show databases;
+-----------------------+
| Database              |
+-----------------------+
| 33808exp012           |
| 33808exp012prac01     |
| 33808exp012prac02     |
| 33808exp045           |
```

​           <--- first get into mysql client tool 

###### backup

#### client and session 

command line client

```
SET default_storage_engine=NDBCLUSTER;
```

​          <---set storage engine in session 

​               check exp013 



#### datatype choose

##### How to do conversion

mysql doc: 

​      https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-type-conversions.html

jdbc view : 

​      https://www.cis.upenn.edu/~bcpierce/courses/629/jdkdocs/guide/jdbc/getstart/mapping.doc.html

​         <---especially list the retrieve compatability which is very useful 

my BLIB

​      U002,U003,U004

Clob blob conversion

​         https://thorben-janssen.com/mapping-blobs-and-clobs-with-hibernate-and-jpa/ 

TODO: 

​      (1) make a entity class which might need to map to not normal types :

​            bigDecimal, boolean, byte[] etc. to see how they are converted to mysql type through JPA

​      (2)  make a mysql table with all types , then do jdbc query and get the datatypes 

​       (3)List scenario that cause overflow, truncated or lost precision 

​                   <---so we can avoid them !! 

#### table operation

##### create table 

```
create table persistent_logins (

      username varchar(64) not null, 

                 <---better to have not null constraints, need collect reasons

      series varchar(64) primary key, 

                  <----I guess table usually have primary key

      token varchar(64) not null, 

             <---not fixed length char, less than 65k use varchar

      last_used timestamp not null);

                <----timestamp will consider timezone, which timezone client or server?
                     I guess should be client, check U003 for details 
```

​       <--- from API decrease 

```
DROP TABLE IF EXISTS `t_student`;
CREATE TABLE `t_student` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'id',
              <---auto_increment is important
  `name` varchar(255) DEFAULT NULL COMMENT '姓名',
                <---default null is interesting
  `age` int(11) DEFAULT NULL COMMENT '年龄',
  `clazz_id` int(11) DEFAULT NULL COMMENT '班级id',
  `number` varchar(6) DEFAULT NULL COMMENT '学号',
  PRIMARY KEY (`id`) USING BTREE
              <--- primary key in the very last,  BTree and other options need to collect
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC;

   <---must use `` in `id`, not 'id', same when `id` is referenced in primary key
   <---if not use `` that is ok !!
   <--totally different from java:
     (i) after table name use "(" not "{" 
     (ii) varaible first then type !!
```

​       <---from 33808exp133

```
DROP TABLE IF EXISTS `user`;

CREATE TABLE `user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
             <---collate need to collect more information
             <---seems name always default null
  `address` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
         <---can we assign engine table by table 
         
```

​     <-- from: http://mybatis.javaboy.org/2019/1102/helloworld



db creation example with foreign key
https://grobmeier.solutions/spring-security-5-using-jdbc.html

​         <---need add the code 

##### modify table

```
alter table

(a) Add column

   alter table emptest add (salary int, hire_date timestamp , height int) 
                 <---how about the data already exists in table
                 
(b) Modify column

alter table emptest modify  height  varchar(30)

alter table emptest alter  hire_date set  DEFAULT CURRENT_TIMESTAMP
             <---need confirm
                  desc emptest
                  select * from emptest

alter table emptest  rename column  height  to high

alter table emptest modify  high  varchar(35) 
         <---to test:  select * from emptest

(c) drop column  

   alter  table emptest drop column high

   desc emptest  
        -----seems only rename column and drop column need add the "column" into !!
```

##### insert data

```
insert into posts (jpa_one_to_many_demo.posts.content, created_at,updated_at,description,title) 

   values ("billy test", CURRENT_TIMESTAMP(),CURRENT_TIMESTAMP(),"desc1","admin")
             <---current time 
```



#### constraint operation

#### index 

##### index concepts

​         <--- see 38000Qus026_(02) which is very good

##### create general index

```
CREATE TABLE t1 (
  col1 VARCHAR(10),
  col2 VARCHAR(20),
  INDEX (col1, col2(10))
);    <--general create table with index
CREATE TABLE t1 (col1 INT, col2 INT, INDEX func_index ((ABS(col1))));
         <-- with function index
CREATE INDEX idx1 ON t1 ((col1 + col2));
          <---
CREATE INDEX idx2 ON t1 ((col1 + col2), (col1 - col2), col1);
ALTER TABLE t1 ADD INDEX ((col1 * 40) DESC);
```

​           <--- from decrease , should be general index and function index

##### create composite index 

```
CREATE TABLE table_name (
    c1 data_type PRIMARY KEY,
    c2 data_type,
    c3 data_type,
    c4 data_type,
    INDEX index_name (c2,c3,c4)
);
     <---create index during table creation
     
CREATE INDEX index_name 
ON table_name(c2,c3,c4);
       <--add index on existing table
```

​      <--from: https://www.mysqltutorial.org/mysql-index/mysql-composite-index/#:~:text=To%20create%20a%20composite%20index%20at%20the%20time%20of%20table,c2%2C%20c3%2C%20and%20c4.

##### show index

```
SHOW INDEXES FROM table_name;

```

​           <-- from: https://www.mysqltutorial.org/mysql-index/mysql-show-indexes/#:~:text=To%20query%20the%20index%20information,table%20in%20the%20current%20database.

#### query operation

​    see some old queries in 36000 Exp

##### limit 

​    select * from employee limit  10, 2  

​     <-- row 11 and 12, when offset is big use subquery see below

​     <--https://segmentfault.com/a/1190000008859706

#### database optimization 

​        <-- check overall rules on paper

​         <--check U005 

MySQL 数据库常见的优化手段分为三个层面：SQL 和索引优化、数据库结构优化、系统硬件优化

​         <---**Check 38000Qus024_(02) <--this one is super important**

​         <---link is: https://juejin.im/post/6844904151646732295

##### 优化目标

​     IO   : 90% used in IO ,  reduce number of IO

​     CPU :  order by, group by, distinct  consume lots of cpu

##### 方案一： SQL 和索引优化

###### 使用正确的索引

```
对于联合索引来说，要遵守最左前缀法则。比如：组合索引（a,b,c）三列，我们可以使用（a）、（a,b）、(a,c)、（b、c）、（a,b,c）但是不能以（b,a）、(c,a)、（c,b）等组合使用否则导致索引失效。
     <--(seems the rule is: must use the first index field )
     
 
必要时可以使用force index来强制查询走某个索引。 

build index on field with big cardinality 
use concatenated instead of composite 
use covering index as much as possible
          <--from original note; 

在使用索引字段作为条件时，如果该索引是复合索引，那么必须使用到该索引中的第一个字段作为条件时才能保证系统使用该索引，  否则该索引将不会被使用，并且应尽可能的让字段顺序与索引顺序相一致。

索引并不是越多越好，索引固然可以提高相应的 select 的效率，但同时也降低了 insert 及 update 的效率，
因为 insert 或 update 时有可能会重建索引，所以怎样建索引需要慎重考虑，视具体情况而定。
一个表的索引数最好不要超过6个，若太多则应考虑一些不常使用到的列上建的索引是否有必要。

           <--query should try to use index !!
           <--- from: https://zhuanlan.zhihu.com/p/102150451
```



###### sql书写时的注意:

```
在 MySQL 5.0 之前的版本要尽量避免使用 or 查询，可以使用 union 或者子查询来替代，因为早期的 MySQL 版本使用 or 查询可能会导致索引失效，在 MySQL 5.0 之后的版本中引入了索引合并，简单来说就是把多条件查询，比如 or 或 and 查询的结果集进行合并交集或并集的功能，因此就不会导致索引失效的问题了。如果限制条件中其他字段没有索引，尽量少用or。

避免在 where 查询条件中使用 != 或者 <> 操作符，因为这些操作符会导致查询引擎放弃索引而进行全表扫描。
          <--否则将引擎放弃使用索引而进行全表扫描
          <--https://zhuanlan.zhihu.com/p/102150451

适当使用前缀索引，MySQL 是支持前缀索引的，也就是说我们可以定义字符串的一部分来作为索引。我们知道索引越长占用的磁盘空间就越大，那么在相同数据页中能放下的索引值也就越少，这就意味着搜索索引需要的查询时间也就越长，进而查询的效率就会降低，所以我们可以适当的选择使用前缀索引，以减少空间的占用和提高查询效率。

要尽量避免使用 select *，而是查询需要的字段，这样可以提升速度，以及减少网络传输的带宽压力。

关于JOIN优化，尽量使用 Join 语句来替代子查询，因为子查询是嵌套查询，而嵌套查询会新创建一张临时表，而临时表的创建与销毁会占用一定的系统资源以及花费一定的时间，但 Join 语句并不会创建临时表，因此性能会更高。
      <--避免频繁创建和删除临时表，以减少系统表资源的消耗        
         临时表并不是不可使用，适当地使用它们可以使某些例程更有效，例如，当需要重复引用大型表或常用表中 
         的某个数据集时。但是，对于一次性事件，最好使用导出表。
        在新建临时表时，如果一次性插入数据量很大，那么可以使用 select into 代替 create table，避免造成
        大量 log ，
        以提高速度；如果数据量不大，为了缓和系统表的资源，应先create table，然后insert。
        如果使用到了临时表，在存储过程的最后务必将所有的临时表显式删除，先 truncate table ，然后 drop 
        table ，这样可以避免系统表的较长时间锁定。   
        尽量避免使用游标，因为游标的效率较差，如果游标操作的数据超过1万行，那么就应该考虑改写。
        使用基于游标的方法或临时表方法之前，应先寻找基于集的解决方案来解决问题，基于集的方法通常更有效。
        与临时表一样，游标并不是不可使用。对小型数据集使用 FAST_FORWARD 游标通常要优于其他逐行处理方
        法，尤其是在必须引用几个表才能获得所需的数据时。
         在结果集中包括“合计”的例程通常要比使用游标执行的速度快。如果开发时间允许，基于游标的方法和基于
         集的方法都可以尝试一下，看哪一种方法的效果更好。
         <--the above need to be digested
       <---from: https://zhuanlan.zhihu.com/p/102150451
        
 
 我们要尽量使用小表驱动大表的方式进行查询，也就是如果 B 表的数据小于 A 表的数据，那执行的顺序就是先查 B 表再查 A 表。
          <---I guess the driving cost is very high !!

不要在列字段上进行算术运算或其他表达式运算，否则可能会导致查询引擎无法正确使用索引，从而影响了查询的效率。
          <---如：select id from t where num/2=100
                应改为:
              select id from t where num=100*2
          <-- 应尽量避免在where子句中对字段进行函数操作，这将导致引擎放弃使用索引而进行全表扫描。如：
              select id from t where substring(name,1,3)='abc'--name以abc开头的id
                  应改为:
              select id from t where name like 'abc%'
          <-- 不要在 where 子句中的“=”左边进行函数、算术运算或其他表达式运算，
               否则系统将可能无法正确使用索引。              
           <--from: https://zhuanlan.zhihu.com/p/102150451

增加冗余字段可以减少大量的连表查询，因为多张表的连表查询性能很低，所有可以适当的增加冗余字段，以减少多张表的关联查询，这是以空间换时间的优化策略。

避免类型转换，这里所说的“类型转换”是指 where 子句中出现 column 字段的类型和传入的参数类型不一致的时候发生的类型转换。
        <---will cause every record do the same conversion again and again
        
尽量用 union all 代替 union，union 和 union all 的差异主要是前者需要将两个(或者多个)结果集合并后再进行唯一性过滤操作，这就会涉及到排序，增加大量的 CPU 运算，加大资源消耗及延迟。所以当我们可以确认不可能出现重复结果集或者不在乎重复结果集的时候，尽量使用 union all 而不是 union。

尽量少排序  order  by，排序操作会消耗较多的 CPU 资源，所以减少排序可以在缓存命中率高等 IO 能力足够的场景下会较大影响 SQL 的响应时间。如果排序字段没有用到索引，就尽量少排序。

SQL语句中IN包含的值不应过多，MySQL对于IN做了相应的优化，即将IN中的常量全部存储在一个数组里面，而且这个数组是排好序的。但是如果数值较多，产生的消耗也是比较大的。
        <-- in 和 not in 也要慎用，否则会导致全表扫描，如：
             select id from t where num in(1,2,3)
             对于连续的数值，能用 between 就不要用 in 了：
             select id from t where num between 1 and 3
             <-- from: https://zhuanlan.zhihu.com/p/102150451

当只需要一条数据的时候，使用limit 1，这是为了使EXPLAIN中type列达到const类型。
           <---explicitly limit to 1, the explain type need look into
           
区分in和exists， not in和not exists。
        <---? I guess need compare to semi join and temp table stuff 
            condition push down
        <---很多时候用 exists 代替 in 是一个好的选择：
            select num from a where num in(select num from b)
            用下面的语句替换：
            select num from a where exists(select 1 from b where num=a.num)    
                  <---I think this is very typical condition push down
        <--from: https://zhuanlan.zhihu.com/p/102150451
        
使用合理的分页方式以提高分页的效率。
       <--paing and filtering 

分段查询
        <-- 

避免在 where 子句中对字段进行 null 值判断
         <--否则将导致引擎放弃使用索引而进行全表扫描
            select id from t where num is null
            可以在num上设置默认值0，确保表中num列没有null值，然后这样查询：
            select id from t where num=0
         <--https://zhuanlan.zhihu.com/p/102150451  

不建议使用%前缀模糊查询，如果使用%前缀来模糊查询，建议使用全文索引。
      <-- 下面的查询也将导致全表扫描：
         select id from t where name like '%abc%'
         <--from: https://zhuanlan.zhihu.com/p/102150451

  
```

​      

##### 方案二：库结构优化

###### 最小数据长度

       一般说来数据库的表越小，那么它的查询速度就越快，因此为了提高表的效率，应该将表的字段设置的尽可能小，比如身份证号，可以设置为 char(18) 就不要设置为 varchar(18)。
         <---?? should we use varchar or char ??
         因为char无论存储数据长度本身长度多少，都会占用固定的长度，因此存储空间占用会有一定的浪费，而varchar由于是可变长度，这个问题就可以得到解决，但在性能上会受到一定的影响，对于长度基本变化不大，且要求查询速度的应用来讲，char会更加合适，而varchar更节约存储空间
         <--from: https://blog.csdn.net/belen_xue/article/details/52671363
         尽可能的使用 varchar 代替 char ，因为首先变长字段存储空间小，可以节省存储空间，
         <--from: https://zhuanlan.zhihu.com/p/102150451
###### 使用最简单数据类型

    能使用 int 类型就不要使用 varchar 类型，因为 int 类型比 varchar 类型的查询效率更高。

​    
    尽量使用数字型字段，若只含数值信息的字段尽量不要设计为字符型，这会降低查询和连接的性能，并会增加存储开销。
    这是因为引擎在处理查询和连接时会逐个比较字符串中每一个字符，而对于数字型而言只需要比较一次就够了。
                <--from: https://zhuanlan.zhihu.com/p/102150451

###### 尽量少定义 text 类型

       text 类型的查询效率很低，如果必须要使用 text 定义字段，可以把此字段分离成子表，需要查询此字段时使用联合查询，这样可以提高主表的查询效率。
###### PK need to be small

​      <--from my original reading mysql doc as pk will be duplicated in other index; 

###### 选择合适的存储引擎

       存储引擎类型：MyISAM、InnoDB、MEMORY、MERGE、TokuDB、CSV、Archive等。

       MyISAM：如果应用是以读操作和插入操作为主，只有很少的更新和删除操作，并且对事务的完整性、并发性要求不是很高，那么选择该存储引擎是非常合适的。MyISAM是在Web、数据仓库和其他应用环境下最常使用的存储引擎之一。

        InnoDB：用于事务处理应用程序，支持外键。如果应用程序对事务的完整性有比较高的要求，在并发条件下要求数据的一致性，数据操作除了插入和查询外，还包括很多的更新、删除操作，那么InnoDB存储引擎是比较合适的选择。InnoDB存储引擎除了有效地降低由于删除和更新导致地锁定，还可以确保事务地完整提交(Commit)和回滚(Rollback)，对于类似计费系统或者财务系统等对数据准确性要求较高地系统，InnoDB都是合适地选择。

       MEMORY：将所有数据保存在RAM中，在需要快速定位记录和其他类似数据的环境下，可提供极快的访问。MEMORY的缺陷是对表的大小有限制，太大的表无法缓存在内存中，其次是要确保表的数据可以恢复，数据库异常终止后表中的数据是可以恢复的。MEMORY表通常用于更新不太频繁的小表，用以快速访问结果。
              <---will it be persisted
    
       MERGE：用于将一系列等同地MyISAM表以逻辑方式组合在一起，并作为一个对象引用它们，MERGE表地优点在于可以突破对单个MyISAM表大小的限制，并且通过将不同的表分布在多个磁盘上，可以有效地改善MERGE表的访问效率，这对于诸如数据仓库等VLDB环境十分适合。属于第三方存储引擎 ，高写性能高压缩率，支持事务处理的MySQL和MariaDB的存储引擎，支持大多数在线DDL操作。
    
       TokuDB：使用Fractal树索引保证高效的插入性能;优秀的压缩特性，比InnoDB高近10倍;Hot Schema Changes特性支持在线创建索引和添加、删除属性列等DDL操作。使用Bulk Loader达到快速加载大量数据;提供了主从延迟消除技术;支持ACID和MVCC。
###### 适当分表、分库策略

       分表和分库方案也是我们经常说的垂直分隔（分表）和水平分隔（分库）。

       分表是指当一张表中的字段更多时，可以尝试将一张大表拆分为多张子表，把使用比较高频的主信息放入主表中，其他的放入子表，这样我们大部分查询只需要查询字段更少的主表就可以完成了，从而有效的提高了查询的效率。

       分库是指将一个数据库分为多个数据库。比如我们把一个数据库拆分为了多个数据库，一个主数据库用于写入和修改数据，其他的用于同步主数据并提供给客户端查询，这样就把一个库的读和写的压力，分摊给了多个库，从而提高了数据库整体的运行效率。

###### Additional: 

​      <--from my original paper; 

   BLOB etc on standalone server; 

   set Buffer Pool Size 

   redo log size ?

   table and db size ?

   batch in PK order, 

​    periodically archive and index maintenance  and table optimization 



  尽量避免大事务操作，提高系统并发能力。

  尽量避免向客户端返回大数据量，若数据量过大，应该考虑相应需求是否合理。

​          <---from: https://zhuanlan.zhihu.com/p/102150451

##### 方案三： 系统硬件优化

###### 磁盘

   尽量使用多个小磁盘而不是一个大磁盘，因为磁盘的转速是固定的，有多个小磁盘就相当于拥有多个并行运行的磁盘一样。

###### 网络

   条件允许的话也可以设置多个网卡
   DNS配置 尽量使用skip-name-resolve来减少因解析
   检查网络的ping 丢包率。
   通过优化/etc/sysctl.cnf 中的网络参数，提升性能

###### 内存

   MySQL 服务器的内存越大，提高了整个 MySQL 的运行效率。

##### 知识扩展

使用慢查询日志功能，查询出比较慢的 SQL 语句，然后再通过 explain 来查询 SQL 语句的执行计划
设置“slow_query_log=1”来开启慢查询，它的开启方式有两种
开启慢日志功能之后，会对 MySQL 的性能造成一定的影响，因此在生产环境中要慎用此功能。

#### execution plan

​         <---check 38000Qus034, Qus027  

​         <--Qus034 super good and there is a good example to do !!!

​         <---U007 list output format 

​         <--- https://juejin.im/post/6844904151646732295   <---gives detailed explanation of plan

#### number operations

#### datetime operations

string operations 

### 

## 50216 Authentication and authorization

### 50216 AA Doc

### 50216 AA Data

#### Questions:

1.What can we learn from w10029, the procedure of web authentication ?
2.Is http session only belong to ASP , JSP , are they the same ? Is each communication session id the same ?How session is implemented ?
3.What is the difference between server side session and client side session ?   
4.What is third party cookie ?
5.Relationship between cookies and session id ?
6.What is JWT ?
7.JWT vs session id authenticiation ? 
8.How JWT is created ? Especially in Spring ? 
9.Difference between server side and client side cookies ? 
10.How to secure Spring APIs with Auth0?
11.How to secure Spring Boot API and SPA with OAuth2.0 ?
12.What is gerneral Spring Boot authentication?
13.What is relationship between SAML and Auth0?
14.Difference between SAML2.0 and Oauth2.0? 
15.How about JWT timeout setting ?
16.Do we need to renew JWT each request ?
17.What is OAuth2.0?
18.What is RBAC?
19.What is 2FA?
20.What is SSO ?
21.What is the issue to use JWT as authentification method ?
22.What is difference between authentication and authorization ?
23.How to implement cookies authentication ?
24.How to do SPA authentication?
25.What is oauth2.0 SSO procedure ?
26.What is local redis SSO procedure ?
27.How to compare SAML vs. OAuth2 vs. OpenID Connect?

28.What is OpenId connect ?

### 50216 AA Collection

#### OAuth2.0

##### Oauth2.0 Doc

Oauth2.0 (https://tools.ietf.org/html/rfc6749#page-1)

​    <---some comments: 

```
The authorization code provides a few important security benefits,
   such as the ability to authenticate the client, as well as the
   transmission of the access token directly to the client without
   passing it through the resource owner's user-agent and potentially
   exposing it to others, including the resource owner.
      <---seems authorization code go through the browser, use authorization code
          to communicate with the client (whichi has client information),the it is
          client to have the access token !! 33808exp093/094
      <---in 33808exp084, the resource server seems the same as client, so we use
          only authorization code instead of access token which has more detailed info
```

   <---Qus017_(03)  very good article!! 

OAuth2.0 token introspection

​     https://tools.ietf.org/html/rfc7662

##### Oauth2 official site

https://oauth.net/2/

#### OpenID Connect

https://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation

## 51999 UML

### 51999 UML Doc

UML diagrams <--list diagrams  (https://www.uml-diagrams.org/class-reference.html)



#### 51999 UML Data

#### 51999 UML Collections

## 73002 Browsers

### 73002 Doc

### 73002 Data

#### Can I Use

​    <--check browser compatibility  https://caniuse.com/

### 73002 Collection

## 73010 Chrome

### 73010 Chrome Doc

### 73010 Chrome Data

### 73010 Chrome Collections

#### Debug tool F12

##### Cookies

​     <--  In cookies  we can see : XSRF TOKEN   201101 33808exp084 S001 



## 73030 JavaScript 

   <---just pickup stuff from application view, so pickup "start API" one by one because  system view of js is a mess
   <---here just list overview stuff

### 73030 JavaScript  API

JavaScript ~~ API overview (https://developer.mozilla.org/en-US/docs/Web/JavaScript)
​    

### 73030 JavaScript Data

#### Tools

JavaScript Tools JSFiddle (https://jsfiddle.net/)

#### Keyword to Exp 

Ajax  33808exp084

jQuery 33808exp084

#### Exp to keyword

### 73030 JavaScript Collection

#### Core JavaScript

##### Global Objects

​      <-- (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects)

​          https://developer.mozilla.org/en-US/docs/Web/API

###### Array 

Length attribute

​     (https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/length)

​      <---it is not a function



reduce function 

​    (https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)



  slice function 

​    (https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/splice)

###### JSON 

   (https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON)

parse 

​     <---https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse

​      <--33808exp112 :

```
stompClient.subscribe('/topic/greetings', function (greeting) {
    showGreeting(JSON.parse(greeting.body).content);    <---greeting is whole json message
});
```

stringify 

​    (https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)

```
JSON.stringify({'name': $("#name").val()})
           <---from 33808exp112
```

###### Promise

   https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise



#### Web API

JavaScript Web API (https://developer.mozilla.org/zh-CN/docs/Web/API)

```
               <--it has specificationa and interfaces 

```

JavaScript Web API Body mixin (https://developer.mozilla.org/en-US/docs/Web/API/Body)

```
                       <---

```

JavaScript Web API Body json() method (https://developer.mozilla.org/en-US/docs/Web/API/Body/json)

```
                       <--will convert response stream to Promise (I guess Promise will absorb commnunication waiting time) 
```

JavaScript Web API Fetch (https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch)

JavaScript Web API Storage (https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Storage_API)

JavaScript Web API Storage ~ API (https://developer.mozilla.org/zh-CN/docs/Web/API/Storage)

```
                       <--it has the methods 

```

JavaScript Web API Storage Windows.LocalStorage (https://developer.mozilla.org/zh-CN/docs/Web/API/Window/localStorage)

```
                       <--gives example of removeItem etc. 

```

JavaScript Web API WebSocket (https://developer.mozilla.org/zh-CN/docs/Web/API/WebSockets_API)

```
                       <--good to explain 33808Exp111 API stuff                            

```

JavaScript Web API XMLHttpRequest (https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/onreadystatechange)

```
                        <--see also 73022Exp001

```



##### DOM

​     https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model

###### Document

​     https://developer.mozilla.org/en-US/docs/Web/API/Document

```
function log(message) {   
  var console = document.getElementById('logging');   
  var p = document.createElement('p');     <---check above document API
  p.appendChild(document.createTextNode(message));     <---check above document API
  console.appendChild(p);
  }
    <--from  33808exp111
```



###### Element 

​     https://developer.mozilla.org/en-US/docs/Web/API/Element

##### WebSocket 

​     https://developer.mozilla.org/en-US/docs/Web/API/Websockets_API

###### WebSocket interface

​     https://developer.mozilla.org/en-US/docs/Web/API/WebSocket

```
var ws = null;
var url = "ws://localhost:8080/echo";

function connect() 
{
   ws = new WebSocket(url);   <---use constructor 
   ws.onopen = function() {     <--set a bunch of callback
      setConnected(true);
      log('Info: Connection Established.');
   };
   
   ws.onmessage = function(event) {
      log(event.data);
   };
   
   ws.onclose = function(event) {
      setConnected(false);
      log('Info: Closing Connection.');
   };
}
   <---from 33808exp111 
   <---same example see: send, close etc. 
```

​     

#### Third party Lib

##### Client Side Framework ( like react.js etc)

JavaScript Lib Client side framework (https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks)

##### Rest.js 

​          <---from 33808Exp180

​         refer to: https://github.com/cujojs/rest

###### client

​         <--  https://github.com/cujojs/rest/blob/master/docs/clients.md

##### Socket JS

###### Socket JS Doc 

JavaScript Lib SocketJS Home~ (https://github.com/sockjs)
JavaScript Lib SocketJS client (https://github.com/sockjs/sockjs-client)

    <---SockJS is a browser JavaScript library that provides a WebSocket-like object. 

###### Socket JS Data

###### Socket JS Collection

​     <---check  33808exp112 

##### Stomp JS

JavaScript lib stomp.js API (https://stomp-js.github.io/stomp-websocket/codo/alphabetical_index.html)







## 73036 NodeJS

NodeJS Lib RxJS (https://rxjs-dev.firebaseapp.com/guide/overview)

NodeJS Lib RxJS  (https://rxjs-dev.firebaseapp.com/api/index/class/BehaviorSubject)

## 73055 JQuery

### 73055 JQuery Doc

JQuery official doc (https://api.jquery.com/)

### 73055 JQuery Data

### 73055 JQuery Collection





## 73058 WebJars

### 73058 WebJars Doc

WebJars reference doc (on the very right side, list the files) (https://www.webjars.org/)

​            <--can also so search 

### 73058 WebJars Data

#### Keyword to Exp

webjar 33808exp084

#### exp to keyword

### 73058 WebJars Collection

## 73066 ReactJS

### 73066 ReactJS Doc

### 73066 ReactJS Data

### 73066 ReactJS Collection

#### Handling User Input

```
class CreateDialog extends React.Component {

    constructor(props) {

.....

    }

    handleSubmit(e) {

....

        this.props.attributes.forEach(attribute => {

            newEmployee[attribute] = ReactDOM.findDOMNode(this.refs[attribute]).value.trim();
                       <-----advanced ref usage: 
                            refer to: https://segmentfault.com/a/1190000008665915    
        });
        this.props.onCreate(newEmployee);  <--call the method 
                <---from 33808exp180 part 2 -hypermedia App.js 
```



#### Parent/Child method call 

```
 ==== Part A in child: ==========
 class CreateDialog extends React.Component {
          <---this is the popup to handle new employ creation 
              it has a property called onCreate
....

    handleSubmit(e) {

.....

        this.props.attributes.forEach(attribute => {

            newEmployee[attribute] = ReactDOM.findDOMNode(this.refs[attribute]).value.trim();

        });

        this.props.onCreate(newEmployee);   
                        <--- we call this property 

      ....

    }   
==== Part B in parent render() method ===
	render() {
		return (
			<div>
				<CreateDialog attributes={this.state.attributes} onCreate={this.onCreate}/>
				                <----this.onCreate is parent(App.js) method 
				                      onCreate is child "CreateDialog" component's prop!!!
				<EmployeeList employees={this.state.employees}
.....
			</div>
		)
	}
                 <---from 33808exp180 part 2 -hypermedia App.js 

```



## 73080  http protocol

### 73080 http protocol Doc

RFC 7231 (new http) (https://tools.ietf.org/html/rfc7231)

RFC 2626  (old http) (https://tools.ietf.org/html/rfc2616)

RFC 2626 (old http, better display) (https://www.w3.org/Protocols/rfc2616/rfc2616.html)
               <--clearly state request header, response header, entity header etc. 
RFC 6265 (state management and cookies) (https://tools.ietf.org/html/rfc6265)

### 73080 http protocol Data

#### Questions

1. Does http protocol have timeout setting ? How is it set?
2. What is relationship between http and tcp protocol ?
3. What is the structure of http message ?
4. Will TCP has a heartbeat message ? 
5. What is http/2 ?
6. What is difference between http trunked response and multipart file upload ?
7. What will happen if we change content type to stream ?
8. What is http cache ?
9. Is http text based ?

### 73080 http protocol Collections

#### MIME types

​       https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types

​                 <--list all media types

##### application/json

​        <---33808exp134,  this is  typical rest controller, spring seems wrapped media type with a class

application/schema+json

```
$ curl http://localhost:8080/api/profile/employees -H "Accept:application/schema+json"
{
  "title" : "Employee",   <---this is entity title
  "properties" : {               <---this is entity properties 
    "firstName" : {
      "title" : "First name",        <---each property definition
      "readOnly" : false,
      "type" : "string"                 
    },
    "lastName" : {
      "title" : "Last name",
      "readOnly" : false,
      "type" : "string"
    },
    "description" : {
      "title" : "Description",
      "readOnly" : false,
      "type" : "string"
    }
  },
  "definitions" : { },              <---I guess this is entity definition 
  "type" : "object",
  "$schema" : "https://json-schema.org/draft-04/schema#"
}                             <---I guess this is the schema data 
```

​         <---33808exp180 part2 hypermediatype 

​         <---original article: https://spring.io/guides/tutorials/react-and-spring-data-rest/ 

##### application/pdf

​          <---from 33808exp071

##### application/vnd.ms-excel   

​         <---from 33808exp071 AbstractXlsView

##### text/csv

​       <---33808exp071   csv content type is: text/csv

##### text/html  

​            <---33808exp082 AbstractMessageConverterMethodProcessor line 267 selected media type

​             <---33808exp071 AbstractView Default content type is: text/html;charset=ISO-8859-1

​                         



#### http protocol headers 

##### entity header

http protocol headers entity header content-type (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Type)
http protocol headers entity header content-type  media types (https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types)
                   <---media type should be the actual value of content-type which is a header
                   <---application/JSON是一种通用的MIME类型，具有实用、精简、易读的特点 
                   <---33808exp144 use github special mime type
http protocol headers entity header content-type  media types from Spring MimeMapping
                                                   <---33808Exp069 MimeMappings there is static block
http protocol headers entity header content-type  media types for post (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/POST)
                                                   <---could be: application/x-www-form-urlencoded (see 33808exp144 BodyInserters line501)
                                                                 multipart/form-data
                                                                 text/plain
                                                  <---Media type collections:
                                                     application/hal+json   <---this is Spring Data REST's default media type , from 33808exp180 (https://spring.io/guides/tutorials/react-and-spring-data-rest/)
##### general header

http protocol headers general header

​    (https://developer.mozilla.org/zh-CN/docs/Glossary/%E9%80%9A%E7%94%A8%E9%A6%96%E9%83%A8)

​       <--could be used both request and response

###### cache-control 

```
  example: setHeader("Cache-Control", "s-maxage=" + cacheSeconds);
```

​          <--from  (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control)

​       (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching_FAQ)

​            <--- cache FAQ more advanced things here

```
  HTTP/1.1 200 OK
  Content-Type: application/json
  Cache-Control: no-store    <---do not store in any cache for OpenId response
  Pragma: no-cache

  {
   "access_token": "SlAV32hkKG",
   "token_type": "Bearer",
   "refresh_token": "8xLOxBtZp8",
   "expires_in": 3600,
   "id_token": "eyJhbGc..."
}
```

​         <---from: https://www.jianshu.com/p/be7cc032a4e9

###### pragma 

​               (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Pragma)

​                <---spring source code: 33808exp069, WebContentGenerator.java line 422 
​                 <---seems old version of cache control 



##### request header

###### accept

​       (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Accept)

​         <--- Accept 请求头用来告知（服务器）客户端可以处理的内容类型，这种内容类型用MIME类型来表示。
​         <--- 33808exp069 200908S012 : accept a bunch of media types

###### accept-language

​       (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Accept-Language)

​         <---33808exp069 AcceptHeaderLocaleResolver.java line 98

###### authorization

​       (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Authorization)

​         <---33808exp094 has basic authroization and how to encode user name and password
​         <---33808exp094 also use bear token !!

​         <---33808exp136  AuthFilter use bear token as well 

​         <---related authorization framework 

​              (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Authentication)

###### cookie

​    https://www.geeksforgeeks.org/http-headers-cookie/#:~:text=A%20cookie%20is%20an%20HTTP,It%20is%20an%20optional%20header.&text=It%20is,and%20space%20i.e%20'%3B'.

		HttpHeaders headers = new HttpHeaders();
		headers.set("Cookie", cookie);
		RequestEntity<Object> request = new RequestEntity<>(headers, HttpMethod.GET, uri);
		return restTemplate.exchange(request, String.class);
​            <--33808exp006

```
POST /transfer HTTP/1.1
Host: xxx.bank.com
Cookie: JSESSIONID=randomid; Domain=xxx.bank.com; Secure; HttpOnly
Content-Type: application/x-www-form-urlencoded

amount=100.00&routingNumber=1234&account=8888
```

​            <--from : https://www.cnblogs.com/volcano-liu/p/11301057.html  

​                    trying to explain csrf stuff 

###### If-Match

​    <---see also: -in this MD  http status 412 has the code , 33808exp180,  201023S015,S016 etc.

​    <-- see also ETag in response header 

​       https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Match

​         For GET and HEAD methods, the server will send back the requested resource only if it matches one of  

​          the listed ETags. For PUT and other non-safe methods, it will only upload the resource in this case.

​                <---also mentioned strong and weak comparison 

​               <---in 33808exp180 part5, curl test, we can get Etag back, I guess that is version match !! 

​         

###### origin

```
RequestEntity.get(uri("/greeting")).header(HttpHeaders.ORIGIN, "http://localhost:9000").build()
```

​           <--- 33808exp179_(01) S001,  



###### user-agent

​            (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/User-Agent)

​          <---33808exp144 use own user agent definition

##### response header

###### Accept-Ranges 

​              <---33808exp082 AbstractMessageConverterMethodProcessor line 205

​                    the range is : bytes in this example

​             <--- in presence of an `Accept-Ranges` header, the browser may try to *resume* an interrupted 

​                  download, rather than to start it from the start again. from

​                   https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Ranges

​                        

###### Access-Control-Allow-Origin

```
assertEquals("http://localhost:9000", entity.getHeaders().getAccessControlAllowOrigin());
```

​         <---request is from localhost:9000, spring boot(on 8080) allow this 9000 server got stuff and display

​               how about the request pretend to be a general browser ??

​          <---gives a clear answer :  ACTUALLY THE BROWSER NEED "SAME ORIGIN" 

​                     <--my understanding : the code form server A can not access server B unless server B let it !!

​                     https://juejin.im/post/6844903859068862472

​                <--mentioned JSONP, see:  73030Qus041

​         <---33808Exp179_(01) S002

###### Content-Disposition

​         (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition)

​                    <--33808exp082
​                     <--also mentioned: General header (for a subpart of a multipart body)   
​                     <--response.addHeader("Content-Disposition", "attachment; filename="+fileName);  

​                         33808exp051

​                 <--  response.setHeader("Content-Disposition",      "attachment; filename=\"employees.csv\""); 

​                            from 33808exp071 csv view implementation                

###### ETag

​          <--see also If-Match 

​           <--see also 412 response status 

​           https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/ETag

​          <---seems used for both cache and version  control 

​          <---33808exp180__(01)_1_a



###### Expires 

​                (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Expires)

​               <---spring source code: 33808exp069, WebContentGenerator.java line 422 
​               <---如果在Cache-Control响应头设置了 "max-age" 或者 "s-max-age" 指令，那么 Expires 头会被忽略。

###### set-cookie

		String sessionId1 = firstResponse.getBody();
		String cookie = firstResponse.getHeaders().getFirst("Set-Cookie");
		String sessionId2 = nextRequest(restTemplate, uri, cookie).getBody();
​             https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie

​             <---                               33808exp006

###### WWW-Authenticate

```
WWW-Authenticate: <type> realm=<realm>[, charset="UTF-8"]
          <---this is syntax
WWW-Authenticate: Basic realm="Access to the staging site", charset="UTF-8"
          <---this is example from MDN
          <---see also screen shot 20110933808exp188S009, S010
response.addHeader("WWW-Authenticate", "Basic realm=\"" + realmName + "\"");
response.sendError(HttpStatus.UNAUTHORIZED.value(), HttpStatus.UNAUTHORIZED.getReasonPhrase());          <----from: BasicAuthenticationEntryPoint.java  33808exp185 
           
```

The HTTP WWW-Authenticate response header defines the authentication method that should be used to gain access to a resource.
The WWW-Authenticate header is sent along with a 401 Unauthorized response.

​      <---from https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/WWW-Authenticate 

​       <---I guess the realm part tell you what to do 

​        <---201109: see : https://en.wikipedia.org/wiki/Basic_access_authentication#:~:text=In%20basic%20HTTP%20authentication%2C%20a,obsoletes%20RFC%202617%20from%201999.

#### http protocol status code 

IETF status code (https://tools.ietf.org/html/rfc2616#page-57)

MDN Chinese (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status)

JavaEE Implementation 

​               <---   javax.servlet.http.HttpServletResponse  33808exp136
Spring Implementation 

​                 <--- HttpStatus.java class(enum)  in 33808Exp083
w3.org (https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)



##### 412

​     [`412 Precondition Failed`](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status/412)

服务器在验证在请求的头字段中给出先决条件时，没能满足其中的一个或多个。这个状态码允许客户端在获取资源时在请求的元信息（请求头字段数据）中设置先决条件，以此避免该请求方法被应用到其希望的内容以外的资源上。

```
onUpdate(employee, updatedEmployee) {
		client({
			method: 'PUT',
			path: employee.entity._links.self.href,
			entity: updatedEmployee,
			headers: {
				'Content-Type': 'application/json',
				'If-Match': employee.headers.Etag     <---request has if match
			}
		}).
done(response => {

            this.loadFromServer(this.state.pageSize);

        }, response => {

            if (response.status.code === 412) {    <---check status code 

                alert('DENIED: Unable to update ' +

                    employee.entity._links.self.href + '. Your copy is stale.');

            }

​        });
```

​      <--- 33808exp180 part3 conditional 



## 73083 Curl 

### 73083 Curl Doc

### 73083 Curl Data

### 73083 Curl Collections

#### -v option





curl -H "Authorization: Bearer xxxxx" localhost:8080

      <--a bit header
curl -H "Authorization: Bearer $TOKEN" -d "my message" localhost:8080/message
      <--this is post request  
      <--not sure what this request is


curl -v localhost:8080/employees/99  <--need try 
      <--  -v should show the debug information like:   

~Common Options
    refer to: (https://gist.github.com/subfuzion/08c5d85437d5d4f00e58) 

   (1) escape white space in url
     refer to: (https://superuser.com/questions/1407967/how-to-curl-a-url-with-space-in-windows)
   (2) escape while space in  windows: ****
     curl --header "Content-Type: application/json"   --request POST   -d @data.json http://localhost:8080/posts
           <---must have: data.json in the folder, its content: {"content":"new content", "title":"nnn title"}
              refer to: (https://stackoverflow.com/questions/4514199/how-to-send-double-quote-in-d-parameter-for-curl-exe)

GET 
   curl --dump-header - --header 'Host: www.hystrix.com' http://localhost:8080/delay/3
             <--- using --dump-header to see the response headers, the - after --dump-header is telling cURL to print the headers to stdout.
                 see  (https://spring.io/guides/gs/gateway/)
             <---this was not working in windows 33808exp162
  curl --dump-header - --header "Host: www.hystrix.com" http://localhost:8080/delay/3             
             <----in window might need to use double quotes   33808exp162_(01)
DELETE 
    curl -X DELETE http://localhost:8080/user/100
    curl -X DELETE http:/localhost:8080/posts/1/comments/1
             <---DELETE must be upper case!! 
    curl --request DELETE http://localhost:8080/posts/14
         <--seems --request and -X is the same
    curl -X DELETE localhost:8080/employees/1         

POST       
   (1) curl --header "Content-Type: application/json"   --request POST   --data "{"""firstName""":"""Billy""","""lastName""":"""li""","""emailId""":"""billydev@gmail.com"""}""" http://localhost:8080/api/v1/users
               <---worked in windows
       curl -X POST localhost:8080/api/employees -d "{\"firstName\": \"Bilbo\", \"lastName\": \"Baggins\", \"description\": \"burglar\"}" -H "Content-Type:application/json"
               <---worked for windows , 33808Exp180 <---seems use different escape     
   (2) curl --header "Content-Type: application/json" \
              --request POST \
              --data '{"username":"xyz","password":"xyz"}' \
              http://localhost:3000/api/login
                <--- refer to: (https://stackoverflow.com/questions/7172784/how-do-i-post-json-data-with-curl)
   (3) In windows, above single quote has issue: 
       Example: "{ """name""":"""Frodo""", """age""":123 }"  <--for inner quote use """ to escape
            refer to: (https://stackoverflow.com/questions/31503754/errormessagesunexpected-character-code-39-expected-a-valid-value)
    
       Other succeed examples: 
           curl --header "content-type:application/json"  -X POST -d "{"""name""":"""test3""","""role""":"""test3"""}" localhost:8080/employees
           curl -H "content-type:application/json"  -X POST -d "{"""name""":"""test4""","""role""":"""test4"""}" localhost:8080/employees
                <---seems -H is the same as --header
           curl --header "content-type:application/json"   --request POST -d "{"""name""":"""test6""", """role""":"""test6"""}" localhost:8080/employees            
       see also:  200716_33808Exp110_S004 etc.    
PUT
   curl --header "Content-Type: application/json"   --request PUT -d @data.json http://localhost:8080/posts/29
            <---seems  put the json in data file is important

   Other successful examples: 
   curl -H "content-type:application/json"  -X PUT  -d "{"""name""":"""test5""","""role""":"""test5"""}"  localhost:8080/employees/1

## 73086 Stomp

### 73086 Stomp Doc

Official site https://stomp.github.io/ 

JSR 356 https://jcp.org/en/jsr/detail?id=356

## 73090 Web Link 

### 73090 Web Doc 

Web Link (https://www.iana.org/assignments/link-relations/link-relations.xhtml)
                        <----33808Exp180_(01)_1_a IANA stuff

### 73090 Web Link Collections 

profile      <---from 33808Exp180 article, and profile in rest response, it is IANA based                         
self         <---from 33808Exp180
stylesheet   <---knew this for long time                                                                                                