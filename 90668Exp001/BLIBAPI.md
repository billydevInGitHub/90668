

# BLIB Index 2020

# _Meta

  ^^^  <--means good points !!

[***] <--fancy advanced usage 

[~~~] <---most frequently used

## _Markdown format 

Markdown format (https://guides.github.com/features/mastering-markdown/)

## _Important Folders

### BLIB diagram 

D:\Backup\PM1000\Billydev080107\MyBLIBBPOTDiagram\191114-1-BLIB

## _TODO(overall)



make MD color full

https://stackoverflow.com/questions/35465557/how-to-apply-color-in-markdown#:~:text=While%20Markdown%20doesn't%20support,remove%20the%20formatting%2C%20or%20not.&text=To%20keep%20the%20whitespace%20between,need%20to%20include%20the%20tilde%20~%20.





210329: kotlin and java comparison and python position etc. ;  



210402: book152 has many spring customization methods, we can look into !!!!!!!!!!!! including pd152 

210517:  put all old code into new BLIB :

​          new location: D:\Backup\PM1000\Billydev080107\MyBLIBBPOTCode

​          old locations: 

​               D:\BackupManual\210429-1-BackupOfGDriveWS7\wsCW7\BJEC\src  <---still many stuff need to move from BJEC 

​               D:\Backup\PM1000\Billydev080107\GitRepositories\00000_BJEC\BJEC\src              <----this is BJECT repository

​                                                                      <---above for BJECt 

​               D:\BackupManual\210429-1-BackupOfGDriveWS7\wsCW7  <-----

​                                     D:\Backup\PM1000\Billydev080107\wsCW7\73066_ReactJS\WebContent  <--react js,  jqeruy, html, etc. 

​                                      css, 

​                                 D:\Backup\PM1000\Billydev080107\TempDev\190622-1-Codebackup\50216Exp008

​                                   D:\Backup\PM1000\Billydev080107\TempDev\190410-3-73066Exp016BackupOrig

​                                 D:\Backup\PM1000\Billydev080107\TempDev\190429-1-73066Exp036_ForBPOT2117

​                                D:\Backup\PM1000\Billydev080107\TempDev\190429-2-73066Exp037_MenuBarWithRouter

​                              D:\Backup\PM1000\Billydev080107\TempDev\190506-1-Exp039OwnStuffToGitHubPages

​                                    D:\Backup\PM1000\Billydev080107\TempDev\190505-1-Exp038BuildTest

​                                   D:\Backup\PM1000\Billydev080107\TempDev\190525-1-73066Exp042_ReactBootStrap

​                                   D:\Backup\PM1000\Billydev080107\TempDev\190528-3-73066Exp043_ReactStrap

​              D:\Backup\PM1000\Billydev080107\wsCW7   <---different from above 





​         old location in tempdev: 

​              D:\Backup\PM1000\Billydev080107\TempDev\191007-1-33808Exp033_SpringCloudExample     

​              D:\Backup\PM1000\Billydev080107\TempDev\190930-1-33808Exp030_SpringCloudApp <---31,29 around 

​             D:\Backup\PM1000\Billydev080107\TempDev\190830-1-33808Exp020SpringIoCBasic <---20,16,17,19,

​                          D:\Backup\PM1000\Billydev080107\TempDev\190804-1-33808Exp016SpringHibernate

​              D:\Backup\PM1000\Billydev080107\GitHubReps  <---33808 -36,37,38,39 

​              D:\Backup\PM1000\Billydev080107\GitHubBlibRep <---33808exp024 

​            D:\Backup\PM1000\Billydev080107\spring02\spring-framework              25,26,27





​         other lcoations: 

​      D:\Backup\PM1000\Billydev080107\MyGit2017\BPOT_Git

​       D:\Backup\PM1000\Billydev080107\GitRepositories        <--lots of bpot stuff

## __Big and Practice Projects

​     <---some project need big env, we can share them , 



11021exp020  <---this one could be the base of other experiments 

30012expXXX <---under billydev there is testCode package                            JAVA QUICK  TEST 

33808exp222 <---k8s , jenkins deployment, docker, load balance etc. together (need diagram)

36000exp024  <--this is IDEA project and oracle db connection set up here, other exp can use this 

​     36000exp022 data setup

​     36000exp029 big data setup; 

73030exp035   <--javascript quick syntax test (including html with js)           JAVA SCRIPT\

73030exp050  <--it has html table, javascript using chrome F12 to interact with dom element , check MDN API 

70366exp049 <-- for reactJs small function check                                             REACTJS

90668Uxxx   <--my API decrease effort


210328:  spring boot starter configuration properties not working, then think it should be within main application !! 

210329:  d3 rendering not working well, not focus on the ref stuff but the D3 code, borrow code from another example; 

210331:  11081exp003 deploy helm stuff exit root user !! go to youtube check redis has same issue etc. 

# BLIB numbers  



# API decrease resources

Important resource will be *emphasized* or _another way_.
Also we can use **bold** or __another way__. 

# BPOT

## bpot2123

```
rabbit MQ Used 

<--Book146 PD472, use  redis to remove duplicates
```







# BLIB Details

# 10070 Source Code

D:\BackupManual\210429-1-BackupOfGDriveWS7\wsCW7\10070_AllSourceCode\Exp001_TEM_SourceCode

D:\Backup\PM1000\Billydev080107\TempDev\200605-1-EnrichSomeCode

D:\Backup\PM1000\Billydev080107\TempDev\210710-1-10070exp001_jenkinsSourceCode

## Exp

### 10070exp001 just download source code

# 10090 Cloud Service

## Questions

1.How to compare cloudFlare with other platform ?

2.How about GCP free tier ?

# 10092 AWS

## Questions

1.What kind of services AWS can provide for us ?
2.How can we deploy like MySQL server with Spring Boot to cloud? Docker or other ?
3.How about static web page hosting?
4.What does the free service include ?
5.How to create a new web appl and how to  access the web application deployed ?
6.How to launch EC2 ? 
7.How to launch docker compose in EC2?
8.How to open https and http ports on EC2 ?
9.How 750hours per month calculated ,is it related to the 3instnces is there a report ?
10.How to remove the other 2 instances?
11.Difference between stop or terminate ?
12.Why EC2 auto start after termination?
13.How to derminate the elastic ip address not attached to running instance?
14.How to solve diskspace issue ?

15.How to make tomcat docker?
16.How to terminate service?

17.What are other services like ECS, EKS and ECR, lambda , S3 ?

# 10200 Windows

## Note: 

### Windows Important folders:

weChat backup folder: C:\Users\Billy\Documents\WeChat Files\wxid_vue5o6gxnrbf12\BackupFiles\



C:\Users\Billy\Pictures
        <--scanned doc

### Startup

```
Startup: C:\Users\Billy\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup 
        <----can use windows Key+R to run dialog box , then type in: shell:startup
```



## Questions: 

1.How to setup windows tcp parameters ?

2.What is windows save point and how to do the windows save point ?

## exp

## Okey CMD command 

    telnet
    <---type in search box telnet, then "turn windows feature on and off, then click telent --install 
export 

```
doskey/History
              <---will all dos cmd history
....

git checkout branch1
git log
git branch
git reset --hard 8f4b

....
```

​             from: https://www.itechtics.com/view-command-prompt-history-windows/#:~:text=Open%20CMD%20from%20the%20Start,within%20the%20window%20of%20CMD.

# 10300 Virtual Box

## Note

### Important info after statup

Linux open terminal   ctrl+Alt+T 

On CenterOS use "right ctlr key" to escape

### Log folder

C:\Users\Billy\VirtualBox VMs\UbuntuDCreateNew\Logs   <--not much information

## Questions

1.How to increase diskspace after ubuntu vm installed ?
2.How to setup Ubuntu virtual box ?
3.How to clone a virtual machine ?
4.How to setup bridge network ?
5.Is VirtualBox Nat different from VMWare NAT？

6.How to trace network in virtual box ?

7.How to setup NAT network ?

## Exp

### 10300exp001 vm inaccessible , fixed after rename 

### 10300exp002  vm location and file backup



### 10300Exp XXX:  <--tobe added 

Network trace <---this one need be packed in Exp then could be refered by MD feature

```
VBoxManage modifyvm "UbuntuDCreateNew" --nictrace1 on --nictracefile1 D:\Temp\202101\netlog.pcap
         <--running in: C:\BillyInstalledApplications\180519-1-VBox5212\
         
         
VirtualBox -startvm "UbuntuDCreateNew"
          <--UbuntuDCreateNew is the vm name
          <--210114  33808exp187 for we can trace network traffic with wireshark 
```



# 10502 Nginx 

## Note

### Configurations

/etc/nginx/nginx.conf

  <--can use  include to include other configurations 

### Log

#### Log for windows

C:\Billydld080107\191008-1-Nginx1161\nginx-1.16.1\nginx-1.16.1\logs

#### Log for Linux

/var/log/nginx/

#### windows start and stop

```
C:\Billydld080107\191008-1-Nginx1161\nginx-1.16.1\nginx-1.16.1>nginx.exe
```



```
C:\Billydld080107\191008-1-Nginx1161\nginx-1.16.1\nginx-1.16.1>nginx.exe -s quit
```

​          <---33808exp218   https://stackoverflow.com/questions/59613201/how-to-stop-nginx-for-windows#:~:text=2%20Answers&text=Use%20%40taskkill%20%2Ff%20%2Fim,nginx.exe%20for%20this%20task. 



#### Linux start and stop

```
systemctl restart nginx
     <--configuration in: root@billy-VirtualBox:/etc/nginx#nginx.conf which pointing to conreate conf files
     <---from 33808exp211
     <---Dt:\Backup\PM1000\Billydev080107\MyEnabil\170424-1-AllScreenCopiesBPOT\210104-1-33808exp211\S011
```

```
systemctl start nginx
systemctl stop nginx
      <--33808exp211 for load balance    
```



## Questions

1.How to make nginx docker and commposer 
2.How to setup Nginx as reverse proxy?
3.What is the difference between nginx and nginx plus ?

4.How to implement nginx L4 load balancing ?

5.How to setup Nginx as load balancer ?

#### 




# 10600  Tomcat 

Tomcat 9 API (http://tomcat.apache.org/tomcat-9.0-doc/api/index.html?org/apache/catalina/startup/Tomcat.html)

Tomcat 8 API (https://tomcat.apache.org/tomcat-8.0-doc/api/index.html?org/apache/catalina/startup/Tomcat.html)

Tomcat 7 API (https://tomcat.apache.org/tomcat-7.0-doc/api/index.html)

# 10700 Netty

10700 Netty API~ 4.1 (https://netty.io/4.1/api/index.html)
10700 Netty API~ 4.0 (https://netty.io/4.0/api/index.html?io/netty/channel/ChannelPipeline.html)

# 10800 Linux  <--need absorb 35000 stuff and also put feature view into feature center

# <---also lots of stand alone keys like network setting , like password less setup etc.  wrap into Exp and could be referenced !!!!

## Note

### Start Linux terminal in virtual box

Linux open terminal   ctrl+Alt+T 

### Important folders

/etc/hosts <--this file for Ubuntu like windows hosts file 

### Common Folders             

```
/      – The Root Directory
/bin  – Essential User Binaries          ,  二进制可执行命令
/boot – Static Boot Files
/cdrom – The Root Directory
/dev – Device Files                 ,
                  终端/dev/tty  设备特殊文件  
                  黑洞文件/dev/null
/etc – Configuration Files , 系统管理和配置文件  
      /etc/rc.d                                         ,启动的配置文件和脚本
/home – Home Folders, 用户主目录的基点，比如用户user的主目录就是/home/user，可以用~user表示
/lib – Essential Shared Libraries,      标准程序设计库，又叫动态链接共享库，作用类似windows里的.dll文件 
/lost+found – Recovered Files,      
           这个目录平时是空的，系统非正常关机而留下“无家可归”的文件（windows下叫什么.chk）就在这里 
/media – Removable Media
/mnt – Temporary Mount Points,   系统提供这个目录是让用户临时挂载其他的文件系统。
/opt – Optional Packages
/proc – Kernel & Process Files,    虚拟的目录，是系统内存的映射。可直接访问这个目录来获取系统信息
/root – Root Home Directory             , 系统管理员的主目录（呵呵，特权阶级） 
/run – Application State Files
/sbin – System Administration Binaries,    系统管理命令，这里存放的是系统管理员使用的管理程序
          <--------compare with bin ? 

/selinux – SELinux Virtual File System
/srv – Service Data
/sys  <---added myself, seems: lssubsys -m has cgroup stuff here
/tmp – Temporary Files                                 , 公用的临时文件存储点 
/usr – User Binaries & Read-Only Data,     最庞大的目录，要用到的应用程序和文件几乎都在这个目录。
/usr/x11r6 存放x window的目录                 <---180601: I guess /usr/opt might be some user optional application ??
/usr/bin 众多的应用程序 
/usr/sbin 超级用户的一些管理程序 
/usr/doc linux文档 
/usr/include linux下开发和编译应用程序所需要的头文件 
/usr/lib 常用的动态链接库和软件包的配置文件 
/usr/man 帮助文档 
/usr/src 源代码，linux内核的源代码就放在/usr/src/linux里 
/usr/local/bin 本地增加的命令 <--like 11081exp001 minikube install minikube here
/usr/local/lib 本地增加的库
/var – Variable Data Files,                       某些大文件的溢出区，比方说各种服务的日志文件
            <---See also Qus14
            <---/var/run/docker.sock
```

refer to: https://www.howtogeek.com/117435/htg-explains-the-linux-directory-structure-explained/

refer to: https://www.howtogeek.com/117435/htg-explains-the-linux-directory-structure-explained/

 also refer to:   refer to:  http://www.cnblogs.com/amboyna/archive/2008/02/16/1070474.html

​                          <-------------add to above after ","  also there more to be read !!

https://askubuntu.com/questions/308045/differences-between-bin-sbin-usr-bin-usr-sbin-usr-local-bin-usr-local

```
          <--------talked about difference between bin and sbin etc. 
```

### Quick Note

  2 types of linux: 



## Questions

1.What are the two ways to install the software on ubuntu ? 
2.What is apt-key ?
3.What is difference between apt-key and apt-get ?
4.What is asc file?
5.How to install or upgrade java version?
6.How to enable ssh service ? 
7.Do we have examples of Linux installation?
8.How to install git on Linux?
9.What is difference between apt and apt-get?
10.How to install docker on linux?
11.How to install docker-compose on linux?
12.How to install curl on linux ?
13.How to determine what kind of linux storage type?
14.What is linux disk type ?what does sda mean ?
15.What does ext4 mean ?
16.How to setup gcc in linux?
17.How to install open jdk 8 on linux ?
18.How to install vim ?
19.How to enable ssh on CentOS?
20.How to install netstats on CentOS?
21.What is snap vs apt ?
22.How to setup root pwd and su root? 
23.Why we need GPG certificate ?
24.What is supervisord ?
25.How do we know which software installed on the system?
26.How to remove the installed software ?
27.What is package management system ?
28.How to install redis docker version ?
29.What is system profile and user profile ?
30.How to setup static ip address in linux ?
31.How to do the ssh login with public key pair ?

32.What is the different between kernel and user space ?

33.What is IPVS or LVS ?

34.What are iptable and netfilter?

35.What are common Linux alias ?

36.How to setup Linux workstation user interfaces ? 



## Exp

### 10800exp001 windows passwordless login

### 10800exp002 number and string compare and logical operations

### 10800exp003 calculation 

### 10800exp004 simple loop batch processing with script

### 10800exp005 about dollar sign

### 10800exp006 String processing 

​             <---oc grep, sed sort unique , awk  etc

### 10800exp007 Program Structure

​         <--include, spawn , input parameters 

### 10800exp008 find files and directory operations

​               <---including touch files to change date

### 10800exp009 list files

### 10800exp010 file in directory compare

### 10800exp011 email and ftp

### 10800exp012 zip and move files 

### 10800exp013 call perl and zip files

​              <--it has tee and log files ,execution time check, heart beat check, check return, 

### 10800exp014  static ip address setup

### 10800exp015  passwordless ssh login 

### 10800exp016 profile setup            

## Okey

### _Special Sign

#### backtick backquote `

10800exp012  

#### dollar sign  $

10800exp005 about dollar sign

$SHELL  reflect the shell version  , example  ""

​       <---https://www.google.com/search?q=how+do+i+know+which+shell+i+am+using+in+linux&sxsrf=ALeKk01QfcsXS0UKycOt4sAmfWmJLVVNlg%3A1625712204836&source=hp&ei=TGbmYKi5L8nc-gTt_7qgAw&iflsig=AINFCbYAAAAAYOZ0XBo4R2P5z7jj7Kznv2280R_qeSfK&oq=how+do+i+know+which+shell+i+am+using+in+linux&gs_lcp=Cgdnd3Mtd2l6EAMyAggAOgQIIxAnOgUIABCRAjoICAAQsQMQgwE6CwguELEDEMcBEKMCOgQIABBDOggILhCxAxCDAToFCAAQsQM6BQguELEDOgIILjoGCAAQFhAeOggIABAWEAoQHlCLBFjxZ2C-aWgBcAB4AIAB_wOIAbkokgEMMzcuMi4xLjEuMi4xmAEAoAEBqgEHZ3dzLXdpeg&sclient=gws-wiz&ved=0ahUKEwioj-TzudLxAhVJrp4KHe2_DjQQ4dUDCAk&uact=5 

​    <--https://www.cyberciti.biz/tips/how-do-i-find-out-what-shell-im-using.html    <--list several ways

$* 

   should be all parameters; 



#### double amperstand &&

https://stackoverflow.com/questions/25669540/what-is-the-difference-between-double-ampersand-and-semicolon-in-linux

This is commonly used to make sure that command2 is only run if command1 ran successfully.

The ; token just separates commands, so it will run the second command regardless of whether or not the first one succeeds.

210630-1-S036

### _alias setup

alias 

https://stackoverflow.com/questions/20111063/bash-alias-command-with-both-single-and-double-quotes

​            <---list escape example and also mentioned use  function in .bashrc

alias  aatcon=" netstat -n|awk '/^tcp/ {++S[$NF]} END {for(a in S) print a,S[a]}'  "

​           <--all active tcp connection, use function in  .bashrc  !!    210603-1-S001  <--so we can avoid complicated escape

### --alias setup for 60066

<---we need display all our daily command in case we need it hands on 

 <--or we can categorize them 

### _display setup

application/setting/display, then change the resolution 

​           <--also change IDE font and font size !!

### _profile setup (or .bashrc)

todo:   210621-1-S048,  show the current git branch !! 

​                               S052 also lots of zshrc setup !! 

​                               S046 a command to do the history statistics check

https://serverfault.com/questions/261802/what-are-the-functional-differences-between-profile-bash-profile-and-bashrc

​            <---.bashrc used by subshell as well,   .profile is old and used by login 



### _WildCard

  ?  *  [afadf]   <---169pd9  <--need examples here 

### &

​     <---一般都是使用& 在命令结尾来让程序自动运行

​     <---I use :  ./test.sh (endless loop)   &   , then I can not kill it, then I use ps -ef|grep pts ( terminal name) and kill the processes

### adduser

```
root@billy-VirtualBox:/home/billy/blib/11021/11021exp021# adduser git
Adding user `git' ...
Adding new group `git' (1001) ...
Adding new user `git' (1001) with group `git' ...
Creating home directory `/home/git' ...
Copying files from `/etc/skel' ...
Enter new UNIX password:
Retype new UNIX password:
passwd: password updated successfully
Changing the user information for git
Enter the new value, or press ENTER for the default
        Full Name []:
        Room Number []:
        Work Phone []:
        Home Phone []:
        Other []:
Is the information correct? [Y/n] Y
        <---11021exp021
```

### alias

see: https://zhuanlan.zhihu.com/p/33050965   <---list many alias setting methods 

### apt (ubuntu, yum in CentOS)

sudo apt update                         <----sync the apt 
sudo apt install openssh-server     <---10800Qus06



### apt-get

​         <---210707-1-S043  apt-install.sh is actually apt-get 

### awk

   <--210207Exp221S014 <--need to input here!! 

10800exp006

10800exp014 <---[***]

### brctl 

### brctl show    

<---list bridge information

   <--11041qus057 210213 screen

### brew

<-- from: https://www.youtube.com/watch?v=p6xDCz00TxU  7:44 like package installation tool 

### cat 

​          <---vi 文件名#编辑方式查看，可修改
​                cat 文件名#显示全部文件内容
​                more 文件名#分页显示文件内容
​                less 文件名#与more 相似，更好的是可以往前翻页
​                tail 文件名#仅查看尾部， 还可以指定行数
​                head 文件名#仅查看头部,还可以指定行数

```
mount |cat -n |less
      <---could make less show line number
```



### chmod

chmod 751 file

​           <---给file 的属主分配读、写、执行(7)的权限， 给file 的所在组分配读、执行(5)的权限， 给其他用户
​                  分配执行(1)的权限

chmod  u=rwx,g=rx,o=x   file 

​           <---上例的另一种形式chmod =r file 为所有用户分配读权限

chmod 444  file 

​             <--same as chmod  a-wx, a+r    file    同上例

chmod -R u+r directory 

​              <----this -R is interesting 递归地给directory 目录下所有文件和子目录的属主分配读的权限

### clear

   clean screen 

### colordiff 

  <---looks very useful 

<---need to : apt install colordiff

### cp 

cp -r  <--recursively copy folders 

10800exp012 

### ctrl+z 

​             <--- book146pd36 need a try  挂起当前进程fg 恢复后台

fg 将后台程序转入到前台   <---I can use ctrl+z during vim and put it into background, then use "fg" get it back

bg 将前台程序转入到后台  <---???  I guess we use "ctrl+z" same as bg ???

先用jobs命令，得到任务号x，
然后用fg %x, bg %x     <-- this seems not working ??

​               <-- https://bbs.csdn.net/topics/10319422

### curl

see 73086

### cut

10800exp006

### df -h

​     <--155pd5

<---list disk space stuff 

### dstat

#### __general info

(1)  dstat -cyl --proc-count --top-cpu
       <--check cpu

dstat --disk-util
       <--check disk
       <--dstat 是一个可以取代vmstat，iostat，netstat和ifstat这些命令的多功能产品  
        <--155pd5 , need install 

​     https://blog.csdn.net/yue530tomtom/article/details/75443305#:~:text=dstat%E5%91%BD%E4%BB%A4%E6%98%AF%E4%B8%80%E4%B8%AA%E7%94%A8,%E5%85%A8%E8%83%BD%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF%E7%BB%9F%E8%AE%A1%E5%B7%A5%E5%85%B7%E3%80%82&text=dstat%E5%85%8B%E6%9C%8D%E4%BA%86%E8%BF%99%E4%BA%9B%E5%91%BD%E4%BB%A4,%E5%9F%BA%E5%87%86%E6%B5%8B%E8%AF%95%E5%92%8C%E6%8E%92%E9%99%A4%E6%95%85%E9%9A%9C%E3%80%82 

#### -d  check disk

```
root@billy-VirtualBox:/home/billy/blib/33808# dstat -d
-dsk/total-
 read  writ
 116k   35k
      <--seems can specify the device and need add more 
```



#### -m  check memory

```
root@billy-VirtualBox:/home/billy/blib/33808# dstat -m
------memory-usage-----
 used  free  buff  cach
 598M 85.3M 22.4M  249M
 598M 85.3M 22.4M  249M
       <--- this is from top: 
        KiB Mem :  1008776 total,    91048 free,   606864 used,   310864 buff/cache
       <---seems sum up used, free, buff and cach meet total; 
```

#### -p       check process

```
root@billy-VirtualBox:/home/billy/blib/33808# dstat -p
---procs---
run blk new
5.0   0 0.3
4.0   0   0
4.0   0   0
...
  <---210204#33808exp221
      
```

#### -socket   for communication

```
root@billy-VirtualBox:/home/billy/blib/33808# dstat --socket
------sockets------
tot tcp udp raw frg
560   9   4   0   0
560   9   4   0   0
560   9   4   0   0
   <--210204#33808exp221
      socket include tcp/udp and all stuff
```

### dtrace

<--screen copy 210219-1-

### du

root@billy-VirtualBox:/var/lib# du -ks  docker
10679688        docker
root@billy-VirtualBox:/var/lib# du -hs  docker
11G     docker

​           <----s will not show subfolder recursively





du -sk ./* | sort -rn

​            <---list sub folder of current folder order by the size 

### echo

```
echo -n "username" |base64
dXNlcm5hbWU=
    <--encode
    <--  -n shall make the special characters working
echo dXNlcm5hbWU=|base64 -d
username    
    <--decode 
   <--from 11081 youtube video 
```



### egrep

```
tcpdump -nn -vvv |egrep -i '237|incorrect'
      <---will grep "237" or "incorrect" <--not sure if grep support regex
```

```
egrep "nti_raw/nti_raw_stage/temp/|Begin|End" AUR_CW_PR_PRE_RATE_USG_MTX.3577[1-3]/*
             <--grep files 
```

    filenum=`ls |egrep -v 'trg|fin'|egrep '(PREDATA_SA_OUT_)(.*CAN.*\.s42)'  |wc -l`  
         <--- to match the file like:  PREDATA_SA_OUT_CANTSCANST05958.s42  
         <--- note:.* is the any chars, I made a typo error when I tried to use * to match any char , 
               in regex :  . is any char 

```
echo $retvalue | egrep '^[0-9]+$' >/dev/null 2>&1
if [ "$?" -eq 1 ]; then
    echo -e "\nERROR: Unable to retrieve last sequence number usage data type $DATATYPE and usage type $USGTYPE"
    echo -e "\nExiting with error..."
    #/bin/rm -f $oralog
    exit 1
fi               <--this will check returen of egrep 
```

10800exp003    (echo -e  "line1asd\nsdsf44223\nafs23\nsfsfs\n23234" |egrep  '[0-9]+$' ) 

10800exp011 within the script

https://www.unix.com/unix-desktop-questions-and-answers/39670-difference-grep-egrep-fgrep.html

​         <--seems similar to grep -E 

### ethtool

ethtool enp0s3

```
Settings for enp0s3:
        Supported ports: [ TP ]
        Supported link modes:   10baseT/Half 10baseT/Full
                                100baseT/Half 100baseT/Full
                                1000baseT/Full
        Supported pause frame use: No
        Supports auto-negotiation: Yes
        Supported FEC modes: Not reported
        Advertised link modes:  10baseT/Half 10baseT/Full
                                100baseT/Half 100baseT/Full
                                1000baseT/Full
        Advertised pause frame use: No
        Advertised auto-negotiation: Yes
        Advertised FEC modes: Not reported
        Speed: 1000Mb/s
        Duplex: Full
        Port: Twisted Pair
        PHYAD: 0
        Transceiver: internal
        Auto-negotiation: on
        MDI-X: off (auto)
        Supports Wake-on: umbg
        Wake-on: d
        Current message level: 0x00000007 (7)
                               drv probe link
        Link detected: yes
```

from: https://linux.cn/article-9242-1.html

### find

10800exp008 <---find by name, type, mtime etc. 

### firewall-cmd    

​              <--need a try   check (https://www.cnblogs.com/woshimrf/p/ldap.html)

### free

free -m <--155pd5, list memory status

free -h   <--humen read 

​     <--155pd5  <--need compare with top

### grep

​     <--210203#33808exp221 S049 use grep -A and --color 

​     <---need more examples here

  10800exp006 <--big one 

### hash

​     <--list executed command 

### history

<--- when we got  a list of number, then !XXX will execute the selected command !! 

### id

```
root@billy-VirtualBox:/home/billy/blib/10800/test# id
uid=0(root) gid=0(root) groups=0(root)
```

​          <--id seems better than whoami 

### iostat

​    <--will list io stuff , 155pd5, need more information

### ip

```
 alias ifconfig="ip -c a | sed -e 's/\// \//g'"
        <--so     ip -c a worked  
           <--tried, seems -c means color , a should be "all" ???
```

​      <----https://askubuntu.com/questions/1031640/ifconfig-missing-after-ubuntu-18-04-install 

### iptables

iptables -L

​    <--11041qus057 210213 tried 

​    <--looks like firewall :  https://www.jianshu.com/p/ee4ee15d3658

​     <--10800qus034 very good and gives real examples !!



### jmap   

see 32050 jmap

### job -l

​            <---

### jstack

see 32050 jstack

### jstat -gc

see 32050 jstat 

### less 

​           <--- -i to ignore the case , so both lower case and uppper case work

### ln -s source slink 

```
root@billy-VirtualBox:/home/billy/blib/10800/test# ln -s myfile.txt mylink.txt
          <--link physical stuff to softlinkage
root@billy-VirtualBox:/home/billy/blib/10800/test# lrt
total 12
-rwxr-xr-x 1 root root 30 Apr 17 13:35 test.sh
-rw-r--r-- 1 root root  7 Apr 17 13:45 ttt
-rw-r--r-- 1 root root 20 Apr 17 14:07 myfile.txt
lrwxrwxrwx 1 root root 10 Apr 17 14:07 mylink.txt -> myfile.txt
```

ln source  hardlink

​           <---this is hard link, need a try

​           <---hard link like a mirror copy, while delete the original file, hard link still there (seems hard link is useless)

​                  from: https://ostechnix.com/explaining-soft-link-and-hard-link-in-linux-with-examples/#:~:text=A%20symbolic%20or%20soft%20link,copy%20of%20the%20original%20file.&text=Even%20if%20you%20delete%20the,copy%20of%20the%20original%20file.

### locale

from: https://www.huaweicloud.com/articles/2b16fd7b9479a680378c01b142ced2c6.html

### ls 

10800exp009 

### lsb_release -a 

   <--will give os name and version like ubuntu etc. 

### lscpu

   from:  https://confluence.solium.com/display/DEV/Ansible+Provision+Checklist

​            <---can list cpu information

### lsmod

<--see dtrace video 50100Qus001_(01)_1_e

<--lsmod is a command on Linux systems. It shows which loadable kernel modules are currently loaded.

### lsof*

#### __general ifo

​     <--https://www.cnblogs.com/peida/archive/2013/02/26/2932972.html

​      <--very good FD description , very very good examples !!!!!!

#### no param

```
lsof /var/run/docker.sock
      <--155pd5 
```

#### -u        for user 

```
root@billy-VirtualBox:/home/billy/blib/33808# lsof -u billy|head -n 5
COMMAND  PID  USER   FD      TYPE             DEVICE SIZE/OFF       NODE NAME
systemd 2469 billy  cwd       DIR                8,1     4096          2 /
systemd 2469 billy  rtd       DIR                8,1     4096          2 /
systemd 2469 billy  txt       REG                8,1  1612152    4456705 /lib/systemd/systemd
systemd 2469 billy  mem       REG                8,1  1700792    4456641 /lib/x86_64-linux-gnu/libm-2.27.so
     <--list all billy opened files , mem means memory mapped file ( I guess loaded into memory stuff)
```

#### -c        for process name

```
root@billy-VirtualBox:/home/billy/blib/33808# lsof -c java|head -n 5
COMMAND  PID USER   FD      TYPE             DEVICE  SIZE/OFF    NODE NAME
java    2661 root  cwd       DIR                8,1      4096  794066 /home/billy/blib/33808/33808exp221
java    2661 root  rtd       DIR                8,1      4096       2 /
java    2661 root  txt       REG                8,1     10304 4865511 /usr/lib/jvm/java-11-openjdk-amd64/bin/java
java    2661 root  mem       REG                8,1  17371136  795264 /usr/lib/jvm/java-11-openjdk-amd64/lib/server/classes.jsa
      <---list open files by certain process like java
```

#### -p     for process id 

```
root@billy-VirtualBox:/home/billy/blib/33808# lsof -p 2661|head -n 5
COMMAND  PID USER   FD      TYPE             DEVICE  SIZE/OFF    NODE NAME
java    2661 root  cwd       DIR                8,1      4096  794066 /home/billy/blib/33808/33808exp221
java    2661 root  rtd       DIR                8,1      4096       2 /
java    2661 root  txt       REG                8,1     10304 4865511 /usr/lib/jvm/java-11-openjdk-amd64/bin/java
java    2661 root  mem       REG                8,1  17371136  795264 /usr/lib/jvm/java-11-openjdk-amd64/lib/server/classes.jsa 
        <---list certian process open files, here is java process 
```

#### -i     for both tcp and udp

​     <-- -i means list stuff which meet certain condition

​           seems lsof -i    list  more than              netstat -ant   seems list only tcp not udp and no ipv6 stuff 

   <--see -i tcp

#### -i  tcp     for tcp  [***]

```
root@billy-VirtualBox:/home/billy/blib/33808# lsof -i tcp       [***]
COMMAND    PID            USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
systemd-r  468 systemd-resolve   13u  IPv4  16354      0t0  TCP localhost:domain (LISTEN)
container  766            root    6u  IPv4  23528      0t0  TCP localhost:40635 (LISTEN)
sshd       825            root    3u  IPv4  22982      0t0  TCP *:ssh (LISTEN)
sshd       825            root    4u  IPv6  22984      0t0  TCP *:ssh (LISTEN)
nginx      982            root    6u  IPv4  22555      0t0  TCP *:http (LISTEN)
nginx      986           nginx    6u  IPv4  22555      0t0  TCP *:http (LISTEN) 
         <---very good can really see all open network stuff 
cupsd     2367            root    6u  IPv6  30652      0t0  TCP ip6-localhost:ipp (LISTEN)
cupsd     2367            root    7u  IPv4  30653      0t0  TCP localhost:ipp (LISTEN)
sshd      2459            root    3u  IPv4  30877      0t0  TCP billy-VirtualBox:ssh->192.168.1.66:61988 (ESTABLISHED)
sshd      2571           billy    3u  IPv4  30877      0t0  TCP billy-VirtualBox:ssh->192.168.1.66:61988 (ESTABLISHED)
java      2661            root   10u  IPv6  50692      0t0  TCP billy-VirtualBox:34210->192.168.1.66:mysql (ESTABLISHED)
java      2661            root   11u  IPv6  50694      0t0  TCP billy-VirtualBox:34214->192.168.1.66:mysql (ESTABLISHED)
java      2661            root   12u  IPv6  50699      0t0  TCP billy-VirtualBox:34220->192.168.1.66:mysql (ESTABLISHED)
java      2661            root   13u  IPv6  50693      0t0  TCP billy-VirtualBox:34212->192.168.1.66:mysql (ESTABLISHED)
java      2661            root   14u  IPv6  50690      0t0  TCP billy-VirtualBox:34206->192.168.1.66:mysql (ESTABLISHED)
java      2661            root   16u  IPv6  50697      0t0  TCP billy-VirtualBox:34216->192.168.1.66:mysql (ESTABLISHED)
java      2661            root   17u  IPv6  50686      0t0  TCP billy-VirtualBox:34202->192.168.1.66:mysql (ESTABLISHED)
java      2661            root   18u  IPv6  50689      0t0  TCP billy-VirtualBox:34204->192.168.1.66:mysql (ESTABLISHED)
java      2661            root   20u  IPv6  31882      0t0  TCP *:http-alt (LISTEN)
java      2661            root   28u  IPv6  50691      0t0  TCP billy-VirtualBox:34208->192.168.1.66:mysql (ESTABLISHED)
java      2661            root   37u  IPv6  50698      0t0  TCP billy-VirtualBox:34218->192.168.1.66:mysql (ESTABLISHED)
java      2661            root   50u  IPv6  34604      0t0  TCP localhost:3658 (LISTEN)
java      2661            root   57u  IPv6  34615      0t0  TCP localhost:8563 (LISTEN)
sshd      2687            root    3u  IPv4  31848      0t0  TCP billy-VirtualBox:ssh->192.168.1.66:62115 (ESTABLISHED)
sshd      2771           billy    3u  IPv4  31848      0t0  TCP billy-VirtualBox:ssh->192.168.1.66:62115 (ESTABLISHED)
                  <---why both root and billy listed ??? I guess maybe we are doing sudo ????
sshd      2851            root    3u  IPv4  32440      0t0  TCP billy-VirtualBox:ssh->192.168.1.66:62837 (ESTABLISHED)
sshd      2916           billy    3u  IPv4  32440      0t0  TCP billy-VirtualBox:ssh->192.168.1.66:62837 (ESTABLISHED)
sshd      4027            root    3u  IPv4  52186      0t0  TCP billy-VirtualBox:ssh->192.168.1.66:65305 (ESTABLISHED)
sshd      4122           billy    3u  IPv4  52186      0t0  TCP billy-VirtualBox:ssh->192.168.1.66:65305 (ESTABLISHED)
```

#### -i xxx    for open port 

```
root@billy-VirtualBox:/home/billy/blib/33808# lsof -i :8080
COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
java    2661 root   20u  IPv6  31882      0t0  TCP *:http-alt (LISTEN)
          <--so we can see java is opening 
root@billy-VirtualBox:/home/billy/blib/33808# lsof -i :80
COMMAND PID  USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
nginx   982  root    6u  IPv4  22555      0t0  TCP *:http (LISTEN)
nginx   986 nginx    6u  IPv4  22555      0t0  TCP *:http (LISTEN)
```

#### -a -u xxx -i     for user active ports

```
root@billy-VirtualBox:/home/billy/blib/33808# lsof -a -u billy -i
                 <-- -a seems conditions "ANDed"
                 <-- -u list files for user 
                 <-- -i  seems internet address matched
COMMAND  PID  USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
sshd    2571 billy    3u  IPv4  30877      0t0  TCP billy-VirtualBox:ssh->192.168.1.66:61988 (ESTABLISHED)
sshd    2771 billy    3u  IPv4  31848      0t0  TCP billy-VirtualBox:ssh->192.168.1.66:62115 (ESTABLISHED)
sshd    2916 billy    3u  IPv4  32440      0t0  TCP billy-VirtualBox:ssh->192.168.1.66:62837 (ESTABLISHED)
sshd    4122 billy    3u  IPv4  52186      0t0  TCP billy-VirtualBox:ssh->192.168.1.66:65305 (ESTABLISHED)

root@billy-VirtualBox:/home/billy/blib/33808# lsof -a -u root -i
COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
container  766 root    6u  IPv4  23528      0t0  TCP localhost:40635 (LISTEN)
sshd       825 root    3u  IPv4  22982      0t0  TCP *:ssh (LISTEN)
sshd       825 root    4u  IPv6  22984      0t0  TCP *:ssh (LISTEN)
nginx      982 root    6u  IPv4  22555      0t0  TCP *:http (LISTEN)
```

### man

​     man adduser 

​              <--similar to " info adduser"  which gives detailed information 

​               <---"adduser --help"  just gives some options 

### mount 

 refer to: https://www.runoob.com/linux/linux-comm-mount.html 

### mv 

10800exp012 

### netplan apply

10800qus030-1 <---when setup static ip address 

### netstat

#### __general info

(1)  https://www.jianshu.com/p/523048ad7f71

​       <---very very good !! explains all the result

​             like local address, all and loopback difference !!!

​             explains all tcp states     

​      <--saved to: 210204 tempdev!!!

(2) netstat -an |grep -i listen

​          <---need to install net tools first:   apt install net-tools

​          <---seems list all the stuff not only tcp ip 

(3) https://blog.csdn.net/CSDN___LYY/article/details/82912272

​         <---very good , also explain the other protocols and a diagram display tcp states

#### -tunpc     established conn

```
root@billy-VirtualBox:/home/billy/blib/33808# netstat -tunpc |grep 2661
tcp6       0      0 192.168.1.100:34286     192.168.1.66:3306       ESTABLISHED 2661/java
tcp6       0      0 192.168.1.100:34278     192.168.1.66:3306       ESTABLISHED 2661/java
tcp6       0      0 192.168.1.100:34290     192.168.1.66:3306       ESTABLISHED 2661/java
     <---check pid of all ports stuff
       -c periodically, -tu: tcp and udp,  -n: use ip not domain name, -p: list pid
     <--for specific process id 

root@billy-VirtualBox:/home/billy/blib/33808# netstat -tunpc|head -n 5
Active Internet connections (w/o servers)  <----list only established, without server ( listening)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 192.168.1.100:22        192.168.1.66:61988      ESTABLISHED 2459/sshd: billy [p
tcp        0      0 192.168.1.100:22        192.168.1.66:65305      ESTABLISHED 4027/sshd: billy [p
tcp        0      0 192.168.1.100:22        192.168.1.66:62837      ESTABLISHED 2851/sshd: billy [p
       <----good for checking connected
```

#### -ant       all tcp

```
root@billy-VirtualBox:/home/billy/blib/33808# netstat -ant
Active Internet connections (servers and established)
              <-- a might means all ? including server I guess which is listening stuff
Proto Recv-Q Send-Q Local Address           Foreign Address         State
tcp        0      0 127.0.0.53:53           0.0.0.0:*               LISTEN
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN   <--ssh 
....
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN
tcp        0      0 192.168.1.100:22        192.168.1.66:61988      ESTABLISHED
tcp        0      0 192.168.1.100:22        192.168.1.66:65305      ESTABLISHED
tcp        0      0 192.168.1.100:22        192.168.1.66:62837      ESTABLISHED  <--putty sessions
tcp        0     64 192.168.1.100:22        192.168.1.66:62115      ESTABLISHED
tcp6       0      0 127.0.0.1:8563          :::*                    LISTEN
tcp6       0      0 :::22                   :::*                    LISTEN
           
tcp6       0      0 ::1:631                 :::*                    LISTEN
            <--tcp6 loopback see generalInfo(01)
```

#### grab all connections  [***]

 netstat -n|awk '/^tcp/ {++S[$NF]} END {for(a in S) print a,S[a]}'   

<--210207Exp221S014 <--need to input here!! 

### nslookup

```
root@billy-VirtualBox:/home/billy/blib/33808# nslookup google.com
Server:         127.0.0.53
Address:        127.0.0.53#53

Non-authoritative answer:
Name:   google.com
Address: 172.217.14.206
Name:   google.com
Address: 2607:f8b0:400a:800::200e
           <--from domain to ip 
```

```
root@billy-VirtualBox:/home/billy/blib/33808# nslookup 209.132.183.181
181.183.132.209.in-addr.arpa    name = origin-www2.redhat.com.

Authoritative answers can be found from:
       <--from ip to domain name
```

### od

<--octal ? 

10800exp006 

### openssl 

<--33808exp212_(03)

create cert check: https://www.digitalocean.com/community/tutorials/how-to-create-a-self-signed-ssl-certificate-for-nginx-in-ubuntu-18-04

### perf



<---need install linux-tools-common  , see 50100qus001 

<--from: http://www.ruanyifeng.com/blog/2017/09/flame-graph.html

### printf

 printf "%x" 20  <--convert to hexical

### ps 

​     ps -ef (system v 输出)
​     ps -aux bsd 格式输出
​     ps -ef | grep pid



### ps -aef --forest

​       <---11041qus057 210212S001  [***]

### pstree

​    <--looks very good

​    <--pstree |grep dockerd  <-this is ok 

### pwd

10800exp012

### rm 

rm -r <--recursively delete folder 

rmdir   <---remove empty folder 

10800exp012

### rsync

check: 210709-1-060

refer to: https://sites.google.com/site/rsync2u/home/rsync-tutorial/the-exclude-from-option

​          <---use list file

https://phoenixnap.com/kb/rsync-exclude-files-and-directories

​          <---give include and exclude 

### scp 

 needed here

### sed

10800exp006



```
 echo -e Backup/PM1000/Billydev080107/TempDev/210523-1-ReactSourceCode|   sed "s/\\\\/\\\\\//g"
             <---in double quote, \ seems have sepecial meaning, so 4 back slash is one back slash
                 five back slash is escaped back slash
```

```
echo -e Backup/PM1000/Billydev080107/TempDev/210523-1-ReactSourceCode|   sed 's/\//\\\//g'
```

​                from:  https://unix.stackexchange.com/questions/211834/slash-and-backslash-in-sed

### service network restart

​             <--for CentOS

​              <---10800exp014 setup static ip when restart after setting  

### service slapd start  

​             <---seems start daemon service (https://juejin.im/post/6844903586980167688)

### sftp

10800exp011  <--including ops within sftp command 

### sleep

10800exp012

### sort 

10800exp006

10800exp014 <---[***]

### spawn

```
while true
do
echo testing double dollar
echo $$
spawn /home/pin420/billy/150815-1-BLIB/35102/testDoubleDollar.sh
sleep  30
done
    <---need a try
```

### sql 

### sqlplus / as sysdba

<--connect to sqlplus see 36000exp006

 also: https://www.youtube.com/watch?v=HApdy-o525A

### ssh-copy-id

ssh-copy-id remote_username@server_ip_address

​          <---10800exp015

### ssh-keygen

ssh-keygen -t rsa -b 4096 -C "your_email@domain.com"

​            <---10800exp015

### su 

su - root 

​     <--root might be disabled, use sudo -i   <--it worked

​      <--check: https://askubuntu.com/questions/446570/why-does-su-fail-with-authentication-error

### systemctl           

sysctl -a | grep ipv4.ip

​     <--list all system information

​      <--cbeck (https://www.cnblogs.com/woshimrf/p/ldap.html)

systemd-cgls

​      <--11041Qus057_(01)_3  ,this should check cgroup

​      <--https://www.cnblogs.com/michael9/p/13039700.html

#### --enable 

enable docker

  <--see: https://phoenixnap.com/kb/set-up-a-private-docker-registry



sudo systemctl  status ssh   <---------10800Qus06 

systemctl stop jenkins

​           <----210707-1-S019 

systemctl status jenkins

​           <--210710-1-S010

### tar

<--how to tar directory ?????????

tar -zcvf archive-name.tar.gz source-directory-name

from: https://www.cyberciti.biz/faq/how-do-i-compress-a-whole-linux-or-unix-directory/ 





tar -xvf  busy.img

​      <---should do extract   details see: https://programtip.com/zh/art-98927   (very useful backup in 10800exp012 folder)



tar -zxvf helm-v3.5.3-linux-amd64.tar.gz

​       <---11081exp003 210331  <--i guess -z is for gz stuff 

 tar cvf /data/STM/incoming/UMTS/incollects/done/CDYUGMTCANSL00802.`timestamp`.tar CDYUGMTCANSL00802*

​          <---compress file 

​          <--- please note the usage of timestamp and wild card ; 

The following is about relative path or absolute path:

```
(1) If use the relative path to tar the files, then the un-tar file will appear in the relative path 
        (so if you move the tar file which was tar-ed with relative path, then the un-tar files will appear relatively )  

tar will untar file to its original location if the files are orinigally tar-ed with the path 
      tar -cvf tardir1.tar dir1/*    <--------- original tar files with path 
        tar -xf tardir1.tar           will distributed the files to its original places; 

(2) If use the absolute path to tar the file, then wherever  you move the tar file, then the destination files are put into the absolute path ;  

(3) untar will keep the original tar files ( gunzip will not not ) 
```



### tcpdump

#### --general_info

tcpdump -i eth0 -nn -s0 -v port 80

​      <-- i:  Nic,     -nn: pure ip and port;   -sXXXX mean packet capture bytes, s0 catch all; 

​           v, vv, vvv: more and more content;  port: filter 

​      <---p: only self traffic;  -e show mac and VLAN; 

​           -A: ascii <--so we can grep ;  -X both ASCII and hexical 

tcpdump -i eth0 udp
tcpdump -i eth0 proto 17

​        <---can use tcp or even mysql,  tcp is proto 6

tcpdump -i eth0 host 10.10.1.1

​                 <--host address 

tcpdump -i eth0 dst 10.10.1.20

​                <---directly use dst etc. 

tcpdump -i eth0 -s0 -l port 80 | grep 'Server:'

​             <-- -l shall make grep easier I guess

and or &&      or         or || not or !

​             <--logic operator

tcpdump net 192.168.1

tcpdump src net 10

tcpdump src net 172.16.0.0/12

​             <---use CIDR format, that mean can use VLSM variable length subnet mask 

​                   subnet shall first follow the ABC class, can sublit more downstream 

tcpdump -nn -A -s1500 -l | grep "User-Agent:"

​             <---use grep to get user-Agent 

tcpdump -s 0 -A -vv 'tcp[((tcp[12:1] & 0xf0) >> 2):4] = 0x47455420'

​            <---get http get only

tcpdump -s 0 -A -vv 'tcp[((tcp[12:1] & 0xf0) >> 2):4] = 0x504f5354'

​            <---get http post only

tcpdump -s 0 -v -n -l  -A | egrep -i "POST /|GET /|Host:"

​               <---A added by myself, should get the URL related stuff

tcpdump -s 0 -A -n -l | egrep -i "POST /|pwd=|passwd=|password=|Host:"

​               <--get password in post 

tcpdump -nn -A -s0 -l | egrep -i 'Set-Cookie|Host:|Cookie:'

​              <--get cookies stuff 

tcpdump -n icmp

​             <--get all icmp

   <---51602Qus001 for more detailed stuff  https://juejin.cn/post/6844904084168769549

#### --write to file 

```
tcpdump -s0 -w  /home/billy/blib/33808/33808exp187/tcpdump_output/210207_1_simpleTest.pcap
               <---33808exp187
```

```
tcpdump -s0 -w /home/billy/blib/33808/33808exp221/tcpdump-output/210207_1_noApplicationOn_test.pcap
     <---33808exp221
```



### top

   <---155pd15 bottom can check threads within process using top -Hp pid 

<--can list cpu and memory

### touch 

​           <---can create file 

  10800exp008 

### tr

10800exp006

### traceroute

```
root@billy-VirtualBox:/home/billy/blib/33808# traceroute google.com
traceroute to google.com (172.217.14.206), 30 hops max, 60 byte packets
 1  _gateway (192.168.1.254)  3.130 ms  5.515 ms  5.540 ms
 2  10.145.176.1 (10.145.176.1)  7.194 ms  7.541 ms  8.454 ms
 3  154.11.15.111 (154.11.15.111)  24.754 ms QUBCPQAJDR02.bb.telus.com (154.11.15.109)  25.052 ms  24.868 ms
 4  209.85.174.62 (209.85.174.62)  26.371 ms  26.205 ms  26.067 ms
 5  * * *      <----some hops are just ignored
 6  108.170.245.97 (108.170.245.97)  62.595 ms  24.504 ms 209.85.242.38 (209.85.242.38)  21.835 ms
 7  209.85.254.171 (209.85.254.171)  24.299 ms  24.970 ms sea30s01-in-f14.1e100.net (172.217.14.206)  24.809 ms
     <---first column is hop number
     <---3 time values are RTT(round trip time) to that hop, send three times !!
```

​          <---check: https://resrequest.helpspot.com/index.php?pg=kb.page&id=437#:~:text=A%20traceroute%20displays%20the%20path,show%20up%20in%20these%20times. 

### tree

### tty

```
root@billy-VirtualBox:/home/billy/blib/10800/test# tty
/dev/pts/1
     <---different putty session has different tty number
echo "test from billy"> /dev/pts/1
     <---yes, we can send msg to another terminal 
```



### Ubuntu version

lsb_release -a



cat /etc/*release

### ulimit -a

​    <--can get max open files number per process

​     https://blog.csdn.net/isoleo/article/details/51732687

### unalias

unalias aliasname

​      see: https://linux.cn/article-9242-1.html

### uname -r 

  <--list kernel version



### unique

10800exp006

### vi/vim

#### __GeneralInfo

check: https://linuxize.com/post/how-to-copy-cut-paste-in-vim/



#### change lines position  

```
1G  23G  GG ( to the end) 
            <-- 2 little dog to the front,  1 big dog to the end; 
```



#### Copy and paste

```
mx   then

   y`x to copy
or d`x to delete

```

​        <--from: https://vim.fandom.com/wiki/Using_marks

#### Line number 

:set nu

:set nonu    OR :set nu!

#### Search and replace 

```
%s/xx/XX/gc 
        <--- the most important !! seems need a confirm before replace
%s/xx/XX/g  is replace all once !!
```

#### ---to be merged 

(1)  From original  35320 S6

1  do search and replace and confirm

  %s/xx/XX/gc is the most important !!
  %s/xx/XX/g  is replace all once !!   <------------% means "1, $" which is searching for the whole file , if use "1,47s/xx/XX/gc" mean  from line 1 to 47


2 set nu   to setup the line number
  set nu!  to turn off the line number
     or set nonu



3 180512:  vi 
how to remove multiple lines 
   mx   d`x   delete stuff  ( we can use gg or GG to change location of beginning and end of the file )  
   mx   y`x   copy stuff
   yy  <--select the whole line

change lines:  1G  23G  GG ( to the end) <---- Captial G means go to that line 
            or 2 little dog to the front,  1 big dog to the end; 

### vmstat

```
vmstat 2
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 0  0 379392  68608  17728 295684    9  136   986   420  179  382 11  2 72 15  0
 0  0 379392  68616  17728 295684    0    0     0     0  132  258  0  0 100  0  0
     <--一个是Linux/Unix都支持，二是相比top，我可以看到整个机器的CPU,内存,IO的使用情况，而不是单单看到各个进程的CPU使用率和内存使用率(使用场景不一样)。
     <--一般vmstat工具的使用是通过两个数字参数来完成的，第一个参数是采样的时间间隔数，单位是秒，第二个参数是采样的次数
```

​    <-- https://www.cnblogs.com/ggjucheng/archive/2012/01/05/2312625.html

​    <--need look more into it

### wc 

-c   -l   -w   <---char, line , word number

### wget

```
wget https://github.com/kubernetes/helm/releases
          <--11081exp003  210331
```

### yum (CentOS, apt get in ubuntu)

<--need examples here

### zcat

```
zcat EXP_ZIP_DELAYED_USAGE_PARTITIONS_BC_BILL_CYCLE_11_08_2013.Z  | tar -tvfEe - | awk '{ print $8 " " $3}' | sort > whats_in_tar_file.txt
```

 zcat pipeline_AGG_COLLECT.log.20150909011700.gz



### zgrep

​      <--can try on

### zip/unzip

10800exp012 

zip ebill_cww_dev.dmp.zip ebill_cww_dev.dmp
           adding: ebill_cww_dev.dmp (deflated 94%)

zip -r test.zip ttt testSingleFile.sh   

​           <------------ttt is a folder,  -r is important  -h is help

```
unzip test.zip
   Archive:  test.zip
      creating: ttt/
      extracting: ttt/asd.sh
      extracting: ttt/adads.sh
      extracting: testSingleFile.sh
                   <----if files exist, will hint replace or not
```

 only check: 

```
unzip -l test.zip
Archive:  test.zip
  Length      Date    Time    Name

---------  ---------- -----   ----
    0  01-11-2014 15:27   ttt/
   11  01-11-2014 15:27   ttt/asd.sh
   11  01-11-2014 15:27   ttt/adads.sh
    0  01-11-2014 15:46   testSingleFile.sh
---------                     -------
   22                     4 files
```

unzip to a folder: 

```
unzip shellscripts_cw.zip opt/home/aur405/billy/140222-GenericUsageF/UsageFailureCheck.sh
Archive:  shellscripts_cw.zip
  inflating: opt/home/aur405/billy/140222-GenericUsageF/UsageFailureCheck.sh
                     <---------------If zip use absolute path, then the unzip file will go to original path
```

exclude some files: 

```
zip -r /opt/home/aur405/billy/shellscripts_cw.zip /opt/home/aur405/billy/1*  -x \*.sw*  <-------- this will exclude the swap files 
   ~! Refer to man zip 
```

# 10900 MacBook Pro

## questions: 

4. How to setup docker for MBP? 

## Exp



# 11008 IntelliJ IDEA

## Note

### docs

IntelliJ IDEA icons (https://www.jetbrains.com/help/idea/symbols.html#common-icons)

IntelliJ IDEA Plugin  Java Convention (https://github.com/alibaba/p3c)


IntalliJ IDEA Reference doc Chinese (https://www.w3cschool.cn/intellij_idea_doc/intellij_idea_doc-q3ke2coy.html)

IntalliJ IDEA Reference doc Chinese How to auto generate code  (https://www.w3cschool.cn/intellij_idea_doc/intellij_idea_doc-jpu72ecd.html)
                                           <--- this is some automation we can do first 
IntalliJ IDEA Reference doc Chinese How to create real time template (https://www.w3cschool.cn/intellij_idea_doc/intellij_idea_doc-hnk72eaw.html)
                                           <---will do it later

### issues and fix

IDEA frozen <--210624 :  one popup stuck,   kill the process 

## Questions

1.How to open multiple project in IntelliJ?
2.How to setup java language level for IntelliJ project ?
3.What is module concept in Idea ?
4.How to exclude project from compile ?
5.What happen when error loading facade ?
6.Can we use IDEA for Eclipse plugin development?
7.How to GUI setup related to the configuration file ?
8.How to do the cheat sheet diagram and absorb all cts shortcut etc. ?
9.How compare with eclipse shortcuts ?
10.How to setup editorconfig file ?
11.What is the overview of IDEA ?
12.How to setup VCS ?
15.How to setup git?
16.Why IDEA not break in break point ?
17.How to do github stuff ?
18.How to do maven in Idea ?
19.How to do gradle in Idea ?
20.How can we debug the decompiled java code ?
21.What is practical IDEA debug tech for big project like spring source code ?
22.Where is bookmark saved ?
23.Why IDEA skip breakpoint because it happened in debug evaluation?
24.How can we decide the maven path from a specific code or class ?
25.Do we have spring plugin for Idea community?
26.How to setup java convention plugin?
27.How to create template ?
28.How about online IDEA shortcuts ?
29.How to operater docker in IDEA ?

30.How  to print call stack  of current break point ?

31.How to install Yaml and properties conversion plugin?

32.How to remove a commit locally and remotely?

33.How about running application ?

34.How to upgrade to Ultimate version ?

35.What is difference between ultimate and community version ?



## Okey Ops Buttons

navigator icon in project view can reach the file in project 

​             <---this is actually very useful to position the file under editing 

​              <---210621-1- 

pull the code 

​             <---210623-1-S076

## Okey Ops Shortcut

​            <--p2 mean on my own paper for IDEA shortcuts page 2 

​            <--there is IDEA short cuts reference card in new hire team channel shared we can print

​            <--xiao mentioned there is lots of short cuts under "navigator" menu in IDEA

​            <---also mentioned that we can disable windows shortcuts in case there is conflicts between windows and IDEA

​              <---210621:  on note:  there is ctrl+shift+t  will do the stash, pull and apply stash again !! need try

​         <--210623:   xiao mentioned  ctrl+shift+T to insert a new test !! 

### Change theme of IDE

ctrl+~  p2

​     <--show time

### debug and run

ctrl+shift+F10  

​          <--directly run one app

alt+shift+F9   <--choose which one to debug, can still further go to run 

alt+shift+F10 <--choose which one to run can still further go to debug 

### editing and coding

alt+enter   [***]  <--to import class                 

ctrl+shift+enter  [~~~] <---statement auto completion

ctrl+alt+L   <--format,  

ctrl+alt+shfit+L <--full file format , can choose to re-arrange code like put fields together etc. 

ctrl+d  <--dup line

shift+enter <---insert in next line

### file structure [***]

ctrl+F12  p2   [***]

​       <----show the file structure , good for maven pom.xml file as well 

​     alt+7 <----can also show file structure but open some tool view, alt+12 , alt+9 git view good      

### find method implementation

ctrl+alt+B   <----this is very useful when we have an interface to  find the implementation [***]

### find Usage  

alt + F7  p2

​     <--list all usage of this method, can use 33808exp202 service method          

​     ctrl+alt+H   p9 <--- call hierarchy of method --who call it !!  33808exp202 service method 

​                                       also there is an icon to do whom it calls

​     ctrl+shift+H  p9 <---method inheritance relationship like implementing or overriding !! 

Ctrl+click field to get field usage !!! 

​             <--newly learn from shareworks

### get all occurrence of a word within file

ctrl+shift+F7 on word, then keep F3  p1

​            <---very useful for searching stuff in big file 

### go home 

alt+F1  p1

​     <--for example, shift +escape then you lost project view, this will help you go home

### hide and display toolbars

  lower left corner, a window ( or monitor or TV) like icon ,   p2

​            <--click to hide tool bar, click again get back

### insert stuff

alt+Insert  [***] [~~~]

​           <---per scenarios:   insert java file, java package, constructor, getter, setting, test case, copy write

​           ctrl+I  <---is one of the options which implement the interface ( kind of insert as well)

### position a file in explorer

ctrl + click tab of open file   p1

​          <---this is very useful when you need position the file like want to open in dos window etc. 

### Quick replacement and intelli-sense

psvm,    sout,    list.for , list.fori,   

j.for  <-- ( j is int)     [***]

do or ctrl+space <---auto completion hint

### refactoring

ctrl+alt+shift+T   p5   

​            <---refactoring a quoted string to constant very quick

​                  we got everything !

​     shift+F6 [~~~]       <---to rename file

### search everywhere

double shift p1

### search file content 

ctrl+shift+F   p1  

​           <---ctrl+F can only search file opened within editor

### setting of IDE

Ctrl+alt+s      p2

​             <---set editor, compiler, plugin, language, tools very important 

### setting of Project

ctrl+alt+shift+s  p2

​           <---like project, SDK setting, module setting , facet setting etc. 

### surrounding and completion

​       ctrl+alt+J  [***] <---will list like surround with callable( make it passed to thread) or iterator or readwrite lock

​                           <---this is a bunch of fixed coding block !!

​        ctrl+J   [***]          <--compare with ctrl+J which is doing the completion !!!

### version control

alt+~   

​          <---then get a bunch of stuff including ctrl+k  to commit and ctrl+shift+k to push etc. 

## Okey search pattern

### double shift for file

   <---after click double shift , then input the following 

​            *.jenkins  

# 11015 Notepad

## Questions

1.how to use column mode ?
2.how to format json ?
3.how to edit the binary ?

4.How to edit big data file ?

# 11021 Git

## Note

https://git-scm.com/docs/git-push   <--good book 

git bash :   cd /d/Backup/PM1000/Billydev080107/MyBLIBBPOTCode/11021/11021Exp020

### Billy Account

https://github.com/billydevInGitHub

### Git bash convert windows folder name

```
 echo -e Backup/PM1000/Billydev080107/TempDev/210523-1-ReactSourceCode|   sed "s/\\\\/\\\\\//g"
             <---in double quote, \ seems have sepecial meaning, so 4 back slash is one back slash
                 five back slash is escaped back slash
```

​              <--see also sed command in 10800

### Help

git push --help

​    <--will launch web browser to show the help

### Practice base 

D:\Backup\PM1000\Billydev080107\MyBLIBBPOTCode\11021   exp020

​      <--important information should be recorded in MD

## Questions: 

1.How to do command line git?
2.Command line git vs eclipse git, what's difference ?
3.Is it possible not to move git project out of eclipse workspace ? so our track of the project location will not be changed ?
4.What are git concepts ? Like master and branch etc stuff ?
5.Compare git local and GitHub
6.What does stashing and clearning mean ?
7.What is faster forward ?
8.How about tag ? How tag is related to branches?
9.How about multiple branches ? And branch within branches ? 
10.Why we need index ? or why we need staging stuff? 
11.How to do git ignore in command line and in eclipse ?
12.When conflict happen ? Is 2 branches modifying the same line ? How about 2 branches modifying different line ?
13.Any differnec between Unix command line and Dos command line??
14.What is general SCM pattern ? Can we draw a picture ?
15.What happen to eclipse project (attached to git) when we move the git repository folders ?
16.How to do the git pull request to remote github ? 
17.If we just download the source file with .git folder, can we do the git command line ?
18.How to change remote repository?
19.How to setup remote user name and password?
20.How to setup github pages with https ?
21.How to setup a custom domain with github pages ?
22.How to list all tags ?
23.How to compare 2 tag?
24.How to compare current staged with the tag or commited with the tag?
25.How to compare local with remote branch?
26.Why tag missing after git clone or pull? How to push tags to the remote ?
27.How git diff with remote ?
28.How to check git current setting like orign or username ?
29.How git setup ignore file ?
30.How to do git pull ?
31.What is git stash?
32.How can we update local with a tag or revert back to a tag or just revert back to repository?
33.How does git do checkout and revert ?
34.When use git reset when use checkout ?
35.How to compare reset, checkout and revert?
36.When do we need do git branch ?
37.What is github profile ?
38.What is  stash for git ?
39.How to download partly github stuff within a big respository?
40.How to change git repository name ?
41.How to remove version control of git from Idea ?
42.How to setup BLIB github repository ?
43.How switch to another git remote branch ?
44.What is git rebase ?
45.What is git squash and cherry pick ?
46.Howo to do advanced git like cherry pick , squash and edit etc.?
47.What is git stash used for ?
48.Rebase vs squash ?

49. What are git interview questions?
50. What is hotfix ?
51. What is the practice of atlassian ?
52. How to setup multiple user git server ?
53. When git conflict will happen and how to check and how to fix ?
54. What is git advanced usage ?

## Exp

### 11021exp007 github clone 

### 11021exp008  U007  explore history some git show stuff used 

### 11021exp014  kind of rebase to squash 

### 11021exp015  kind of rebase --copy all commits and past to another branch , different view of rebase

### 11021exp016 cherry pick, also see conflict 

### 11021exp017  check pick without conflict , but hash will be changed 

### 11021exp018  stash , trying to test some conflict  with local 

### 11021exp019 stash trying to test conflict seems not necessary 

### 11021exp020**  this is the test base of git 

### 11021exp021 use server, ssh git Server with multiple users

### 11021exp022  branch merge conflict 

### 11021exp023 use server, pull conflict and merge

### 11021exp024   local master rebase remote

### 11021exp025  branch dev rebase master

### 11021exp026   use rebase do the commit msg rewording

### 11021exp027 use rebase to squash commits

### 11021exp028 use rebase to reorder commits no conflicts 

### 11021exp029  use rebase to reorder commits with conflicts 

### 11021exp030** use rebase to check conflict solving one by one 

### 11021exp031 use abort in rebase

### 11021exp032 use skip in rebase   , master code will still be absorbed

### 11021exp033 one skip one abort still be abort

### 11021exp034  reset not working during rebase 

### 11021exp035  git stash test , stash conflicts, pick one of them, msg etc. 

​             <---see stash stuff using    " git stash show -p  xxx", see conflicts and need action, choose one in stack with no conflict

### 11021exp036  test merge --squash 

### 11021exp037  test patch

### 11021exp038 git solution for BLIB33808

### 11021exp039  remove tracked files and add again to apply ignore rules 



### 11021exp040  git ignore rules in details 

### 11021exp041 git advanced check and graph stuff

### 11021exp042 git commit amend and choose date

### 11021exp043 use rebase to clean some content

### 11021exp044 restore rebased stuff 

​               151pd180 <---reset --hard could take you back to one certain commit, but commit from that point to top will be lost

​                <---I am not sure if this exp044 is very useful 

### 11021exp045 git blame test

### 11021exp046 git merge dev to master 

​                  <---could also be  used when merge feature to dev 

### 11021exp047  check if everyone can see the branches

### 11021exp048  real fight develop merge  feature

### 11021exp049 different ways of merging 

​               <---when conflict:           git pull need stash local change first if conflict 

​               <---when billy commit first,          git pull --rebase will  put billy change on top of remote 

### 11021exp050 use IDEA update project button to do pull with merge or  rebase



## Okey Git Cmd

### alias

refer to: https://presstige.io/p/git-16190cc93e234dbd93027c64a577640e

alias galog="git log --graph --all --decorate"

​           <--seems I like this

alias gst='git status'

todo:  https://zhuanlan.zhihu.com/p/51944987 

​          https://einverne.github.io/post/2017/08/git-common-alias.html   <---this one is better and do through git config

​                   <--also mentioned bash alias

### Git  ___ git  xxx  --help

​        <---xxx is the git command, it will open page: file:///C:/BillyInstalledApplications/Git/mingw64/share/doc/git-doc/git-merge.html 

### Git ___Ignore 

151pd38 and pd43 to include stuff 

11021exp040 <--examples to apply rules 

​             <--another good example is the .ignore file in 33808

33808 has .gitignore file

73066exp016

73066exp044

<---add ignore and can still keep important files book151pd40. pd43 need try 

https://www.cnblogs.com/kevingrace/p/5690241.html

​          <--good example here

### Git add

git add README
git add *.md
git add -A

​    <---book151pd28 ,need try <--very good !!!! like -A etc. 

```
git add *.java   
     <---see 33808Exp016 190815S005
git add -A         
     <-----should add the whole tree, need to compare with git add . ??
git rm --cached  newFile      
     <--unstage the  cached, useful when fix the files not ignored by moving them out of cache
     <--so overall speaking:
       for new file: "git add" shall "make file join the diff etc." and also move to stage; 
       for added old file: "git add" just move to stage or cached
```

### Git add -A

new , modified, deleted 

git add -A is equal to git add . + git add -u

  <--https://stackoverflow.com/questions/15011311/whats-the-difference-between-git-add-u-and-git-add-a

### Git add .

modified and new  ----Stages everything, without Deleted Files 

### Git add -u 

modified and  deleted , but now the new files 

### Git bisect

<---very good, position the bug and it is related to test 

### Git blame 

```
D:\Backup\PM1000\Billydev080107\MyBLIBBPOTCode\11021\11021Exp020\src\main\java\billydev>git blame Rebase.java
7b9b9c56 (billy 2020-08-04 19:08:57 -0600 1) package billydev;
7b9b9c56 (billy 2020-08-04 19:08:57 -0600 2)
7b9b9c56 (billy 2020-08-04 19:08:57 -0600 3) public class Rebase {
7b9b9c56 (billy 2020-08-04 19:08:57 -0600 4)     //1
f2170006 (billy 2020-08-04 19:09:15 -0600 5)     //2
8f4bcdce (billy 2020-08-04 19:09:27 -0600 6)     //3
7b9b9c56 (billy 2020-08-04 19:08:57 -0600 7) }

           <----very good  book151pd109
```

a bit advanced stuff: https://wxnacy.com/2019/05/21/git-blame/

11021exp045  <---do some test, 

### Git blame XXXFilename -L 10, 5 

from: https://wxnacy.com/2019/05/21/git-blame/

11021exp045  <---from Line10 grab 5 lines,   from Line10 until  interface 

### Git branch

 git branch   <--- ctrl+shift+~ in IDEA list all branches menus 

     git branch -a  <-------will list local and remote branches 
     git branch -av   <---with more info
     git branch -avv  <----more detailed with how branches are bound, need look into 
    
     git branch iss553   <--this will create branch
     git branch XXXX oldBranchName <----I guess oldtype is based on which branch, for examp git branch xxx master 
                          <---from Luban  D180, there are 4 types of stuff we can create the branch: 
                           <---from current branch, from new branch, from  remote branch, from  commit hash 
    
     git check -b iss553   <---this willl do create branch and check at thesame time 
     git checkout master     <--switch to master or branch, if workspace file no new change, will stick to the branch
                                             <--if workspace file has new change,  then must commit change or stash them !! 
     git merge issu553        <--merge the branch, that means you stand in master and from master point of view merge 
                                                 the branch of issu553 stuff , you always in your own branch !! 
                                            <---issue553 is always "the other " source of information !! 



book151pd116 <--very good stuff here !!



### Git branch at hash

   <---book151pd124 good stuff here  to pd127 to , push branch (we did that today 201205) book151pd130

<--create a branch from a hash point

### Git branch -a 

<--for new git repo on server , need to do git push first , 11021exp024-210503

### Git branch -d 

  git branch -d hotfix      <---this will delete hot fix 

### Git branch -r 

​        <--151pd136   -r should list remote branches 

### git cat-file XXXfilename -p

<--will get the file content,  XXXfilename is object filename 

https://dev.to/maxpou/what-s-happens-when-you-git-commit-59n7

see also: https://morningspace.github.io/tech/inside-git-1/   <--this one is better 

### git cat-file XXXfilename -t

can get the object type

### git check-ignore -v $(find . -type f -print)

<--will list ignore rules and which file ignored    S210505-6-005

ATTENTION: 

​       (1) --won't work on windows <---we can run it in git-bash !!!

​       (2) Do not run it under the root folder with .git inside 

 see: https://stackoverflow.com/questions/466764/git-command-to-show-which-specific-files-are-ignored-by-gitignore



### Git Checkout 

git checkout  <--should checkout the head
git checkout -b localbranch b775a749a5

​              <--I guess the above  checkout a commit from a branch <---need to confirm 

​             <---33808Exp148 200913,  we can direct check out with branch name,
​             <---if I do git checkout b775a749a5, I will be in detached head!!

201010: the following need more editing :) 

Check out (normal working want to go to another branch ,  reset --hard want fix messed up things

 git checkout HEAD -- my-file.txt
         example: git checkout HEAD -- src/main/java/com/billydev/blib/controller/RestApiController.java
                                   <--this will revert specific file to HEAD !! 
      git checkout @ -- myfile.ext
      git checkout -- myfile.ext   <---this is     reset to index if index is not empty
       git checkout upstream/master -- myfile.txt            <----all these checkout stuff check Qus34
       git checkout TAGNAME --myfile.txt <-----------seems use  use myfile.txt without -- also ok
                                                         <----finally use git diff head to compare work director to the head  ( git diff will not show anything)

https://segmentfault.com/a/1190000006185954
前面讲到checkout是会修改HEAD的指向，变更Index区域里的内容，修改Working Directory里的内容。

这看上去很像reset --hard，但和reset --hard相比有两个重要的差别
   reset会把working directory里的所有内容都更新掉
   checkout不会去修改你在Working Directory里修改过的文件
   reset把branch移动到HEAD指向的地方
   checkout则把HEAD移动到另一个分支
            <---need to take more look at


git checkout your-file

​       <---book151pd87, very good, mention will override local files 





checkout tag

​      <---book151pd118

checkout tag overbranch

​      <--book151pd121

### git checkout --conflict=merge MergeConflict.java

11021exp022 <---check out the merged file again after we messed it 

### git checkout -b myfeature develop   [---]

<---create new feature branch from dev

<---this might be the most frequently used command

```text
$ git checkout -b myfeature develop
Switched to a new branch "myfeature"
```

from: https://www.zhihu.com/question/24201185



### git checkout -b fix-failing-tests origin/fix-failing-tests

​         <---from: https://www.freecodecamp.org/news/git-checkout-remote-branch-tutorial/

​                   <---11021exp048   210613 S016  <---seems we need name a local branch name !!

### Git cherry pick

```
git cherry-pick 78ccd
[master bcd60e4] a
 Date: Sun Jan 3 13:15:54 2021 -0700
 1 file changed, 1 insertion(+)
       <--this is real 

git cherry-pick hash-code
     <--this is syntax
     <--book151pd145
        we can cherry-pick useful stuff from feature branch
```

### Git clean

11021exp022  <---210502  used to clean up the manually create files using git show 

### Git clone 

151pd31, 34



### Git clone ssh 

git clone ssh://billy@localhost/home/billy/blib/11021/11021exp048/repository/repo.git

​                      <---11021exp048  , as long as .git on server is accessible 

### Git config

<--see also:  11021exp021   210501 screen copy to setup git server stuff 

git config --global user.name "billy"
      <---book151pd25, git config --add seems similar 

git config --global user.email "billydev@gmail.com"    
       <--refer to: 11005Qus01

git config --list --local    
    <---this could list local settings including the remote name like "origin" Check Qus28
        local I guess means for this directory and remote origin should be related to project
git config --get --local remote.origin.url
https://github.com/billydevInGitHub/11021.git        
     <---kind of get one stuff of local, book151pd24

git config --global --list
user.email=billydev@gmail.com
user.name=billy
credential.helper=manager
      <--list global settings which is related to user infomation etc. 

git config --edit --global    

<---this will show username or email setting  Check Qus28

##### 





### Git commit

```
git commit  
     <--In IDEA ctrl+K , then ctrl+M after get into commit dialog box
     <----in command line, git commit only commit those 'added' stuff !! 
git commit -a    
     <--- could do the unstaged file directly   check 35000Exp001 (01) S008
     <---if multiple file, must use "git add xx xxx", can not use  "commit -a -m "xx" xx  xxx "
     <---seems git commit -a -m "xxxx"    if the file never added (first time file) not working
  ^^^so new files must be explictly added, new files could not be sneak in using -a !! ^^^
                            <--- -a is not adding
          -a does not means "add" but commit all changed track files, so we have to do git add first !!
```

### Git commit --amend

git commit --amend
git commit --amend -m "new message"
git commit --amend -C HEAD

​      <--文件没提交全是很常见的小失误，解决办法就是先用git add 把忘记提交的文件添加到暂存区，

​        再用git commit 命令加--amend 参数把文件追加到最近一次提交中去，book151pd75

​       <--11021exp042   

### Git commit --no-verify

​       <--from: https://confluence.solium.com/display/DEV/Git+Merge+Playbook  

​              see also: 210612-1-S004

​      <--explained: https://blog.csdn.net/zhengyinling/article/details/113846671

​                        <--seems --no-verify ignore pre-commit hook , so no code style check, above link explains more

### Git commit --date 

$ git commit --date=“2016-10-10T12:01:01”
$ git commit --date="10 minutes ago"
$ git commit --date="noon yesterday"
$ git commit --date="last friday"

​           <---need try book151pd78  11021exp042

### Git commit -h

 <--get the help

### Git commit rename 

<---very good list the git rebase -i details 

​      book151pd152   

<---210103:  during vi editing, "reword" can only type "r", also hash code will change after rewording



### Git commit edit or modify **

<---and even we can add more files to some commits 

​         151pd152

​           <--- do the amend see 210103S001-S005

<--- seems when git rebase do the edit, it only change the commit comments, if add new file changes

​                  need to edit and commit again and then squash 2 commits ( so seems one commit is changed)

 <---so this is kind of give you a chance to "amend" a commit !! 







### Git diff

#### local vs staged

```
git diff      
    <---compare local with the one within index(staged) !! 
       if new file is never added--never indexed, will not be checked in "git diff") 
       if the file is staged using git add xxx, then the git diff show nothing
           <--I guess when stuff newly added it is the same for local and indexed
```

#### local vs rep

```
git diff  HEAD   

 <--- compare local once indexed with head  (again not included brand new file which is not indexed) 
 <---must commit at least one version
 <---git diff always begin from local directory indexed file unless using --cached or --staged 
 <--- it is no " git diff --head" because there is no "--head" (only --cached or staged)
 <--so git diff can check local vs staged  or local vs head     
 
```

```
git diff 73066Exp039_190513_01    
<---check qus24, compare tag with currently staged ??? <--should be local vs tag or commit 
<---should be local vs tag <--so git diff always begin from local 
```

#### staged vs rep

```
git diff  --cached  or  git diff --staged   
  <---compare head with indexed or cached!!   
```

#### among reps 

```
git diff master iss553                
   <--compare master with the branch 
```

```
git diff master origin/master   
```

​       <---compare local git with remote git ; 

​    need to do a "git fetch" first to get/update "remote" stuff , check Qus27 

### git diff FETCH_HEAD

​           <---see 11021exp048  210613 S020  <---when do fetch instead of git pull, we can use this FETCH_HEAD to do the check

### git diff master..my-branch

​    <--this is better than use hash

### git diff-tree -r {hash}

   <--from 11021qus049-01-1 Q11

​    <--git diff-tree –no-commit-id –name-only -r {hash}    tried this with no hash, seems not working??

### Git fetch

```
git fetch                                      
      <--this step is a must before we can proceed
```

```
git diff master origin/master   
      <---compare local master with remote master
```

new stuff from  book151pd135

​     <--very good stuff 

<--11021qus049-01-1 Q7  difference between  git pull and fetch, seems fetch update a new branch,  pull=fetch+merge

​            <--151pd137 use git branch -r  even can see the new branch for the remote !!!

 <-- also:  https://stackoverflow.com/questions/180272/how-to-preview-git-pull-without-doing-fetch

​            <---After doing a git fetch, do a git log HEAD..origin/master to show the log entries between your last common commit and the origin's master branch. To show the diffs, use either git log -p HEAD..origin/master to show each patch, or git diff HEAD...origin/master (three dots not two) to show a single diff.

​            <---seems give some concrete stuff of git fetch , need make a try !!



### Git fetch origin

​          <----see this issue when we read: https://confluence.solium.com/display/DEV/Git+Merge+Playbook

​                            <---I think "git fetch origin <source>"    ,then it point to source , without origin might point to current branch 

​          <---then read the following: 

https://blog.csdn.net/sjyttkl/article/details/87966542

​        <--explained   git fetch !! 

```
最常见的命令如取回origin 主机的master 分支：

$ git fetch origin master
取回更新后，会返回一个FETCH_HEAD ，指的是某个branch在服务器上的最新状态，我们可以在本地通过它查看刚取回的更新信息：

$ git log -p FETCH_HEAD
```



  git fetch origin develop

​             <----11021exp048  210613 S020

​             <-----we can be on develop branch or some other branch, this fetch means grab stuff from remote 

​             <--compare with git pull,  this fetch will  have a FETCH_HEAD  so we can do sth without cause any conflicts 

### Git grep

```
git grep some
src/main/java/billydev/Rebase.java:    //some extra after b
     <--real example
     
git grep keyword
git grep keyword file-name
     <---syntax  
     <---book151pd148
         this should be useful especially in windows machine
```



### Git ignore 

see Git __Ignore

### Git Init 

151pd24 <---very good , something explained 

git init  
  <--setup .git folder
  <---after git init, IDEA need to be launched or relaunched 
  <-- About .gitignore 
        (a) must add .gitigore file before git init ; 
        (b) If not, need to do :  git rm --cached <folder or file>
        <---details see Qus029_(3) 

D:\Backup\PM1000\Billydev080107\MyBLIBBPOTCode\11031\11031exp003>git init
Initialized empty Git repository in D:/Backup/PM1000/Billydev080107/MyBLIBBPOTCode/11031/11031exp003/.git/
           <--initial repository

                <---11031exp003

### git init --bare

​            <----should create a git repo on the server side , check 11021exp021 

​            <---11021exp048 , exp049 etc. 

​            

### git hash-object

<--manually create git object

refer to: https://morningspace.github.io/tech/inside-git-1/

### Git Log

```
git log       
   <---can only list current branch log or master log
```

```
git reflog              
  <---this one seems also good for the quick one 
```

```
git log --pretty=oneline          
      <--from luban, show history each one line
```

```
git log --pretty=oneline  --decorate=full   
      <--this could show tag and more info <----will use this one !! 
git log --pretyy=oneline --tags --decorate=full 
      <---seems --tags is not necessary 
git log --no-walk --tags --pretty="%h %d %s" --decorate=full  
      <---this is useful to us  (hard to remember)
```

​          <--from: https://stackoverflow.com/questions/4211604/show-all-tags-in-git-log

git log --pretty=format:"%h%x09%an%x09%ad%x09%s"

​         <--from: https://stackoverflow.com/questions/1441010/the-shortest-possible-output-from-git-log-containing-author-and-date



```
git log -p    
    <---will show details  
```

```
git log --stat  --summary         
   <--- seems better than -p which might be too detailed 
```

```
git log branchXXX
     <---check log on one branch
     <---151pd146
```

```
git tag -l   
    <--just list the tag
```

### git log --all --grep="linux"

​     <--seems grep commit message

   <--all option means:  It shows all commits in the history of branches, tags and other refs. 

​       including all other branches stuff. see: https://stackoverflow.com/questions/29756637/what-does-git-log-all-do#:~:text=It%20shows%20all%20commits%20in,not%20reachable%20from%20any%20ref.&text=The%20%2D%2Dall%20option%20does,basically%20your%20branches%20and%20tags.



### git log --author="git"

### git log -XXXNumberXXX

<--should display last n commits

### git log master..feature

​          <---need test 

​         <---there is git diff similar thing 

### git log origin/master

<--remote git log,  remote need have at least one git push   11021exp024-210503

<--then each time we need to do the fetch first to get the information from remote

### git log --oneline --left-right HEAD...MERGE_HEAD

11021exp022 <---list which commit cause the conflict 

### git log --oneline --left-right --merge

11021exp022 <---list which commit cause the conflict , list only commits which caused conflict !!!

### git log -p -S"SOMETHING_TO_SEARCH_IN_CONTENT"

11021exp043 <--search the content 

### git log --pretty=format:"%h%x09%an%x09%ad%x09%s"

from: https://stackoverflow.com/questions/1441010/the-shortest-possible-output-from-git-log-containing-author-and-date

<--this will list user and date etc.

### Git ls-files

11021exp022  210502

11021exp029  <---super good for rebase conflict which need many steps, with this we can see each step stuff  210503--S008

### Git ls-files -u

11021exp022  <--seems can list conflict files

### Git ls-remote 

from: https://stackoverflow.com/questions/36984371/your-configuration-specifies-to-merge-with-the-branch-name-from-the-remote-bu   <---11021exp024  210503

### Git ls-tree -r master 

<--seems list all tracked files  11021exp038-1-3

 <--maybe not working in windows

### Git merge

book151pd134 

​             <--it is fast-forward;  when master merge dev, master will absorb dev stuff 

​                       (FYI.  git rebase is:  master absorb remote code see 11021exp024)

Git merge-file

11021exp022 <---210502  manually merge files

### git merge --no-ff  myfeature

<---no fast forward so we can have a merge commit

from: https://www.oschina.net/translate/a-successful-git-branching-model

### Git merge squash

git merge branch-name

book151pd159

<--will do automatically squash during merge

<--210103: actually will automatically squash all commits into one in branch during the merge squash

### Git mv

git mv oldfile newfile 

   <--book151pd61, see also git restructure 

   <--- did a real one:  D:\Backup\PM1000\Billydev080107\MyEnabil\170424-1-AllScreenCopiesBPOT\210519-6-CSSCodeMove

​             S005 etc. 

​          

### Git Patch

<--there is exp could be put here

```
git format-patch <target_branch> -o <directory> 
      <---there are still many stuff to do like patch trouble shooting etc. from the above link
      <--sitting in current branch and compare with target_branch , output to a directory
```

​             <--from: https://devconnected.com/how-to-create-and-apply-git-patch-files/

```
git format-patch master
    <---this is real one, sitting in branch1 and targeting master 
```

```
git format-patch master -o patches
    <---result: patches/0001-add-a.patch
    <--- output to the patches directory,  directory is created automatically
    <---201010:  **better to have output folder out of the git tracking folder !!** 
```



git format-patch -1 <commit_sha>

​           <---patch for a specific commit  <--need test





git checkout feature

​          <---need check out target branch before apply

git am patches/0001-My-feature-commit-1.patch

​          <---apply patch

```
git am patches\0001-add-a.patch
      <--this is real one
Applying: add a
error: patch failed: 11021Exp020/src/main/java/billydev/App.java:6
error: 11021Exp020/src/main/java/billydev/App.java: patch does not apply
Patch failed at 0001 add a
The copy of the patch that failed is found in: .git/rebase-apply/patch
When you have resolved this problem, run "git am --continue".
If you prefer to skip this patch, run "git am --skip" instead.
To restore the original branch and stop patching, run "git am --abort".
      <----this is the msg when patch apply has conflict, need manully merge first 
```

git log --oneline --graph

​           <----check log after patch

### git pull



```
git pull --tags                   
     <---this pull remote tags to local  ( usually git clone remote does not include the tags ) 
```

```
git push origin "tagname"  
     <---we can also push the local tag to the remote
```

```
git pull origin          
     <---origin is the remote, when pull origin might have conflict if local changed made, then can do git stash 
```



### git pull --merge

​       <--need look into



### git pull --rebase

   <--used by Xiao, I guess is put the local dev stuff on top of the target branch

### git push      

​     <---use ctrl+shift+K in IDEA 



```
git push  -f 
        <---this one seem can remove the commit 
```

​             <---refer to: file:///C:/BillyInstalledApplications/Git/mingw64/share/doc/git-doc/git-push.html

​                  (or use git push --help)

​             <--https://stackoverflow.com/questions/30893040/git-remove-commit-from-history



### git push --delete origin  branch name

​         <---from: https://confluence.solium.com/display/DEV/2017/09/20/Stable+Development+Branch

​                      <---- I guess when feature branch merged, we can delete both local and remote ones 

### git push --set-upstream origin DEV-XXXX

​      <---from: https://confluence.solium.com/display/DEV/2017/09/20/Stable+Development+Branch

​                <--- explained: https://stackoverflow.com/questions/37770467/why-do-i-have-to-git-push-set-upstream-origin-branch

​                                  <---seems upstream is a remote branch mapping to local branch !!

### git push -u 

For every branch that is up to date or successfully pushed, add upstream (tracking) reference, used by argument-less git-pull(1) and other commands.   

<--from : file:///C:/BillyInstalledApplications/Git/mingw64/share/doc/git-doc/git-push.html



```
git push -u origin master                                   
       <---actual push,  ( I guess if in master branch, then last word master could be ingored)
```

```
git push -u origin branch1
            <--this will create remote branch
            <---201205-11021Qus032S010
```



### Git Rebase

```
git rebase master 
  <--the purpose of rebase on master is : branch catching up master changes after my check out
  <--should first checkout the branch which need rebase
  <--after run: it will show like: 

   First, rewinding head to replay your work on top of it...
======
Applying: add a
Using index info to reconstruct a base tree...
M       11021Exp020/src/main/java/billydev/App.java
Falling back to patching base and 3-way merge...
Auto-merging 11021Exp020/src/main/java/billydev/App.java
CONFLICT (content): Merge conflict in 11021Exp020/src/main/java/billydev/App.java
error: Failed to merge in the changes.
Patch failed at 0001 add a
The copy of the patch that failed is found in: .git/rebase-apply/patch

When you have resolved this problem, run "git rebase --continue".
              <-----in App.java will show things like <<<<<, then do manual merge
                   after manual merge done, git add App.java <---this means merge done!!
If you prefer to skip this patch, run "git rebase --skip" instead.
To check out the original branch and stop rebasing, run "git rebase --abort".
======||
edit xxxx
         <--can use IDEA to do that
git add xxx.java  
         <---tell git conflict fixed, this STEP is very important 
git rebase --continue 
    <----Qus044, 200804S001-S008
    <---another try: 20080907Sxxx
```

### Git Rebase -i

151pd152 <---change the commit using rebase -i

```
git rebase -i xxx
     <--during vi editting, just reorder then commits ( if not conflict should adjust the order automatically)
     <--151pd163
```

very good new  ideas

   <---book151pd141

11021expXXX do the squash, reorder, edit 

​                <--in rebase option there also "drop" so rebase -i should be the better replacement of cherry pick !! 

​                   so the view of "rebase -i " could be is , from like one branch to pick some of the commits and edit some of them, or 

​                    drop others 

### git reflog 

#### note: 

<--can find old branch and lots of things happened in my own side

<-----need to get used to "Head number"  0 is on the top  and HEAD@{0},HEAD@{1}....HEAD@{n},

151pd173  <---will list branch check out history as well 

151pd179 <--- in reflog we can see "reset history"  which not shows up in regular git log 

#### online info:

https://blog.csdn.net/songyuequan/article/details/83714695   [***]

​                <---list all scenarios which will be recorded in reflog, 

```
git checkout branchName ( 切换分支 ) ：moving from branch1 to branch2
git commit ( 提交 )
git reset commit （重置）
git checkout commit （签出某一个提交）
git merge （合并操作）
git pull (相当于 fetch + merge )
git pull : Fast-forward ( 没有冲突，快速前进)
git rebase （褊急）
git pull --rebase ( 相当于fetch + rebase )
git clone （ 初始化ref ）
```

​    can checkout the deleted commit: 

```
git reflog 
git checkout <reflog-Id> 
git checkout -b <newBranchName>
```

https://www.huaweicloud.com/articles/b72e99305a6ecbdd19ab52ddd9045935.html

​               <---list output format of reflog

https://blog.csdn.net/kongxingxing/article/details/75639767

​               <---also about restore delete commit,  mentioned one more way which is cherry pick

### Git remote 

```
git remote -v    
         <--list all remote stuff including fetch and push
         <---151pd94
```

```
git remote set-url origin   https://github.com/billydevInGitHub/30170.git
         <--reset remote url , this one should be useful 
```

<---151pd131 good !!

```
git remote add origin https://github.com/xxxxxx   
        <--ready to push to remote (normal case when we create a new one in github)
        <--need to create a repository in  remote site like github first 
```



```
git branch -a     
    <--list all branches including remote, if no remote, need to do a   "git fetch"    first  
```

```
git diff master  origin/master     
        <----once remote fetched, can compare local master to remote master branch ! 
```

####

​     <--we can have more than one remote and pull files as well

​      <---book151pd91 , need try very good 

​     <--lot of remote stuff book151pd92-104

git remote add origin https://github.com/billydevInGitHub/11031exp003.git

git push -u origin master 

### Git Reorder

book151pd161

### Git Repack

<--included in git maintenance  in MD feature center

```
git repack
Counting objects: 941, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (720/720), done.
Writing objects: 100% (941/941), done.
Total 941 (delta 168), reused 0 (delta 0)
      <--real run and can see the pack folder difference 210103S006, S007

git repack -d
Nothing new to pack.
Removing duplicate objects: 100% (256/256), done.
      <--real run 210103S008,

git repack
git repack -d

    <---syntax
    <---book151pd142
    <---good to learn and we need to observe the directory structure
```



### Git Reset

#### without file as parameter

```
git reset . 
  <--this will unstage the changes ( without file git reset does mixed, clean index, the same as unstage!!) 
  <--I guess as it does not have target, I guess use head as target
```

```
 git reset --hard tagname         
      <---this could avoid the duplicated files caused by TOD diskbackup !! 
          as this tag should be clean one !! <--yes, local untracked file will be removed
```

```
git reset --hard 8f4b  
     <---8f4b is the hash of commit 
     <--if you are in branch, this reset only affect branch 
```

```
git reset --hard     
    <---should reset to what you committed , like svn revert 
```

```
git reset --hard  head^     
         <---head^^  head^^^^ will roll back more versions !! 
         <----need test 
```

```
git reset --hard  head~2               
    <----this will quickly roll back to 2 versions, I guess do not need to type ^ stuff
    <---git reset --hard HEAD~  <--this is undo commit I think !!!!
```

```
git reset --mixed 0b7fa140d960543572e0d6d6e121e70929cf75b5           
             <---git reset has lots of stuff, the above did myself is reset index 
                    as well  the head ( as tag name is head, so head no change) 
             <---so basically git reset is reset to certain version of repository !! 
             <--21--06-30-1 S026, files staged could be reset head to unstage !!
```

​              refer to: (https://segmentfault.com/a/1190000006185954)

​               good link: https://segmentfault.com/a/1190000006185954

​              <--git reset是会修改版本历史的，丢弃掉一些版本历史

​               <-- can change the commit or index or local to certain



git reset --soft  target       

   <-- only change the head,    index and working dir no change; 

​    <---book 151pd84, because commit too soon use: git reset --soft HEAD^  

​     <--this should be useful , really need to try this and mentioned log stuff 



git reset --mixed target    <-- change head and indexed 
git reset --hard  target      <-- change head, indexed and working directory         

#### with file as parameter 

带文件参数的reset,上面讲到的git reset实际上不带参数的，如果带上文件参数，那么效果会是怎样的？

```
git reset  file.txt        
         <---can use file name ( with file name, seems only --mixed worked by default)
       HEAD不会动       <---can not understand this ???   
         <---it looks like reset the cached stuff from head ?? need confirm 
       将那个commit的snapshot里的那个文件放到Index区域中
       需要注意的是带文件参数的git reset没有--hard, --soft这两个参数。只有--mixed参数。
       <---so looks like uncommit the file ?? (not unstage file)<--------it should be unstage file !!!!
       <----this is actually undo add (or unstage file) !!!          
```



book151pd81-82

git reset your-file

​       <---different view, kind of move file out of the cache



### Git Revert

```
git revert 7d4ee
      <---will get into vi editor and edit the commit msg
      <-----undoes the changes from a previous commit, keep the history 
            是根据那个commit逆向生成一个新的commit，版本历史是不会被破坏的。 
      <---I guess git revert only affect the index/cached stuff
      <---SEEMS REVERT JUST REVERT ONE SPECIFIC COMMIT STUFF NOT OVERALL HISTORY
      <-- this is revert the latest change with no conflict, only need one step 
```

​         refer to:  https://segmentfault.com/a/1190000006185954 

​          referto:https://stackoverflow.com/questions/8358035/whats-the-difference-between-git-revert-checkout-and-reset



```
git revert 0761
error: could not revert 0761e22... a
hint: after resolving the conflicts, mark the corrected paths
hint: with 'git add <paths>' or 'git rm <paths>'
hint: and commit the result with 'git commit'
      <---we are reverting a commit before the latest, if latest has conflict with revert, need solve the conflict
      git commit -m "after revert"
               <--we must commit after revert 
```

151pd175

​    <--compare with rebase  -i revert can solve the problem after pushed to server

### Git restore 

```
git reset --hard HEAD~
         <--using HEAD~ not HEAD^
         <--after above use git reflog , can see 2 same hash ,then: 
git reset --hard  HASH_To_restore
         <--HASH_To_restore is go back to original before reset
         <--so "reset to before reset can restore, 2 reset =origin=restore"
         <---kind  of   a  b  xb , then  a  b xb  xxb  => a b 
```

151pd180

​    <--should restore the reset --hard



git restore --staged  Filename 

​         <---after git status ,  we can see changes to be committed will have this command to do the restore 



### Git restructure

book151pd64 <--create directory and mv file make sense

### Git RM

book151 pd52 <--need a try

git rm --cached  filename 

​    <---need try  151pd54

git rm -r --cached .    

​         <--remove whole and then git add .    new ignore file will work  

​             11021exp038-1-2-d 

### Git Show

<---need collect more git show scenarios

```
git show  

<---seems show the most recent changes or hash ??
<--seems the most recent committed stuff 
```

11021exp022 <---210502:  seems useful during conflict 

### Git Squash

```
git rebase -i xxxx  
   <----xxxx is the begin commit( if we squash b and c, it is a )
   <----check screenshots 200804S001-S005  Qus046
   <---example in "vi": 
           pick  xxxxx    a    <----this is previous commit 
                               <--we need pick one (as prevous commit) before squash
           pick  xxxxx    b    <--change the pick to s if you want merege b to a 
           pick  xxxxx    c    <---change the pick to s if you want to merge  c to a
      after change: 
           pick  xxxxx    a     
           s     xxxxx    b     
           s     xxxxx    c    <---type :wq will hint you to do the message editing!!       
```



```
git rebase -i 8f4b                                                                                Cannot 'squash' without a previous commit
     <--because we chose "s" before "pick" so git can not deal with beginning pickup

git rebase -i 8f4b
=======
It seems that there is already a rebase-merge directory, and
I wonder if you are in the middle of another rebase.  If that is the
case, please try
        git rebase (--continue | --abort | --skip)
If that is not the case, please
        rm -fr "D:/Backup/PM1000/Billydev080107/MyBLIBBPOTCode/11021/.git/rebase-merge"
                    <---this is where state is remembered
and run me again.  I am stopping in case you still have something
valuable there.
=====||

git rebase --abort
          <---now give up this squash         
```



```
git rebase -i 8f4b   
====
[detached HEAD 0f06726] b and c
 Date: Fri Dec 4 14:02:16 2020 -0700
 1 file changed, 2 insertions(+)
Successfully rebased and updated refs/heads/branch1.
====||    
      <---there are a,b,c,d commits, we pick all except c
          then we need b and c message  <--so b is the previous commit, it is important!!!
      <--- if we use a as "previous commit", others use s,then need merge "abcd" as commit msg
      <---so begin commit is the base, all squash thing on top of base
          previous commit is real begin commit to be merged;
```

<--book151pd157

<--very clearly stated!!

<--in vi/vim state, we can just replace "pick" with "s" and no need to type the whole "squash"

### Git stage lines

```
git add  --edit 
  <-- book151pd171
  <--good split changes into different commit 
  <--when we delete stuff during the editor, local will not be deleted!!
     so only delete the stuff that you do not want to commit now
     (you may want to commit them in the future to other branches as well)
```



### Git Stash

    In IDEA the menu of stash in in VCS menu not in git view ; 
      <---stash need at least one commit !! 
      <---shelf can do some local different "group" which stash must apply for all uncommitted changes; 
      <---patch created by shelf could only apply to IDEA I gues 
​      IDEA: might be better to use shelf : https://www.jetbrains.com/help/idea/work-on-several-features-simultaneously.html#shelve



```
==precondition==
D:\Backup\PM1000\Billydev080107\MyBLIBBPOTCode\11021>git pull   <--add conflicting in github
remote: Enumerating objects: 15, done.
remote: Counting objects: 100% (15/15), done.
remote: Compressing objects: 100% (6/6), done.
remote: Total 8 (delta 0), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (8/8), done.
From https://github.com/billydevInGitHub/11021
   fc3da13..b7b62c1  master     -> origin/master
Updating fc3da13..b7b62c1
error: Your local changes to the following files would be overwritten by merge:
        11021Exp020/src/main/java/billydev/Rebase.java
Please commit your changes or stash them before you can merge.
               <---now need stash 
Aborting
================

git stash    
Saved working directory and index state WIP on master: fc3da13 Update App.java
HEAD is now at fc3da13 Update App.java
   <----check Qus031
   <----when git pull origin, local changes made, use git stash to let it remember 
        see Qus31 
git pull
Updating fc3da13..b7b62c1
Fast-forward
 11021Exp020/src/main/java/billydev/Rebase.java | 1 +
 1 file changed, 1 insertion(+)
            <---now  git pull worked

git stash list   
stash@{0}: WIP on master: fc3da13 Update App.java
   <---- can see what stuff has been stashed !!

```

```
git stash apply
Auto-merging 11021Exp020/src/main/java/billydev/Rebase.java
CONFLICT (content): Merge conflict in 11021Exp020/src/main/java/billydev/Rebase.java
     <--when apply stash, we might see conflict 

git add .
    <--do the editing to resolve the conflict, then do git add confirming conflict merged
    
git reset --hard
    <--I guess we can reset or clean the workspace after stash merged failed
```

```
git stash save "new uncommitted stuff"
Saved working directory and index state On branch1: new uncommitted stuff
HEAD is now at 5a663a9 a b c d
          <---stash with message 

D:\Backup\PM1000\Billydev080107\MyBLIBBPOTCode\11021>git stash list
stash@{0}: On branch1: new uncommitted stuff    <---we can see the message
stash@{1}: WIP on master: 8f4bcdc Exp020: add 3
stash@{2}: WIP on master: fc3da13 Update App.java

git status
On branch branch1
nothing to commit, working directory clean
         <---better to check again after stash
```

$ git stash
$ git stash list
$ git stash pop

​       <---book151pd58, need a try



### Git stash apply



### Git Stash Drop and git stash list

11021exp035  210503 S003 

```
D:\Backup\PM1000\Billydev080107\MyBLIBBPOTCode\11021\11021Exp020\src\main\java\billydev>git stash list
stash@{0}: WIP on branch1: 6f07c3c g
stash@{1}: On branch1: new uncommitted stuff
stash@{2}: WIP on master: 8f4bcdc Exp020: add 3
stash@{3}: WIP on master: fc3da13 Update App.java

D:\Backup\PM1000\Billydev080107\MyBLIBBPOTCode\11021\11021Exp020\src\main\java\billydev>git stash drop stash@{3}
Dropped stash@{3} (036ffd36d187ce5cb30b7cbf5a17956f3d5c13b3)

D:\Backup\PM1000\Billydev080107\MyBLIBBPOTCode\11021\11021Exp020\src\main\java\billydev>git stash list
stash@{0}: WIP on branch1: 6f07c3c g
stash@{1}: On branch1: new uncommitted stuff
stash@{2}: WIP on master: 8f4bcdc Exp020: add 3
```

### Git Stash pop

​    <--see Git stash save

 11021exp035 <---210503  S001 , stashed stuff might conflict with each other 



### Git Stash save

​    <-- https://toutiao.io/posts/p280xh/preview

### Git Stash show 

<--can show content of stashed stuff  ,  11021qus047-2

### Git Stash show -p 

<--show details of stashed stuff ,  11021exp035   11021qus047-2

### Git Status

```
git status        

  <--- I guess this is the only chance to see the un-indexed file !! 
```



### git status --ignored 

​      from: google

### git  status -s 

​    <--s means short, give short status

​    <---or compacted format per 151

 <--151pd44,49 very good !

### git status -uno

<--this will ignore untracked files   see: https://stackoverflow.com/questions/11542687/git-how-to-ignore-all-present-untracked-files

### Git submodule

151pd184

​     <--need to position when we will use it 

### Git Switch

git switch master

git switch dev   <---both worked

https://www.liaoxuefeng.com/wiki/896043488029600/900004111093344 

### Git tag


git tag v1.4-lw                 

​     <---this is light weight tag , no further information

​     <---book151pd70 seems the  tag is for latest commit 

git show v1.4-lw

​          <----seems will show what commit (change related to this tag)

### git tag -a

git tag -a v1.4 -m "my version 1.4"   

​      <----add tag name and with message    check Qus08

git tag -a v1.2 9fceb02           

​         <---this is kind of later tag !!  

​         <---this one seems will create a new hash, but in IDEA seem bind to the same hash

​              but (see below)               in git show-ref --tags we can see a new hash

### git tag -l

git tag -l             

​                   <---just list tag with no more information 

​                    <---seems only in IDEA will show tag stuff together with branch and master names

git log --tags      <----?? seems not see any tag stuff 

git show-ref --tags

​        <---will give tag and hash reference 

​       <---from: https://stackoverflow.com/questions/1862423/how-to-tell-which-commit-a-tag-points-to-in-git

### Git tools --not git cmd

```
gitk --all --date-order
    <--it even has stash information and tag list and remote branches etc. 
    <--check 33808exp172_(02)_1
```

​      <--from: https://sethrobertson.github.io/GitFixUm/fixup.html#committed_really

### Git update-index 

see: https://morningspace.github.io/tech/inside-git-2/

### git write-tree 

https://morningspace.github.io/tech/inside-git-2/

### GitHub stuff 

#### fork

click the fork 
190413S007

#### do code change

clone to local 190413S010
push to remote  S015 toS021

#### pull request PR

(1) create new one:  190413S023
   or 200802S002
(2) Compare the changes S024
(3) Create pull request S025   
(4) Send pull request S026 

#### rep owner check PR

(1) Can see the pull request and fork 
(2) Merge the pull request through communication
   ~S036

​     <--this step need communication from both sides



## Okey Github Command

​      <--from: https://www.youtube.com/watch?v=Ku9_0Mftiic

### gh pr list

​            <---list all pull requests 

### gh pr list --state "all"





# 11031 Jenkins

## Questions

1.How Jenkins is related to docker ?

2.What is Jenkins ?

## Exp



### 11031exp003 spring boot 

#### Start: 

  get :8080/ride   get 8080/ride/{id}  post 8080/ride

  

​      <--this is app source code  to be built using gradle (exp006) or in jenkins using jenkins file (todo)

​      <--it has standalone git repository, will be checked out by 11031exp006

### 11031exp004 create jenkins docker and  run,  do the build through GUI

​      <--should be cloned to linux virtualbox     

​      <--use gradle docker plugin to build docker image and launch it,  it is Jenkins application running in docker

​      <--in Jenkins GUI use seedJob to create pipeline job

​      <--this jenkins will have seedJob which will again point to jenkinsDemo(from author) in github  

​                   <--I guess we change : createJobs.groovy  file 



### 11031exp005  create  jenkins docker and run, build spring boot application

​           <---similar to exp004 (forked from original author), change seedJob to point to jenkinsDemo(from billydevInGithub) ,

​          <-- in Jenkins GUI use seedJob to create pipeline jobs which including  spring boot app (written by author) 

​                 and build  and test

​            ( todo: this jenkins could be used to build the spring boot app to a docker image and push to docker hub, then further 

​             deploy to aws)

#### start

  (1)  do it when needed  ( need it for the first time)

​           go to linux VM 

​            clone project from: https://github.com/billydevInGitHub/11031exp003.git  to local

  (2)  in local linux vm: 

​            

​         

### 11031exp006 clone spring boot application and do the docker run and docker image push to docker hub

​       <---cloned spring boot application is from 11031exp003 (created and push to github as standalone repository)

​       <--then pull from docker hub and launch spring book application in docker with volume mapped

### 

# 11033 Travis

## Question:

1.What is main procedure of  Travis ?



# 11041 Docker


## Note

Docker~  resource Chinese (http://c.biancheng.net/view/3257.html)

Commands check   https://springbootdev.com/2017/11/10/docker-most-important-and-frequently-used-commands/
                       <---this is quick command check 
## Questions

1.Can we access like Linux interface through docker ?
2.What's difference between windows Docker and Linux Docker?
3.How docker deal with the difference of hosts?
4.What does container have ?  Or what does Docker image have?  
5.How docker share the host IO ? 
6.How powershell related to docker ?(per: https://containerjournal.com/2016/10/28/linux-vs-windows-containers-whats-difference/  seems we can access docker through powershell)
7.How docker manage image repository? Is it universal in the world ?  
8.Can docker construct 2 linux env on my windows? Can we use putty to connext to those machine?
9.How can we port our developed docker instance to other machines ?
10.Can we run a windows docker on linux machine ?
11.What is docker service used for ?
12.Docker vs Kerbenets ? 
13.Can the application in docker use software deployed in host ? Like Java on host ?
14.In Jenkins tutorial docker example, after we run the tutorial, why  maven repository in the container list ? Is the container registry shared by all containers ?
15.What is the most common application pattern of docker ?    
16.When we need BIOS to debug docker stuff ?
17.When docker and host have MAVEN installed at the same time, how can the command line interpreted ? like mvn, which one will run ??
18.How upload docker image to docker cloud ?
19.Sometimes, we need run the docker application to operate on local machine? how can docker share local folders? Or how to access the host resources??
20.How to import docker local images ( instead of from docker hub) ?
21.How to export docker images ? 
22.How to create a Java/MySQL docker ?  
23.Is there any this kind of docker available ?
24.Is there any need to deploy MAVEN/Jenkins into docker ? My understanding is deployed jar files to "java docker", is that correct ? 
25.What is docker stack or compose ?
26.What is docker interactive shell ?
27.What is docker?
28.Difference between docker run and docker service ?
29.Differene between docker service and docker stack?
30.How to use docker for Spring Boot application ?
31.Docker vs multi-container docker ?
32.Where is docker image files ?
33.How to remove docker inages ?
34.What is docker clean up stuff ?
35.How to access Docker container file system ?
36.How to check and setup  mysql db in docker ?
37.Does Mysql contaier in different composer share the same volumn?
38.How to fix mysql  version 5.7  start up failed due to previous installed version 8.0.13?
39.How to write Docker file ?
40.How to write composer.yml ?
41.How to do the composer for node.js ?
42.How to do a composer with multiple java applications?
43.Docker Swarm vs Kubnets ? 
44.What is online docker playground?
45.How to setup docker run ?
46.What is volume used for ?
47.How to setup composer file ?
48.How to setup docker for production?
49.How to access docker logs after docker container started and user relogin?
50.How to turn down the composer ?
51.Where docker store the image files ?
52.How is docker compared with kubernet?
53.How to install and run  oracle DB docker ?
54.What is docker.sock ?
55.How to operate on docker volume ?
56.How to setup docker daemon socket?

57.How is docker source  code and implementation ?

58.What is difference between docker registry and docker  repository ?

## Okey

### Build

```
docker build  -t java-app .                   
   <--11041exp001  
    <--see 181022-2 S002  
```

```
 sudo docker build --tag scg-demo-uaa .
     <--33808exp186
     <---tag should be image name 
     <-- D:\Backup\PM1000\Billydev080107\MyEnabil\170424-1-AllScreenCopiesBPOT\201106-1-33808exp186  S002
```

### Create

docker export $(docker create busybox) >busy.img

​             <---I can not figure out docker create ?????

### Compose 

docker-compose -f xxx.yml up 

​      <---pointout yml file 

```
docker-compose stop
      
docker-compose down 
docker-compose down -v   
           <---check 11041Qus50 with more details 
```



```
docker-compose build 
       <-----this is how to compose the docker stuff  check Exp004(1)
       <--see also: 190511-2-10092Exp002AWSSpringBootDocker S015 in aws docker run
```



```
docker-compose up
     <---33808exp187 keycloak ,docker-compose need a install
```

```
docker-compose up -d
     <---33808exp229
```

### Container and start

```
docker container ls -a               
            <----this is very important even can see exited containers 
             docker ps                
                 <---check the runnning process of containers 
             docker rm ef                       
                 <---- remove the container, ef is container id
```

​              from:  (https://juejin.im/post/6844904016086827016)

```
docker start d582226a3acc          
        <---- the next day only need start the container
docker stop CONTAINER_ID          
docker stop 34e1de1c6c41           
            <--the real action 
            <--container is sth that all launch param are setup
```

 <-- from (https://stackoverflow.com/questions/35122773/single-command-to-stop-and-remove-docker-container)

```
docker start 8ae6e91fcebd
        <--8ae... is container id 
        <--201125 33808exp181 S001
```

```
docker start 6c719cfdcfc8
            <---33808exp220 , 6c719cfdcfc8 is postgres container id 
```

### cp

```
docker cp   
     <---seems this could copy from inside docker to host 
     <--- this should be useful if we need stuff from inside docker images 
```

​            (https://juejin.im/post/6844904016086827016) 

DockerFile

11031exp003   copy built jar file to docker internal root and launch java

33808  check DockerFile Key there

### exec

<--either /bin/bash or /bin/sh

```
docker exec 
          -it 
          Oracle-DB-36000exp023             <---container name 
          bash 
          -c "source /home/oracle/.bashrc; sqlplus /nolog"    <---36000exp023
```



```
docker exec -it my-openldap-container sh   
```

​        <--- from (https://blog.csdn.net/liumiaocn/article/details/83719568)





```
docker exec -i -t 097169c5ef05 /bin/sh
         <---from 201119 33808exp195 S021  worked
```

```
docker exec -i -t 8ae6e91fcebd bin/bash
        <-- 8ae6e91fcebd is container id
        <-- from 201124-33808exp181 S006
```

​       <--get into container from (https://juejin.im/post/6844903970545090574)



```
docker exec -it   postgresql-container  bash
          <---33808exp220  container id is: postgresql-container 
              run part has the link
         
```



### Images: 

docker images 

​        <--- to list current images, need start virtual box server first; 

```
docker images -a          
         <-----this will list all images  
```

```
docker image rm 75835a67d134 2a4cca5ac898      
docker image rm -f b7753b5d1711 f81dd8c39a58 990386cbd5c0    
        <--once used by container must force remove it as images are attached to container

docker image rmi   xxxxx   
        <--this is really reclaim diskspace 
```

```
docker pull rabbitmq:3.8.9-management 
    <--51302Qus005
```

​           from:(https://juejin.im/post/6844903970545090574) 

​           also check: (https://hub.docker.com/_/rabbitmq)

```
docker search rabbitmq   
```

​         <-- 51302Qus005  from:(https://juejin.im/post/6844903970545090574)

​         <---this is image search

### info

<---about docker information

docker info|grep Storage
 Storage Driver: overlay2



docker info |grep Containers
 Containers: 22

​         <---I guess this is quicker than  docker container ls -a



docker info|grep -i image
 Images: 36

### Inspect: 

```
docker inspect --format '{{ (index (index .NetworkSettings.Ports "5672/tcp") 0).HostPort }}' rabbitmq_container
docker inspect --format '{{ (index (index .NetworkSettings.Ports "5672/tcp") 0).HostPort }}' 350d344abd1e
   <---this is real command 
```

​          <-- from: https://stackoverflow.com/questions/42137216/i-cant-connect-to-rabbitmq-server-port-5672                            

```
docker inspect ea93faa92337
       <---ea93..  is image id !!
       <---from 201119 33808exp195 S019  worked
       <--we can find cmd is: /bin/sh
           also see volumes:  /data   /datalog, /logs etc. 
```

 

### Logs:

```
docker logs  350d344abd1e |less   
       <---this is the best one 350d344abd1e is container id 
```

```
docker logs -f 容器ID
    <--this one seems can not move the cursor
    <---should  auto push to the console ??
```

​              <--from (https://juejin.im/post/6844903970545090574)

```
tail -f `docker inspect --format='{{.LogPath}}' containername`
        <---this one might have permission issue
```

​        from (https://stackoverflow.com/questions/41144589/how-to-redirect-docker-container-logs-to-a-single-file)

### Login:

### network

```
root@billy-VirtualBox:/home/billy/blib/33808# docker network ls
NETWORK ID          NAME                DRIVER              SCOPE
e83f44d3e560        bridge              bridge              local
cd906157ca40        host                host                local
c0e3c268ec84        keycloak_default    bridge              local
dfc05948f54e        minikube            bridge              local
cdf0f76bd0e2        none                null                local
         <---the other bridges are keycloak and minikube!!!!
```

<---can create a network, Nana video 1:16:49  11041Qus027_(02)_1

docker network create groupnet

  





### ps

<--list running containers

see: 190512-1  S001 aws use docker -ps to see processes 







```
docker ps -a
    <--33808exp220  210125 S003
        should see all running containers (running or not running)
```



### Pull: 

```
docker pull redis
     <--33808exp214 210108S002
```

```
docker pull postgres
     <---33808exp220 
```

```
docker pull mysql/mysql-server:8.0
          <--38000exp015
```



### push

should do: docker login first, then docker push  <--need  a try  

<--from nana video: 2:08:30 she uses aws ecr login  2;11;52 to push with fistly tag  the domain name

<--I think we also  have a gradle dockerPush in 11031exp006 210127 

### Run:

```
docker run --help     <---to get the help hints   
           -d         <--in detached mode 
           -it          <---36000exp023
           --name       <---36000exp023 should be container name
            -p xxx:xxx  <--the first one is host port 
            -e  or -env  <--env variables which should be important !! 
           --net   xxx  <--join the created network!!
```

​     

```
docker run   "image_name"           
             <---do not know that it is about ????  docker run   -p 6379:6379 redis
```

```
docker run   --rm   -u root   -p 8080:8080  -v jenkins-data:/var/jenkins_home 
      -v /var/run/docker.sock:/var/run/docker.sock   -v "$HOME":/home  jenkinsci/blueocean
           <--- -v should map volumn,    11031Tut02(01) 
           <--- --rm    Automatically remove the container when it exits
           <--210212: I guess -v the first folder is local or host machine folder
```

```
docker pull rabbitmq:3.8.9-management
       <---33808exp156
docker run --name rabbitmq -d -p 15672:15672 -p 5672:5672  b876c920f541                       
    --name指定了容器名称
    -d 指定容器以后台守护进程方式运行
    -p指定容器内部端口号与宿主机之间的映射，rabbitMq默认要使用15672为其web端界面访问时端口，5672为数据通信端口
    <---these mapping or settings will be remembered in container 
     <---33808exp156 , the last should be image id
```

​          <--- from (https://juejin.im/post/6844903970545090574)

 

```
docker run -d --name mynginx -p 80:80 231d   
     <---231d is image id
```

​                 (https://juejin.im/post/6844904016086827016)

tag::tagname[]

```
docker run --name my-openldap-container --detach osixia/openldap:1.2.2  
                 <--- detach or -d means running in background
```

​                   (https://blog.csdn.net/liumiaocn/article/details/83719568)

```
docker run  --name my_openldap_container -d  osixia/openldap             
                 <--actual run command 50220Qus001 
```

```
docker run -p 389:389 --name myopenldap --network bridge --hostname openldap-host --env LDAP_ORGANISATION="mylitboy" --env LDAP_DOMAIN="mylitboy.com" --env LDAP_ADMIN_PASSWORD="ldap123" --detach osixia/openldap
                         <---setup LDAP users 
```

​                          from (https://blog.csdn.net/mylitboy/article/details/88865428)



```
docker run -p 8080:8080 billydev/spring-boot-api-example:0.1.0-SNAPSHOT
               <---11031exp006

docker run   --rm     -v /home/billy/blib/11031/11031exp003/pulledDockerImageTest:/log    -p 8080:8080  cef842963dbc
             <--11031exp006  
               
```

 docker run -it --cpu-period=100000 --cpu-quota=20000 ubuntu /bin/bash

​          <---11041Qus057_(01)_3 <--limit cpu usage 

```
docker run --rm -p 27017:27017 --name mymongodb  mongo
            <---33808exp110     
```



```
docker run  -p 6379:6379  --name myredis redis
       <--33808exp155  210108S003
```



root@billy-VirtualBox:/home/billy/blib/33808# docker pull rabbitmq:3.8.9-management



```
docker run --rm -p 389:389 --name myopenldap --env LDAP_ORGANISATION="billydev" --env LDAP_DOMAIN="billydev.com" --env LDAP_ADMIN_PASSWORD="123456" --detach osixia/openldap
          <---33808exp181
          <---try my own , did not use hostname and network bridge   
```



```
docker run -p 389:389 --name 33808exp181LdapContainer --network bridge --hostname openldap-host --env  LDAP_ORGANISATION="MyCompany Inc." --env LDAP_DOMAIN="mycompany.com" --detach osixia/openldap
                  <---For 33808Exp181 and it will create container that can be reused 
                  <---201124-33808exp181 s001, pull again

```

​                              

```
docker run -p 389:389 -v  /etc --name 33808exp181LdapVolContainer2 --network bridge --hostname openldap-host --env  LDAP_ORGANISATION="MyCompany Inc." --env LDAP_DOMAIN="mycompany.com" --detach osixia/openldap
      <-- 33808exp181 201206  
      <--- use default volume , then use : 
      docker volume ls                            <--list volumes
      docker volume inspect c5cb42d3016d530...    <--c5c.. is volume name 
```



```
 docker run -p 8090:8090 0957c653cab3
       <--33808exp186  start uaa from image
```




```
docker run --rm -p 27017:27017 --name mymongodb --detach mongo   
            <---rm should remove container after run
            
docker run  -p 27017:27017 --name mymongodb --detach mongo   
            <---from 33808exp204 
```

​              

```
docker run --rm -p2181:2181 --name myzookeeper  zookeeper
            <---zookeeper is repostiory id
            <---from 33808exp195  201119
```



```
docker run --name postgresql-container -p 5432:5432 -e POSTGRES_PASSWORD=123456 -d postgres
            <---start database 
docker run --rm -p 5050:5050 thajeztah/pgadmin4
            <---start admin 
            <---33808exp220    
```

​                        <---see also: https://dev.to/shree_j/how-to-install-and-run-psql-using-docker-41j2#:~:text=Connecting%20to%20the%20PSQL%20server%20via%20CLI%20%3A&text=Run%20the%20below%20command%20to,p%205432%20%2DU%20postgres%20%2DW                     

​          

```
docker run -p 9090:9090 -v /home/billy/blib/33808/33808exp235/prometheus.yml:/etc/prometheus/prometheus.yml prom/prometheus
               
docker run -d -p 3000:3000 grafana/grafana
          <---33808exp235 we need 2 dockers 
```

see  36000exp023 <---setup Oracle database , use --name and -it stuff 

```
for N in 1 2 3
do docker run -d --name=node$N --net=groupnet --hostname=node$N \
 -v $PWD/d$N:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=mypass \
 mysql/mysql-server:8.0 \
 --server-id=$N \
 --log-bin='mysql-bin-1.log' \
 --enforce-gtid-consistency='ON' \
 --log-slave-updates='ON' \
 --gtid-mode='ON' \
 --transaction-write-set-extraction='XXHASH64' \
 --binlog-checksum='NONE' \
 --master-info-repository='TABLE' \
 --relay-log-info-repository='TABLE' \
 --plugin-load='group_replication.so' \
 --relay-log-recovery='ON' \
 --group-replication-start-on-boot='OFF' \
 --group-replication-group-name='aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee' \
 --group-replication-local-address="node$N:33061" \
 --group-replication-group-seeds='node1:33061,node2:33061,node3:33061' \
 --loose-group-replication-single-primary-mode='OFF' \
 --loose-group-replication-enforce-update-everywhere-checks='ON'
done
        <--38000exp015
```

####     -w  

```
 
dansible-playbook() {
  git_parent=$(cd $(git rev-parse --show-toplevel) ; cd .. ; pwd)
  docker run --rm -v "${git_parent}":/workspace -w="/workspace/jenkins-config/ansibleProvisioning" -it yyc-dbdev01.solium.com:5000/ansible:latest "ansible-playbook $*"
}
```

​          <--from: https://confluence.solium.com/display/DEV/Using+Vagrant+and+Ansible+for+Jenkins

### rm

docker rm containerID  

### rmi 

docker rmi imageID

   <--delete image 

### stop 

see container part

### tag

<---see Nana video : 2:11:20  , will make image copy and create a anothe tag version

### Volume

```
docker volume ls   
    <---- will list:  DRIVER   VOLUME NAME   local  jenkins-data 
    <--from 11031Tut02(01) S018
```

```
docker volume inspect xxxx   
         <-----will give the details of docker volume with local folder name!!
          <--from 11031Tut02(01) S019  , mount local(host) folder to docker system mount point !!!
```



#### 

# 11061 Gradle

## Note

API reference (https://docs.gradle.org/current/dsl/index.html)

## Questions:

1.Compare Gradle with MAVEN?
2.How to look into build.gradle file ?

3.What is difference between assemble and build tasks? 

## Okey Command Line

   <--gradlew is the wrapper of gradle, so we basically deem them the same here in the ordering

### gradlew build docker dockerRun 

```
./gradlew build docker dockerRun
       <---11031exp004 210126S003
```



### gradle tasks --all 

```
gradle tasks --all
      <--will list all task available in this folder
```

## Okey Dependency scope

​    <---https://blog.csdn.net/zh452647457/article/details/108848448



## Okey Life Cycle 

   <---https://blog.csdn.net/zh452647457/article/details/108848448

# Gradle run gradle

# 11071 Jira

## Questions

to be added from BLIB

6.What is the advantage of JIRA? 



# 11073 Confluence page

## Questions

1. How to do daily editing ? 

# 11081 Kubernetes

## Note

### Log location: 

minikube logs 

​         <---lots of information since minikube start up including version, containers, 

​               some cpu stuff, iptable stuff, health check, <--I guess we need look into source code 

## Questions

1.What is kubernetes?
2.Kubernets vs Docker, swarm and composer ?
3.How to install kubernetes on Linux ?
4.What is kubelet command for ?

5.How to understand Kubernetes from source code view ?

6.What is helm and how to make own helm? 

## Exp

### 11081exp003 <---deploy docker images to kubernete through helm charts

## Exp

### 11081exp001  Minikube

todo: 

https://docs.bitnami.com/kubernetes/get-started-kubernetes/

https://minikube.sigs.k8s.io/docs/handbook/config/

​               <---210331 this one looks good 



#### start

```
minikube start --driver=docker --extra-config=kubeadm.ignore-preflight-errors=NumCPU --force --cpus 1
         <---11081exp001 210208#S029        
         <---do not use root to start, use billy
```

#### version

```
billy@billy-VirtualBox:~$ minikube version
minikube version: v1.17.1
commit: 043bdca07e54ab6e4fc0457e3064048f34133d7e
      <---not sure how it is related to committed git version?
```



## Okey   <---- need arrange by all K8s Commands

​       <---currently it is arranged by functionality 

​       <----need add more commands from physical paper 

​        <--then do the md feature center stuff !!

##### kubectl cluster-info

```
billy@billy-VirtualBox:~$kubectl cluster-info
Kubernetes control plane is running at https://192.168.49.2:8443
KubeDNS is running at https://192.168.49.2:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.
     <--11081exp003  210331
```



##### create configMap

```
kubectl apply -f mongo-configmap.yaml
configmap/mongodb-configmap created
         <--11081exp001#210209
```



##### create secret

```
kubectl apply -f mongo-secret.yaml
      <--11081exp001#210209
```



##### create service 

```
kubectl apply -f mongo.yaml
deployment.apps/mongodb-deployment created
service/mongodb-service created
       <--create both service and deployment
       <--11081exp001#210209
```

##### describe 

```
kubectl describe service mongodb-service
Name:              mongodb-service
Namespace:         default
Labels:            <none>
Annotations:       <none>
Selector:          app=mongodb
Type:              ClusterIP
IP Families:       <none>
IP:                10.98.203.250
IPs:               10.98.203.250
Port:              <unset>  27017/TCP
TargetPort:        27017/TCP
Endpoints:         172.17.0.5:27017       <--can get pod ip which is ClassB
Session Affinity:  None
Events:            <none>
     <--11081exp001#210209
```



##### edit 

kubectl edit service/b11031-service

​          <---33808exp220  210211S006

##### get

###### kubectl get all 

​      <--will list pods, service and deployments, not ingress 

###### kubectl get ingress

```
billy@billy-VirtualBox:~$ kubectl get ingress
NAME                   CLASS    HOSTS          ADDRESS        PORTS   AGE
b33808exp222-ingress   <none>   billydev.com   192.168.49.2   80      32d
```



###### kubectl get nodes 

```
billy@billy-VirtualBox:~$ kubectl get nodes
NAME       STATUS   ROLES                  AGE   VERSION
minikube   Ready    control-plane,master   18d   v1.20.2
```

###### kubectl get pod --watch

​       <--maybe get the status update and seems it will update by itself 

###### kubectl get pod -o wide

```
kubectl get pod -o wide
             <---extra info is : ip and node
NAME                                                       READY   STATUS    RESTARTS   AGE     IP           NODE       NOMINATED NODE   READINESS GATES
b33808exp222-wrap11031exp003-deployment-859d749697-d9fn9   1/1     Running   3          4d23h   172.17.0.3   minikube   <none>           <none>
        
mongo-express-78fcf796b8-5blsl                             1/1     Running   11         17d     172.17.0.6   minikube   <none>           <none>
mongodb-deployment-8f6675bc5-dw6tp                         1/1     Running   9          17d     172.17.0.8   minikube   <none>           <none>
```

###### kubectl get service

```
billy@billy-VirtualBox:~$ kubectl get service
       <---looks ip address, external ip(??)
NAME                                  TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
b33808exp222-wrap11031exp003service   LoadBalancer   10.96.83.162    <pending>     8080:30001/TCP   4d23h
kubernetes                            ClusterIP      10.96.0.1       <none>        443/TCP          18d
mongo-express-service                 LoadBalancer   10.97.81.88     <pending>     8081:30000/TCP   17d
mongodb-service                       ClusterIP      10.98.203.250   <none>        27017/TCP        17d
```



##### log

```
kubectl logs mongo-express-78fcf796b8-5blsl
Waiting for mongodb-service:27017...

Welcome to mongo-express
------------------------

Mongo Express server listening at http://0.0.0.0:8081
Server is open to allow connections from anyone (0.0.0.0)
basicAuth credentials are "admin:pass", it is recommended you change this in your config.js!
Database connected
Admin Database connected
  <--11081exp001#210209
```

##### version

```
billy@billy-VirtualBox:~$ kubectl version
Client Version: version.Info{Major:"1", Minor:"20", GitVersion:"v1.20.2", GitCommit:"faecb196815e248d3ecfb03c680a4507229c2a56", GitTreeState:"clean", BuildDate:"2021-01-13T13:28:09Z", GoVersion:"go1.15.5", Compiler:"gc", Platform:"linux/amd64"}
     <--GitVersion seems different from minikube version, this should be kubernetes version
     
Server Version: version.Info{Major:"1", Minor:"20", GitVersion:"v1.20.2", GitCommit:"faecb196815e248d3ecfb03c680a4507229c2a56", GitTreeState:"clean", BuildDate:"2021-01-13T13:20:00Z", GoVersion:"go1.15.5", Compiler:"gc", Platform:"linux/amd64"}
```



# 11085 Prometheus

## Questions: 

1.What is prometheus ?

## Exp

seems there is spring boot 33808exp to be added here 

# 11091 Ansible

## Questions: 

1.What is Ansible ?



# 12001  Team

## Data

Join team <---in left bottom,  join or create team !! 

# 12005 Zoom

## Data

Do annotation: more options, annotation can add stuff on the screen ; 

Recording:  <--seems participant need be granted before recording !! 

## Questions

# 30000 Java 

## Note

### API

Java Core~ API class diagram - very good (http://www.falkhausen.de/Java-8/index.html)

Java Core~ API doc 8.0 (https://docs.oracle.com/javase/8/docs/api/)

### Java Core Blog

Java Core Blog Alibaba (https://www.javaweb.shop/article/310.html)
        <--there are many books to download

Java Core Blog Clawhub (https://clawhub.club/page/13/)

Java Core Blog Clawhub  Algorithm and data structure  (https://clawhub.club/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/)
                         <--this is our 30012Exp037-042 ...on going 
Java Core Blog cnlogs with Spring source code read (https://www.cnblogs.com/Java-Starter/tag/SpringMVC/)

Java Core Blog JavaBoy (http://www.javaboy.org/)

Java Core Blog JavaBoy vhr (https://github.com/lenve/vhr)

Java Core puke spring source code overall diagram (https://blog.csdn.net/q649381130/article/details/88600021)

### Java Core Developer's guide (Oracle)  

Java developer's guide (https://docs.oracle.com/en/database/oracle/oracle-database/19/jjdev/using-JMX.html#GUID-FDE7091A-893B-4776-8ACB-036196C16CC8)

### Java Core Versions 

Java Core Version wiki java history (https://en.wikipedia.org/wiki/Java_version_history)

### 

# 30012 Algorithm

## exp

### 30012exp001-exp50   

# 30014 Data Structure

## Questions

1.What is overview of key data structure of application ?
2.What is skip list ?
3.How hashMap is implemented?

4.How about tree data structure ?

## Exp

### 30014exp001- exp009   not that good code



# 30040 Java Code convention

## Note

Java Code Convention Ali conventions (https://github.com/alibaba/p3c)

Book144 

## Questions

1.How about variable name convention ? How about the underscore stuff ?
2.How about package name convention ? Can we have underscore in it ? 
  How about lower case or upper case ?

3.Can we use tips to collect all the main conventions and put in the example ?
So we can understand all tips(gains) and easily find them in the example.  

4.What is best practice of code deprecation ?

## Exp

### 30040exp001 line continue

### 30040 Collection



# 30050 Identifier and literal

## exp

### 30050exp001

# 30062 Command line arguments

exp001 <--command line setup

# 30110 Data type and conversion

Questions: 

1.How to store and processing financial number ? 

## exp

### 30110exp001 to 30110exp028  <---good OCP examples



# 30120 Operator  and calculation

## exp

### 30120exp001 to exp011 calcuation example for OCP including bit ops

# 30130 String ops

## exp

### 30130exp001 to 30130exp008 OCP string ops good



# 30140 Date and Time 

## Note

Epoch time converter (https://www.epochconverter.com/) 

​        <--Epoch has seconds or milliseconds

## Questions:

1. How to convert java datatime to mysql timestamp ?
2. Is epoch always UTC or GMT time zone ?
3. Current local time or String to DB timestamp ?
4. How timestamp display with different time zone ?
5. How to do the calculation based on Timestamp ? 
6. How to do the calculation based on Calendar ?
7. How to do string to date and calendar and milliseconds convertion?
8. Why it was difficult before in timezone stuff ?
  9.How to do the JDBC operation for java.time package?
  10.How is locale related to timezone ?

## Exp

### 30140exp001 to exp009  OCP date ops

### 30140exp010  <--need to add code from original source 

### 30140exp011 to 022  <--new code need to analysis

# 30150 logical ops

### 30150exp001 to 006

# 30152 compare and relational ops

### 30152exp001 to exp005

# 30160 IO Overall and formatting

## Node: 

UTF-8  <--BPOT2098  TODProperties use @PropetySource , its encoding 

## Questions

1.What is the common IO combinations ?
2.What is media type for byte stream and char stream?
3.What is basic IO class for the media ?
4.Why and when we need byte stream IO wrapping ?
5.Why and when we need char stream IO wrapping ?
6.What are all encoding issues in java io ? <---this questions is actually about charset although it is an encoding
7.What is the typical memory operations ?
8.When do we have flush and how to do that ?
9.Why PrintWriter is special ?
10.Why scanner is special ?
11.How does app interact with char stream ?
12.How does app interact with byte stream ?
13.What is difference between binary file and char file ?
14.What is the difference between char stream output API method and  byte stream output method?

15.What is Unicode ?

16

## Exp

### 30160exp001 

###         to exp010  

### 30160exp005  all data type output to String , using format 

​        <------can control decimal point position,  can convert ascii to char 

### 30160exp006 advanced format 

​          <--can repeat value in many places

### 30160exp007  negative and alignment

### 30160exp008  control width and precision

### 30160exp010  output character and object etc

​                    <--look deep into it might be useful 

### 30160exp011 <--why to answer questions of 30660qus001 charset vs locale 

​                <---actually as long as  charset is "full charset like Unicode " and supported by OS  then should support all locales , 



# 30170 Collection

## exp

### lots of split examples  <--keep these historical code for now 

### 30170exp025 Stream 

### 30170exp026 Multi-Value map

<---from later on use exp seriese 





# 30200 Util classes

### ???? need to think about it

#### Random 

```
Random rand = new Random();
int randomNum = rand.nextInt(greetings.size());    <---pass aray size to nextInt method
return greetings.get(randomNum);
             <---from 33808exp193
```

# 30280 Regex

## Note

temp: requreiment: 

   how to do  grep  Waiting but not Timed_waiting in less or vim ???

<---need to collect glob as well !! 

## Exp

### exp001 to exp030 OCP examples <---to be added one by one

###30280exp002  SSN and href match example

### 30280exp015  Ip Address 





need wrap the following into Exp ????

```
'[a-z]([-a-z0-9]*[a-z0-9])?'

The Service "11031-service" is invalid: metadata.name: Invalid value: "11031-service": a DNS-1035 label must consist of lower case alphanumeric characters or '-', start with an alphabetic character, and end with an alphanumeric character (e.g. 'my-name',  or 'abc-123', regex used for validation is '[a-z]([-a-z0-9]*[a-z0-9])?')
```

### 

# 30310 IO Reader

## exp   <--need rename package names

### 30310exp001 to exp003  <---has mark method, pushback, read and type

# 30311 IO Writer

## exp

### 30311exp001 to  exp004 <---has buffered writer,  unicode writer stuff 

# 30312 IO InputStream 

## exp

### 30312exp001 to exp002 <--input stream read buffer and pipedinput stream stuff

# 30313 IO Output Stream

## exp

### 30313exp001 to exp002 <--write outstuff 



# 30330 Input and parsing

## exp

### 30330exp001 to exp005 <--using scanner string tokenizaer and stream

5 examples code 

30330exp005 <---use stream to parse and process files 

# 30332 Data Input and serialzation

### 30332exp  <--4 examples here with serialization

# 30333 Data output

### 30333exp001 

# 30350 ExcelProcessor

## exp 

### 30350exp001 <-- excel processor for MIC

  currently in : D:\Backup\PM1000\Billydev080107\wsCW7\30350_Exp001_AP_MIC_Excel_Processor

# 30660 I18N 

​     <---210531: actually I18N does not have encoding issue !! 

## Note



## Questions

1.What is relationship between locale and charset ? 

## Exp to keywords

### 30660exp001 <--just list locale

### exp002 

###    to exp019  <---custom date patterns, resource bundle number format





# 30780 Threads

## Questions:

1.How to start java as a service
2.How to design multiple threads applications
3.Blocking queue vs database polling?
4.Blocking queue vs queue?
5.advantage of message queue?
6.Relationship between sync, blocking queue and wait/notify ? How to position them?
8.Difference between Synchronized block with wait/notify and without them?
9.How to help BPOT2114 core implementation?(1)
10.Application patterns of multiple thread programming?
11.How to check the status of another thread ?
12.How to cancel another thread within thread ?
14.Will the "child thread" die when "parent thread" die?
15.How to implement BPOT2114 new engine model ( no RabbitMQ and only one shared Queue) 
17.How merge scheduler thread into BPOT2114  new engine 
18.How http listener thread merge into POT2114 main engine?
20.How to setup the overall prototype of core engine ?
21.How to setup the overall prototype of core engine with detail for BPOT2114?
23.Difference between wait and notifyall ?
24.When do we need wait ?When we need notify?
25."While loop inside wait or notify like Exp013 " vs "while loop inside just notify from Exp013" , what is difference ?
26.How can we make sure that all those are waiting could be notified ?  Do we need a thread doing loop and sleep and notify ?43. How to debug multiple-threads program ?
29.When conditional lock can help ?
31.What is typical code pattern for BPOT2114 core engine ? why
32.How can we build the core engine for BPOT2114 after wait/notify research Q23 to Q31?
34.Do we need new SocketChannel and each message one thread to make network connection non-blocking?
35.What is the model of socket and thread programming ?
37.Can multiple thread share the same socket at the same time ?
40.Can multiple thread share the same socket at the same time ?
41.What is CAS and what is its advantage ?
42.How to wait a list of Futures ?
43.How to debug multiple-threads program ?
44.When do we need AtomicInteger ?
45.What is ExecutorCompletionService?
46.What is threadLocal and what is it used for ?
47.Why we need concurrent collections ?
48.What are the most important concurrent collections?
49.What exactly is trhead safe ?
50.What is DCL ?
51.How to use locker and synchronizer examples ?
52.What are the thread pool states?
53.How Executors create thread pool? What parameters are needed ?
54.How to check the source code of execute method in thread pool ?
55.How CAS worked in Java ?
56.How AtomicInteger is implemented ?
57.How AQS is implemented ?
58.How to use countdown latch ?
59.How to compare lock and synchronized ?

60.What is completableFucture ?

## Exp (some in : D:\Backup\PM1000\Billydev080107\TempDev )

<---need add exp001 commen  ts here .....

### 30780exp013 <--use synchronized , wait and notify 

### 30780exp014 <--use synchronized , wait and notify

### 30780exp020 <---every thread has semaphore and ac

### 30780exp021 <--one counter down many threads are waiting 

### 30780exp023  <---every thread hold barrier, as long as wait people reached number, theads start 

### 30780exp026 <--use Priority blocking queue to communicate between threads

### 30780exp027 <---simple one, we shall use more complicated one like optimistic lock

### 30780exp028 <---how to use lock and unlock pattern

### 30780exp029 <--reentrant lock with condition

### 30780exp030 <---conditional lock with blocking queue

### 30780exp031 <--create a customized thread pool (one Task submit create 3 threads in the pool , now deepen the understanding)

### 30780exp032 <--singleThreadExecutor , submit callable and return Future

### 30780exp033 <---FixedThread pool, split into like 10 range and give to 10 thread,  and sum up when get result from future 

### 30780exp034 <---just mimic thread factory concept by adding thread name, need more complex examples

### 30780exp035  <---timeUnit 

### 30780exp036 <--Forkjoin pool  with return value

### 30780exp037 <--forkjoin 

### 30780exp038  <---daemon thread

### 30780exp039 <---readwrite lock to increase concurrency

### 30780exp040 <---interrupt sleep thread and catch exception

### 30780exp041 <---ScheduledExecutorService call schedule method

### 30780exp042 <-- release lock only when method is done 

30780exp046  <--consumer trigger ssh call 

30780exp062  <--engine for bpot2114



# 30820 Network Programming

## exp

### Exp examples here

### 30820Exp012   <---Scanner and User input

​             

# 30840 File and Directory Ops

see also Resource in Spring 

## Exp

### 30840exp001 to30840exp034  OCP examples  <--need add exp one by one

### 39840exp018, 020,030,031,032,033,034 <--examples using glob see 121pd271 a table

# 



# 30860 Xml processing

## exp

30860exp001 <-- tableau seems not much info

# 30862 JSON

## exp

### 30862exp001 simple json

### 30862exp002 jackson generic collection

### 30862exp003 tree model

### 30862exp004 Complicated JSON

30862exp005-exp033 for BPOT more complicated ones

​        (from: D:\Backup\PM1000\Billydev080107\wsCW7 )



# 30870 SOAP WebService

## exp

### 30870exp001  Spring Boot SOAP web service

### 30870exp002  ?? not find the doc

# 30872 Restful WebService

## Questions

1.What is difference between controller API ( End point) , Service API and DAO API ?
2.Difference between  RESTful API and simple http get and post requests?
3.When DAO method need return object ?
4.Can DAO methods call another DAO method ?
5.How about the API return object ?
6.How REST WS deal with stream ?
7.What is standard for REST API as parameter?
8.What is graphQL ?
9.What is concrete details of OAS?
10.For REST API implementation, is there any difference between Spring Boot and Node.js?
11.Is REST API related to asynchorous, Promise , Async/await?
12.Will node.js non-blocking machenism be reflected in REST API ?
13.The method THEN itself return a Promise ?
14.How to draw a diagram of 73066Exp044,Exp039,Exp032 fakebackend ?
15.What is the relationship between Promise and Async ?
16.Why fakebackend could implment chained Promise? Is it because of the local implementation?
17.Can Promise be put within REST API ?
18.When shall we use then ? (see Qus13, will then auto wrap a Promise?) 
19.Where are the method signature of Promise/then functions ? ( including other functions like map and reduce)
20.What is the difference between Promise consumer and provider ?
21.What is chained Promise used for ? What is the advantage ?
22.What is advantage of async and  await ?
23.Do we have thing more about Promise ?
24.How many ways javascript can call REST webservice ?
25.Promise has two results, then each has two more, then totally four..how to handle all of them?
26.What is my own conrete experience of REST API design ?
27.How to auto build or auto code generate the API ?
28.gRPC vs OpenAPI in the view of code generation ? 
29.OAS vs test automation?

### 

# 30880 DB Operations

## exp

### todo: 30880 clob write /clob read  second key in excel 

### 33880exp001 

NEED ADDED 

...

### 30880exp021  <---within BJEC   D:\BackupManual\210429-1-BackupOfGDriveWS7\wsCW7\BJEC\src  

​                         bunch of basic JDBC operation for OCP stuff 

### 30880exp022  <--generic db query  need fix mysql driver

### 30880exp023   mysql not working?

### 30880exp024  mysql jdbc working

# 30960 Syntax and Java CC

## exp

### 30960exp001 SPL debugging

## 

# 31010 Basic Class Structure

31010exp  of OCP include static import etc. 

# 31020 Static

31020 exp examples about static modifer and static import stuff

# 31030 Package & Access Modifier

31030exp many access modifier stuff of OCP

# 31040 Non Access Modifier

31040exp001

# 31100 Variable range and object life cycle

31100exp  3 examples

# 31110 Constructor and constructor with Inheritance

31110 exp constructor of regular class, inherited class and exception stuff 

# 31120_Method and overload

31120exp  talking about methods and overload methods 

# 31220_Inheritance &Override

31220exp of OCP

# 31250_Abstract and Interface

31250exp 5 examples here

# 31270 Casting

31270exp  7 examples here

# 31280 this and super

31280exp  8 examples here

# 31300 Exception

### 31300exp  25 examples here

# 31400_Generics 

### 31400exp 17 examples here



# 31420 Nested Class

### 31420exp 27 examples here

# 31422 Lambda and functional 

Lambda ~~ Good tutorial (https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/Lambda-QuickStart/index.html#section5)

## exp

### 31422exp001 <--very basic hook into concept 

### 31422exp002 <--quick one 

### 31422exp003 <---check lambda work with its own env ;

​                            <--this is pure arrow function ( not related to stream )

# 31428 aggregation and map reduce

## exp

### 31428exp001 aggregation and map reduce 

### 31428exp002 aggregation and map reduce  

# 31430_Enum

## Note

Key points: 

1. enum syntax similar to class; 
2.  special field which is capital without any type (could have constructor) 
3.  HttpStatus in spring 
4. Typical usage is : Enum "class name" dot BIG capital stuff; ( could also be instances, then Big guys will be passed as instance value exp002)
5. 145pd7 bottom example also good as HttpStatus in spring

## exp

### 31430exp001 to exp008  <--advanced syntax stuff 



# 31460_Assertion

31460exp 2 examples here

# 31900_Design Pattern 1

### 31900exp  9 examples, singleton, factory pattern etc. 

# 32010 Swing

32010exp  21 examples here

# 32020 JavaFx

## exp

32020exp001 --      <--several sample exps

# 32050 JVM

## Question

1.How to make JVM exit ? How do we know ?
2.What JVM information can we get from jconsole ?
3.How to use JVM arguments ?
4.What are six basic jdk trouble shooting tools? 
5.What are the most important MBeans that Spring Boot Actuator use ?

6.What is JVM native method library ?

## Okey Linux Command

### jcmd

<--144pd214

### jinfo

```
root@billy-VirtualBox:/home/billy/blib/33808# jinfo 1934
               <---210203#33808exp221  1934 is spring boot application
Java System Properties:

#Wed Feb 03 20:52:44 MST 2021

awt.toolkit=sun.awt.X11.XToolkit
java.specification.version=11
sun.cpu.isalist=
sun.jnu.encoding=UTF-8
java.class.path=33808exp221-1.0-SNAPSHOT.jar  <---
java.vm.vendor=Ubuntu
sun.arch.data.model=64
catalina.useNaming=false
java.vendor.url=https\://ubuntu.com/
user.timezone=America/Denver
java.vm.specification.version=11
os.name=Linux <--
sun.java.launcher=SUN_STANDARD
user.country=US
sun.boot.library.path=/usr/lib/jvm/java-11-openjdk-amd64/lib
sun.java.command=33808exp221-1.0-SNAPSHOT.jar root@billy-VirtualBox\:/home/billy/blib/33808/33808exp221\# java -jar 33808exp221-1.0-SNAPSHOT.jar --spring.datasource.url\=jdbc\:mysql\://192.168.1.66\:3306/33808exp221?useSSL\=false --spring.datasource.username\=billyFromVbox --spring.datasource.password\=123456
            <---launch information
jdk.debug=release
sun.cpu.endian=little
user.home=/root  <--
user.language=en
java.specification.vendor=Oracle Corporation
java.version.date=2020-11-04
java.home=/usr/lib/jvm/java-11-openjdk-amd64
file.separator=/
java.vm.compressedOopsMode=32-bit
line.separator=\n
java.specification.name=Java Platform API Specification
java.vm.specification.vendor=Oracle Corporation
java.awt.graphicsenv=sun.awt.X11GraphicsEnvironment
java.awt.headless=true
java.protocol.handler.pkgs=org.springframework.boot.loader
sun.management.compiler=HotSpot 64-Bit Tiered Compilers
java.runtime.version=11.0.9.1+1-Ubuntu-0ubuntu1.18.04
user.name=root
path.separator=\:
os.version=4.15.0-135-generic
java.runtime.name=OpenJDK Runtime Environment
file.encoding=UTF-8
spring.beaninfo.ignore=true
sun.nio.ch.bugLevel=
java.vm.name=OpenJDK 64-Bit Server VM
java.vendor.url.bug=https\://bugs.launchpad.net/ubuntu/+source/openjdk-lts
java.io.tmpdir=/tmp
catalina.home=/tmp/tomcat.8488958085880127253.8080
com.zaxxer.hikari.pool_number=1
java.version=11.0.9.1
user.dir=/home/billy/blib/33808/33808exp221
os.arch=amd64
java.vm.specification.name=Java Virtual Machine Specification
PID=1934  <---
java.awt.printerjob=sun.print.PSPrinterJob
sun.os.patch.level=unknown
catalina.base=/tmp/tomcat.8488958085880127253.8080
java.library.path=/usr/java/packages/lib\:/usr/lib/x86_64-linux-gnu/jni\:/lib/x86_64-linux-gnu\:/usr/lib/x86_64-linux-gnu\:/usr/lib/jni\:/lib\:/usr/lib
java.vm.info=mixed mode, sharing
java.vendor=Ubuntu
java.vm.version=11.0.9.1+1-Ubuntu-0ubuntu1.18.04
sun.io.unicode.encoding=UnicodeLittle
java.class.version=55.0

VM Flags:   <------
-XX:CICompilerCount=2 -XX:InitialHeapSize=16777216 -XX:MaxHeapSize=260046848 -XX:MaxNewSize=86638592 -XX:MinHeapDeltaBytes=196608 -XX:NewSize=5570560 -XX:NonNMethodCodeHeapSize=5825164 -XX:NonProfiledCodeHeapSize=122916538 -XX:OldSize=11206656 -XX:ProfiledCodeHeapSize=122916538 -XX:ReservedCodeCacheSize=251658240 -XX:+SegmentedCodeCache -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseFastUnorderedTimeStamps -XX:+UseSerialGC

VM Arguments:  <----
java_command: 33808exp221-1.0-SNAPSHOT.jar root@billy-VirtualBox:/home/billy/blib/33808/33808exp221# java -jar 33808exp221-1.0-SNAPSHOT.jar --spring.datasource.url=jdbc:mysql://192.168.1.66:3306/33808exp221?useSSL=false --spring.datasource.username=billyFromVbox --spring.datasource.password=123456
java_class_path (initial): 33808exp221-1.0-SNAPSHOT.jar
Launcher Type: SUN_STANDARD

   <--will give all jvm parameter of pid   155pd17
```



### jmap

#### -clstats

```
root@billy-VirtualBox:/home/billy/blib/33808# jmap -clstats 2661|head -n 8
Index Super InstBytes KlassBytes annotations    CpAll MethodCount Bytecodes MethodAll    ROAll    RWAll    Total ClassName
    1    -1  11770976        504           0        0           0         0         0       24      616      640 [B
    2    -1   7055232        504           0        0           0         0         0       24      616      640 [C
    3    12   2004360        624         128    14272         109      4576     70528    20576    66720    87296 java.lang.String
    4    12   1689248        680           0    22120         139      5679     86800    28040    84032   112072 java.lang.Class
    5    12   1579040        600           0     1368           9       213      2880     1632     3592     5224 java.util.concurrent.ConcurrentHashMap$Node
    6  7808   1458952       1200           0     6824          47      1117     27936     7024    29872    36896 java.lang.reflect.Method
    7    -1    924960        504           0        0           0         0         0       24      616      640 [Ljava.lang.Object;
          <---myself tried from result hints I guess useful to analyse instances 
          
```



#### -dump

```
root@billy-VirtualBox:/home/billy/blib/33808# jmap -dump:format=b,file=/home/billy/blib/33808/33808exp221/heapdump/dump.hprof 1934
Heap dump file created
    <--155pd15 
    <--33808exp221 210203
```



#### -histo

```
 jmap -histo 2339|
   <---list order by the bytes number and also list instance number 
   <--155pd14-15  输出当前进程内存中所有对象实例数（instances）和⼤⼩（bytes），如果某个业务对象实例数和⼤⼩
存在异常情况，可能存在内存泄露或者业务设计⽅⾯存在不合理之处。
   <--important
   <--144pd200
   <-- heap snapshot 


```

```
root@billy-VirtualBox:/home/billy/blib/33808# jmap -histo 1934|head -n 20
 num     #instances         #bytes  class name (module)
-------------------------------------------------------

   1:        116150       15943880  [B (java.base@11.0.9.1)
   2:          1967        7304464  [C (java.base@11.0.9.1)
   3:        103501        2484024  java.lang.String (java.base@11.0.9.1)
   ... 
            <---list from top bytes which occupy the most memory
            
```



```
jmap -heap 8572
    <--run from window10 command line , 8572 is: org.jetbrains.jps.cmdline.Launcher
    <--seems we can only jmap that
Attaching to process ID 8572, please wait...
Debugger attached successfully.
Server compiler detected.
JVM version is 25.212-b10

using thread-local object allocation.
Parallel GC with 4 thread(s)

Heap Configuration:
   MinHeapFreeRatio         = 0
   MaxHeapFreeRatio         = 100
   MaxHeapSize              = 734003200 (700.0MB)
   NewSize                  = 89128960 (85.0MB)
   MaxNewSize               = 244318208 (233.0MB)
   OldSize                  = 179306496 (171.0MB)
   NewRatio                 = 2
   SurvivorRatio            = 8
   MetaspaceSize            = 21807104 (20.796875MB)
   CompressedClassSpaceSize = 1073741824 (1024.0MB)
   MaxMetaspaceSize         = 17592186044415 MB
   G1HeapRegionSize         = 0 (0.0MB)

Heap Usage:
PS Young Generation
Eden Space:
   capacity = 67108864 (64.0MB)
   used     = 31213680 (29.767684936523438MB)
   free     = 35895184 (34.23231506347656MB)
   46.51200771331787% used
From Space:
   capacity = 11010048 (10.5MB)
   used     = 0 (0.0MB)
   free     = 11010048 (10.5MB)
   0.0% used
To Space:
   capacity = 11010048 (10.5MB)
   used     = 0 (0.0MB)
   free     = 11010048 (10.5MB)
   0.0% used
PS Old Generation
   capacity = 113770496 (108.5MB)
   used     = 6167400 (5.881690979003906MB)
   free     = 107603096 (102.6183090209961MB)
   5.420913344704061% used

6816 interned Strings occupying 576664 bytes.
      <--for book155 try
```



```
root@billy-VirtualBox:/home/billy/blib/33808# java -version
openjdk version "11.0.9.1" 2020-11-04
OpenJDK Runtime Environment (build 11.0.9.1+1-Ubuntu-0ubuntu1.18.04)
OpenJDK 64-Bit Server VM (build 11.0.9.1+1-Ubuntu-0ubuntu1.18.04, mixed mode, sharing)
                 <---on virtual machine java version 11 

root@billy-VirtualBox:/home/billy/blib/33808# jmap -heap 1934
Error: -heap option used
Cannot connect to core dump or remote debug server. Use jhsdb jmap instead
              <---seems jmap not working 
              
root@billy-VirtualBox:/home/billy/blib/33808# jhsdb jmap --pid 1934
Attaching to process ID 1934, please wait...
Debugger attached successfully.
Server compiler detected.
JVM version is 11.0.9.1+1-Ubuntu-0ubuntu1.18.04
0x000055b9e2418000      10K     /usr/lib/jvm/java-11-openjdk-amd64/bin/java
0x00007fece4788000      98K     /lib/x86_64-linux-gnu/libresolv-2.27.so
0x00007fece49a3000      26K     /lib/x86_64-linux-gnu/libnss_dns-2.27.so
0x00007fece4baa000      9K      /lib/x86_64-linux-gnu/libnss_mdns4_minimal.so.2
....
                             
```





### jps

<---155pd12

```
root@billy-VirtualBox:/home/billy/blib/books/book155# jps -l
2339 webflux-with-latency-1.0-SNAPSHOT.jar
3310 jdk.jcmd/sun.tools.jps.Jps

   -q :       
   -m:     
   -l:     list the full path
   -v: 
   <--check process
   <--155pd12 , list all java processes
      ps -ef | grep tomcat  <--can get similar process information
```



```
root@billy-VirtualBox:/home/billy/blib/33808# jps -l
2189 jdk.jcmd/sun.tools.jps.Jps
1998 arthas-boot.jar
1934 33808exp221-1.0-SNAPSHOT.jar

root@billy-VirtualBox:/home/billy/blib/33808# jps -m
2206 Jps -m
1998 arthas-boot.jar
1934 33808exp221-1.0-SNAPSHOT.jar root@billy-VirtualBox:/home/billy/blib/33808/33808exp221# java -jar 33808exp221-1.0-SNAPSHOT.jar --spring.datasource.url=jdbc:mysql://192.168.1.66:3306/33808exp221?useSSL=false --spring.datasource.username=billyFromVbox --spring.datasource.password=123456
    <--list all parameters for main method
    <---210203  33808exp221   
```



### jhat

```
jhat
   <--with jmap, for heap analyze
   <--144pd204 , seems not very useful
```

### jhsdb

​     <--144pd214 seems a integrated tool 



### jstack

  <--for stack and thread

155pd15<---can use top get most CPU thread, then do some conversion, then get the stack

33808exp221--210203-S048-S050 list stack of top thread of jvm process !! 

### jstat

   <--important
   <--144pd200
   <--gc and class load

   <--155pd17

```
root@billy-VirtualBox:/home/billy/blib/33808#  jstat -gc 2661
 S0C    S1C    S0U    S1U      EC       EU        OC         OU       MC     MU    CCSC   CCSU   YGC     YGCT    FGC    FGCT    CGC    CGCT     GCT
2048.0 2048.0  0.0   462.4  16448.0  11191.2   41028.0    31374.2   55808.0 54149.2 7424.0 6881.6     97    1.182   4      0.877   -          -    2.059
        <---see below jstat -gcutil,  OC(old capacity?), OU(old used), MC ( meta capacity, meta used)
```



```
root@billy-VirtualBox:/home/billy/blib/33808# jstat -gcutil 2661
  S0     S1     E      O      M     CCS    YGC     YGCT    FGC    FGCT    CGC    CGCT     GCT
  0.00  22.58  68.13  76.47  97.03  92.69     97    1.182     4    0.877     -        -    2.059
      <---survivor0, survivor1, eden, old, M ( meta space ?)
          CCS (?),   YGC (young GC),YGCT ( young gc time), FGC ( full gc), FGCT ( full gc time)
          CGC ?, CGCT ?, GCT (gc total time in seconds)
      <---33808exp221 
```

### JVisual VM

#### cmd launch

jvisualvm

​      <---any where in windows cmd 

#### MBeans

​             <--see 32050Qus005

#### jvm.gc.pause in metrix



## Okey  JVM Param

<--todo: 147pd26 param need input here !!!

### agent

-agentlib -agentpath -javaagent

​          <--see 32055qus001_(02)_1

### Class loader path

-Xbootclasspath

147pd43

### Heap Memory

```
-Xmx6000m
      <--Maximum Heap Size 6G
-Xms4000m
      <--Minimum Heap Size 4G
      <--145pd50 suggest to setup xmx, xms the same size so no heap adjust after gc
-XX:NewSize=1024m
-XX:NewSize=1G 
      <--Young Generation Heap Size
-Xmn
    <---young generation heap size 
```

​    <--book146pd243 also have quick explanations of these parameters 

   <---jvm options in ES setup   https://zhuanlan.zhihu.com/p/45331117 

### Garbage Collection Options

```
–XX:+UseSerialGC
     <--Serial Garbage Collector
–XX:+UseParallelGC
    <--Parallel Garbage Collector
-XX:+USeParNewGC
    <--CMS Garbage Collector
-XX:+USeG1GC
    <--G1 Garbage Collector
```

### GC Logging

```
-XX:+PrintGCDetails 
      <--Print GC details Messages 
        to be entered....
        
-XX:+UseGCLogFileRotation  
-XX:NumberOfGCLogFiles=10
-XX:GCLogFileSize=50M 
-Xloggc:/home/user/log/gc.log
      <--from another article
```

  <--important:  155pd19 also has GC jvm param setting and also a bit analysis !! 

### Handling out of Memory

```
-XX:+HeapDumpOnOutOfMemoryError 
  <--instructs the JVM to dump heap into physical file in case of *OutOfMemoryError*
  <--145pd50
-XX:HeapDumpPath=./java_pid<pid>.hprof
  <--denotes the path where the file is to be written ( more on link below)
-XX:OnOutOfMemoryError="< cmd args >;< cmd args >" 
  <--used to issue emergency commands to be executed in case of out of memory error
           example:  -XX:OnOutOfMemoryError="shutdown -r"  
           <--Restart the server as soon as out of memory occur
-XX:+UseGCOverheadLimit
    <--a policy that limits the proportion of the VM's time that is spent in GC before an *OutOfMemory* error is thrown
```

### 32/64 Bit

```
-d<OS bit>

    <-- set the environment to 64 bit manually
```

Parameters article1 (https://www.javadevjournal.com/java/jvm-parameters/)

Parameters article2 (https://www.baeldung.com/jvm-parameters)



### profiling

-Xverify:none 

<---210217 33808exp221

### stack size

-Xss    146pd189

https://stackoverflow.com/questions/4967885/jvm-option-xss-what-does-it-do-exactly

Put JVM param examples here: 
   Book145 pd50 good example of jvm param !! 

JVM tools

# 32055 Arthas

## Note

book155pd

## Okey

### Launch

```
root@billy-VirtualBox:/home/billy/blib/books/book155# java -jar arthas-boot.jar
[INFO] arthas-boot version: 3.4.5
[INFO] Found existing java process, please choose one and input the serial number of the process, eg : 1. Then hit ENTER.
[1]: 2661 33808exp221-1.0-SNAPSHOT.jar
           <---[1] is java process
           <---33808exp221
```



### thread

```
[arthas@2661]$ thread
Threads Total: 39, NEW: 0, RUNNABLE: 12, BLOCKED: 0, WAITING: 13, TIMED_WAITING: 8, TERMINATED: 0, Internal threads: 6
ID    NAME                             GROUP            PRIORITY   STATE      %CPU       DELTA_TIME  TIME       INTERRUPTE DAEMON
-1    C1 CompilerThread0               -                -1         -          5.37       0.012       0:7.540    false      true
57    arthas-command-execute           system           5          RUNNABLE   1.29       0.003       0:0.021    false      true

          <---list all thread, 33808exp221 
```



```
[arthas@2837]$ thread --all
              <---grab certain thread
...

1360 http-nio-8080-exec-1301        main            5          BLOCKED   0.0       0.000      0:0.000   false      true
1361 http-nio-8080-exec-1302        main            5          BLOCKED   0.0       0.000      0:0.000   false      true
1362 http-nio-8080-exec-1303        main            5          BLOCKED   0.0       0.000      0:0.000   false      true

... 
            <---then grab from screen all matched threads and put into notepad++ to count 
            <---33808exp221  210214
```

### trace

[arthas@5321]$ trace com.zaxxer.hikari.pool.HikariPool getConnection -n -10
Press Q or Ctrl+C to abort.

<----33808exp221 

<---also 33808exp221 210205 S022

# 32602 Maven

## Note 

### lib

Maven central (https://repo.maven.apache.org/maven2/ https://repo1.maven.org/maven2/)

Maven central (user interface) (https://mvnrepository.com/repos/central)

### local repository

  C:\Users\Billy\.m2  <---could be found in IDEA setting/build tools/maven

    <properties>
        <java.version>1.8</java.version>
    </properties>         <--used in POM.xml
## Questions

01:What is MAVEN centrol repository?How local repository interact with central repository?     
02:Where is the local setting ? Or what are all the local stuff ?Check mine (on left in the UMLet)could set up multiple contral repositories etc. 
03:What kind of MAVEN setting we have since we installed the machine ??Checked mine , oracle sever, do not know what it is used for ??
04:What are the common MAVEN command line ?  <---See Exp003 
05:What are the command MAVEN application patterns ? like build and install and test etc ?? <---see Exp003
06:What are the main remote MAVEN repository ?What is search or download order ?Do we need local setting ? 
07:How MAVEN config multiple modules project ?Check Appollo project , see BLIB
08:Eclipse MAVEN setup ?  Compare with command line MAVEN setup ?Check Exp001 and Exp002; 
09:Why MAVEN difficult ? I guess: (1) pom.xml tag and usage  (2) modules Q07 (3)     
10:How to build multiple modules projects like BPOT2107 ??  Exp004 and Exp005   <--see qus07
11:What's difference between command line MAVEN and eclipse MAVEN? do they share the same local repository ? 
12:What is MAVEN plugin ? Can we check the source code how MAVEN plugin implemented ?
13:Can you give more examples of MAVEN plugin?Like "archetype" is just a task plugin;  "jboss-maven-plugin" dealing with JBOSS related stuff; 
14:What are the most important xml tags in pom.xml ?
15:What are the key goals in mvn run ( like build , install etc) ? How they are related to the pom.xml tag?   
16:What is the advantage of MAVEN ?
17:What is .mvn file? Like the one in: C:\Billydev080107\TempDev\181112-1-33806Exp001_SpringRabbitQ\gs-messaging-rabbitmq\complete\.mvn
18:Is maven artifactId related to the java package name and class name ? ( from 33806Exp001) 
19.How maven could run the application and test ?
20.Maven vs gradle ?
21.Maven parent project vs project dependency?
22.Can maven have multiple parent project ?
23.How to make a fat jar including every dependent jars ? 
24.How maven control source code compile version?
25.Jar manifest setting ? 
26.How to build maven fat jar with all dependencies 
27.How Maven share common configuration among multiple projects?
28.How is IDE dependency related to the maven dependency ?
29.What is Maven Tycho ?
30.Maven inheritance vs module parent ?
31.Can use Spring boot parent project as example to understand maven inheritance?

## Exp

32602exp  4 examples here

32602exp001 <-- just run maven

32602exp002 <--setup java

32602exp003 <---   C:\Billydev080107\TempDev\180904-1-MAVENCommandLineTest\32602_Exp003  

32602exp004 <---D:\BackupManual\210429-1-BackupOfGDriveWS7\wsCW7\32602_Exp004_MultipleModules

32602exp005  <--only have screen copy

32602exp006 <--only have screen copy

## Okey command

​        <--about mvnw ( wrapper) see: https://juejin.cn/post/6844903648091176967 

### mvn clean install -DskipTests

​           <--- 50216exp008 DockerFile

### mvn clean package spring-boot:repackage install

​       <---33808exp180  210602 S008  etc.  S011 provide a different clue !! 

​       <---seems maven could install what spring-boot: repackage built 



### nvmw spring-boot:run

​             <---33808exp180  201007-1-S009 

​              <---

### mvnw clean 

```
./mvnw clean package -DskipTests=true
      <---33808exp186 in uaa part 
```





## Okey POM format

### Dependency

<dependencyManagement>

​       <---33808exp184, just manage the dependency version  stuff so children only need give 

​            simple name of dependency

<packaging>pom</packaging>

​       <---33808exp184, usually for the parent project sharing with children

### Plug In

frontend-maven-plugin

​      <--33808exp180

maven-assembly-plugin

​      <--33808exp203

maven-jar-plugin

​      <--33808exp203



# 32606 JUnit

## Note

JUnit 4 API~ (https://junit.org/junit4/javadoc/latest/index.html)

JUnit 5 API~ (https://junit.org/junit5/docs/5.0.1/api/index.html?overview-summary.html)
            <---Assertions.java class 

## Exp

32606exp  3 examples here 

​            <---we need to rearrange them :   each make an example !! 

​            add one from original: D:\Backup\PM1000\Billydev080107\wsCW7\32606_Exp001

​           <---just refact Exp001 and exp002 standalone project as we have Junit4/5 and some cases need driver support, so better have stand alone exp for unit test!! 

### 32606exp003_TestOracleDataTypeAndJavaDataType 

## Okey JUnit 4 Annotation

todo:  http://www.ceshiti365.com/z/13628.html 

### @AfterClass

<---should run once after all test 

### @Before

​    <--should run before each test method

### @ClassRule

​     see @Rule

### @Ignore

### @Rule

​		 <---http://www.ceshiti365.com/z/13628.html    Rule。它是JUnit4.7才开始提供的一种扩展方式，它能够替代大部分已有的Runner扩展。JUnit包含两种Rule Annotation：@ClassRule与@Rule。@ClassRule应用于测试类中的静态变量，而@Rule应用于成员变量；

​      <---shareworks  CompanyAdminIntTest has this annotation; 



### @Test

​    <--test method

### @Test(expected=java.lang.ArithmeticException.class)







## Okey JUnit 4 Assert



assertEquals



## Okey JUnit 5 Annotation

### @BeforeEach

​         33808exp238 

## Okey JUnit5 Assert 



## Okey Spring Boot Mock And Test Annotation

### @ActiveProfile

33808exp147  <---so we can use test profile

### @InjectMocks

   33808exp239 test 1  <---in non spring env, the controller we need test 

### @Mock

​     33808exp239 test_1 

​     from Mockito, an annotation of mock bean ( not the test target)

### @MockBean

​    33808exp147 

​    33808exp239 test_3 

​              <---I guess this is the mockup stuff (not test target) under spring env (different from non-spring like exp239 test_1)

### @SpringBootTest

​    33808exp239 test_2  , can provide random port when do with TestRestTemplate

 

# 32651_JavaSecurity

32651exp  6 examples here

## exp

### 3265exp004  generate key pair by myself , 

​                 <--- then signature utils to  sign data and maybe exp006 can verify need try

### 32651exp006 verify signed data

# 32811 Lombok

## Okey Annotation

### @AllArgsConstructor 

​         <--33808Exp146

​           <--UserEntity in 33808exp185

### @Builder  

​        <-- 33808Exp132 

​          <--- seems client side can use builder pattern: 

​                 Person.builder().age(22).name("zhangyu").grade(67).build();

​                from: https://blog.csdn.net/zy345293721/article/details/106892948

​                tried in Exp132: Author author = Author.builder().firstName((xxxx...

​                            <---and New Author() is not allowed, can only use builder !!

### @Data   <--33808Exp053

### @EqualsAndHashCode(callSuper = false)  <--33808Exp146

### @NoArgsConstructor 

​               <--33808Exp146

​               <--UserEntity in 33808exp185

### @RequiredArgsConstructor

​     https://reflectoring.io/unit-testing-spring-boot/

​               <--used to auto create constructor for unit test bean 

### @Slf4j  

​     <--we can directly use log, like log.info(xxx)   33808Exp053

​     <---log.debug(xxx)       UserConfigMetaData.java in API  module  33808exp185

### @ToString

​            <--UserEntity in 33808exp185

# 32815 Reflection

## Note

Reflection Reference doc - Discover Class Members (API) (https://docs.oracle.com/javase/tutorial/reflect/class/classMembers.html)

Reflection Tutorial Official (https://docs.oracle.com/javase/tutorial/reflect/TOC.html)

Reflection Tutorial Good one (http://tutorials.jenkov.com/java-reflection/annotations.html)

## exp

### 32815exp 11 examples 

# 32816_Serialize

### 32816exp  1 example here use real file do serialization

# 32818 CGLIB

## Questions: 

1.What are cglib, ASM and javassist ?
2.What is java agent ?

### 

# 32900_DesignPattern2

## exp

32900exp 37 examples here  <---use under billydev pacakge

### 



# 33300 JSP

## exp

### 33300exp001 <--Servlet basic 

# 33302 Servlet

## exp

### 33302exp001 servlet session

### 33302exp002 Shared request only

### 33302exp003 shared context

### 33303exp004 Shared cookies



# 33804 -->merging to 33818



# 33808 Spring

## Note

### API

Spring Boot API (https://docs.spring.io/spring-boot/docs/current/api/)

(1) Spring boot reference doc (overall) (https://docs.spring.io/spring-boot/docs/2.2.6.RELEASE/reference/html/)

(2) Spring boot build ( used by U020) (https://docs.spring.io/spring-boot/docs/2.2.6.RELEASE/reference/html/using-spring-boot.html#using-boot-build-systems)

(3) Spring boot feature (******my second read enter from sprig boot U021******) (https://docs.spring.io/spring-boot/docs/2.2.6.RELEASE/reference/html/spring-boot-features.html#boot-features-external-config) 

(4) Spring boot how to (like FQA with details, very useful when doing examples) (https://docs.spring.io/spring-boot/docs/2.2.6.RELEASE/reference/html/howto.html#howto-spring-boot-application)

(5) All Spring projects -Boot,Data,Session etc.(https://spring.io/projects/spring-data-jdbc)

(6) Spring Framework~ API (https://docs.spring.io/spring-framework/docs/current/javadoc-api/index.html?org/springframework/web/servlet/config/annotation/EnableWebMvc.html)

​              <---WebFlux: ClientResponse, WebClient, 
​              <---WebMVC:   RestTemplate,
​              <---MockMVC
​              <---shared: MediaType,

(7) Spring Framework~ class diagram (https://blog.csdn.net/strivezxq/article/details/44560771)

(8) Starter guide:

​     https://spring.io/guides

(9) webflux:  https://docs.spring.io/spring-framework/docs/current/reference/html/web-reactive.html#webflux-dispatcher-handler

Spring~ all projects (https://spring.io/projects/spring-boot#learn)

Spring~ Over view (https://www.cnblogs.com/best/p/5748105.html)
             <--with a diagram (local: C:\Billydev080107\MyEnabil\170424-1-AllScreenCopiesBPOT\200902-3-SpringOverview)

Spring~ Official Getting Started Guides, Topics and Tutorials (https://spring.io/guides)  

Spring~ Interview Questions (https://www.edureka.co/blog/interview-questions/spring-interview-questions/#WhatarethemajorfeaturesindifferentversionsofSpringFramework?)
              <---seems from book146 

### Release Notes

https://spring.io/blog/category/releases

## Questions

1 (18--07-16) Why Spring use runtime class to call Spring instead of call Spring
as a lib probably is a typical IOC !! then the control is on Spring side 
now !! 
2 What is <<<SpringApplicationContext>>> ?  What's its main functions?How is it related to IoC?  
3 How configuration is used by Context ???
4 How to setup WebMVC WebFlux context? what are they ?
5 What is <<<SpringEnvironment>>>??? what's different from context ??
   180731: check springbootdoc 24.2 , looks Spring Environment is similar to Linux shell env ?
6 (18--08-10) What is lazy load ? why we need lazy singleton??
7 (18--08-13) what is method level annotation ?  ( from : Doc1 1.12.3) 
  Are there any other types of annotations?
8 (18--08-13) *****What is the differnce between Configuration and Component ??*****
9 (18--08-13) What is difference between @component and @Bean ?
10 (18--08-15) How Spring Boot integrate with Tomcat ?    ---- check tab same day 
11 (18--08-15) What is the relation ship between @Component and @Autowired ?
12 (18--08-15) How in Spring Boot we override the default configuration ? give examples here !!
13 (18--08-22) How Spring ApplicationContext integrated with AOP ?
14 (18--08-22) How ApplicationContext implement enterprise specific functionalities ?
15 (18--08-22) Annotation based vs Java Based configuration ?

Seems not much difference . 

​      Check: https://stackoverflow.com/questions/41615041/java-based-vs-annotation-based-configuration-autowiring    
seems Java-based configuration is newer than Annotation based configuration and java based configuration has more annotation tags!!  

​      refer to: https://docs.spring.io/spring/docs/current/spring-framework-reference/core.html#spring-core

16(18--08-22) Why Spring difficult ? 
  A: 18--09-04: example how http request coupled to Spring? Dispatcher servlet or listener ??     
     how different kind of listener implemented ? how are they used ?
17 (18--08-24) Bean scope and its application seems interesting ?
18 (18--09-04 see BLIB) AOP vs DI ? 
19 (18--09-05) How many context does Spring application have ? Example like WebApplicationContext is different from ServiceContext ??
20 (18--09-05) What is the overall Spring context initialization process ? Concerning:  Spring BeanPostProcessor implementations which in turn means that you cannot apply these annotations within your own BeanPostProcessor or BeanFactoryPostProcessor types
and also AOP stuff .  Spring framework doc 1.8, 1.9 etc.

21 (18--09-06) Spring ref doc 1.12.2 how WebContext setup ? What is listener ? Dispatch servlet ?
22 (18-09-21) How about Spring modules relationship? See also 33808U003
23 (18--09-21) How JdbcTemplate autowired the datasource ?

24. (19--01-25) How Spring Boot hold static html and javaScript ?
25. (19--01-28) How to use JdbcTemplate to query the complicated data structure ?
26. (19--01-28) Compare JdbcTemplate and MyBatis and JPA? 
27. (19--01-29) How to use JDBCTemplate to make a complex JSON return value ? 
28. (19--01-31) How JDBCTemplate support transaction?
29. 29.(19--02-01) How to batch insert/update records using JDBCTemplate ?
30. (19-03-01) How Spring Boot restful API implementation process http post request ? 
31. (19--03-05) How to do general JDBCTemplate queries ?

30.(19-03-01) How Spring Boot restful API implementation process http post request ? 
31.(19--03-05) How to do general JDBCTemplate queries ?
32.(19--03-12) How to get autoincremental id when use JDBCtemplate?
33.(19--03-21) Is bean only injected in bean ?  Bean can call normal object, normal object can not call bean?
34.(19--03-22) How to setup multiple CROSS origin URLs?

35. What are application  enterpriese features? How Spring implement them ?
36. What is SpringBoot and its advantages?
37. What is IoC ?
38. Is servlet an IoC implementation?
39. What is class path auto scan ? How to use it ? Examples ?
40. How JPA implement complex Domain object using DDD(domain driven design)?

41.What's difference between JPA and JPA2 ? Which Spring version implment which ?
42.How Spring support Spring Data JPA cache ?
43.CrudRepository vs JPARepository?
44.JPA API vs JPA implementation? Difference between different venders ?
45.What's difference between embeddable and one to many ?
46.What is Spring Data JPA ?**
47.How to implement websocket ?
48.Compare Spring Boot with Express.js?
49.What is @RequestBody annotation and otherREST API annotations?
50.How to debug jdbc template?
51.How to process static web pages ?
52.What are all options for Spring to access persistent data ?
53.Can we have Spring works with real JPA ( like hibernate) example ( not Spring Data JPA) ?
54.Is HQL really needed ?
55.How spring compared with JEE?
56.What is annotation and how it is implemented ?
57.How does Spring implement Message Queue ?
58.What is difference between JPQL and HQL ?
59.What is hibernate OGM ?
60.Can we use Sessioin Factory, EntityManager and  Spring Data JPA at the same time ?
61.How does the Spring implement the EntityManager injection ? 
62.Can we have an example of hibernaate Session factory ?
63.How to download and setup spring source code from github ?
64.How to analyze spring source code ?
65.Why and how Spring boot integrate with legacy system ?
66.When we need to use dynamic proxy in Spring ?
67.When do we use ImportBeanDefinitionRegistrar to do the customization?
68.How many ways can we extend Spring ?
69.What is relationship between spring cloud and servicemesh ?
70.What does @SpringBootApplication annotation mean ?
71.What is @EnableAutoConfiguration , this is kiind of EnableXXX style annotation?
72.What is Spring Boot initializer (Luban note D15)  used for ?
73.Spring MVC process analysis including tomcat start and dispatchServlet handle request?
74.Can we write our own DispatcherServlet handler to handle specific URL request ?
75.What is AOP and how is it implemented ?
76.What is concepts like joinpoint and pointcut and advice within AOP ?
77.What is the application of AOP ?
78.Why Spring boot need spring-boot-starter-web dependency  and why need an parent in pom.xml? ?
79.What did spring-boot-maven-plugin do in details ? 
80.What is Spring boot auto configuration and how does it work ?
81.How many ways can Spring be extended ?
82.How to integrate Spring with POJO ?
83.What are three imports in Spring ?
84.Compare @Bean with @Import and @Component?
85.How annotation is implemented in source code level?
86.What is Shiro framework?
87.How user login and authentication implemented in Exp030 ?
88.What is difference bewteen FactoryBean and bean factory method?
89.What is difference bewteen FactoryBean and @Bean?
90.What is difference between jdk dynamic proxy and cglib ?
91.what is frequently used spring annotation ?
92.How does Spring implement transaction annotation ?
93.What is Spring transaction boundary ?
94.How does Spring call asynchronous method like a thread within a transaction ?
95.Can Spring transaction boundary methods be within the same class ?
96.Why Spring annotation transaction not rollback?
97.What is Spring scope ?
98.What is Spring MVC ?
99.How to position some options in Spring MVC ?
100.How is Spring MVC security ?

101:What is Spring HATEOAS ?
102.What is Spring reactive and webflux ?
103.How to read Spring MVC source code ?
104.What is spring boot ? 
105.What is relaionship between WebMvcConfigurationSupport and WebMvcConfigurer?
106.How to do source code analyze of sprint boot with mvc ?
107.What is CGLIB in Spring?
108.what is difference between @EnableXXX and spring.factories?
109.What spring boot retarted ?
110.What is difference between Spring annotation and java annotation or other annotations ?
111.How cglib is involved in Spring ?
112.How many ways do spring  instantiate a bean ?
113.How many types of autowire in Spring ?
114.What is the relationship between @Import, ImportSelector and ImportBeanDefinitionRegistrar?
115.What is aware interface ?
116.How spring implement http session ?
117.How can we check spring release from source code repository ?
118.How to build spring boot project using gradle especially with multiple modules?
119.What is micrometer in actuator ?
120.How is Spring Listener infrastructure ?
121.What are the useful understandable information we can get from actuator ?
122.How to do spring boot test ?
123.Does websocket use http ?
124.Can we use webflux and webmvc mixed in one controller ?
125.How to setup springBoot datasource ?
126.How to config Spring Boot with external tomcat  JDNI datasource ? 
127.How Spring data JPA handle practical problems ?
128.How Spring JPA (hibernatee) handle practical problem?
129.How to implement reactive repository ?
130.What filters are used in spring security ?
131.What is Spring security overview from blogs espcially chinese blog?
132.How about json conversion in Spring ?
133.What is difference between autowird and IoC ?
134.How is the thread modoel of webflux ?
135.What is SpEL?
136.When shall we avoid autowired?
137.How can webclient do both sync and async ?
138.What is difference between Spring boot test and Spring boot starter test?
139.How spring boot do auto configuration ?
140.How can we do webflux source code analysis ?
141.How to understand Mono and flux ?
142.How to deal with the backpressure ?
143.What is difference between stomp and websocket ?
144.Is Spring request a singleton ?
145.What is Spring cloud ?
146.How Spring boot deal with async processing ?
147.How Spring clound implement loadbalance ?
148.How Spring cloud eureka implement service discover and   register ?
149.How to compare router , gateway and zuul ?
150.What is Spring Security overview ?

​            <--merged to qus131

151.How Spring do validation ?
152.How to compare spring connection pool ?

153.How Spring Security implement OAuth2 ?

154.What is XSRF ？

155.How Spring Cloud do the authentication ?

156.How Spring cloud integrate with WebFlux ?

157.How to compare Spring MVC and WebFlux ?

158.How to compare 2 router solutions like Zuul and Gateway?

159.Can we have more webflux examples ?

160.What is zuul ?

161.How to understand hystrix and do the configuration?

162.What is basic ideas of Ribbon ?

163.How about the future trend of Spring cloud as Netflix in maintenance mode ?

164.How to integrate Spring Cloud gateway with Oauth2 ?

165.How to debug Webflux code ?

166.Can reactor do multiple subscription ?

167.How to do source code analyze of sprint boot with webflux ?

168.What is Swagger ?

169.How to setup spring MVC thread pool ?

170.How to setup Spring Boot with Nginx ? 

171.What is difference between client side load balance and server side load balance ?

172.What is detailed implementation of Spring MVC?

173.How to improve the performance of Spring Data JPA ?

174.What is the details of spring login procedure and session?

175.How Spring boot and Spring cloud do the deployment?

176.How to do deeper spring source code reading ?

177.How to implement distributed session ?

178.How to use factory bean ?

179.How Spring Data  JPA implement entity inheritance ? 

180.What is the relationship between entity, dao, service and controller ?







## exp to keyword (exp<019 need analyze and add to MD feature)

### 33808exp001  to 33808exp009

 D:\BackupManual\210429-1-BackupOfGDriveWS7\wsCW7

33808exp010 ??

### 33808exp011 to 33808exp015 

D:\Backup\PM1000\Billydev080107\wsCW7

D:\Backup\PM1000\Billydev080107\TempDev\190417-1-33808Exp011GitClone  <--for exp011 copy???

### 33808exp016 

D:\Backup\PM1000\Billydev080107\TempDev\190804-1-33808Exp016SpringHibernate

### 33808exp017

D:\Backup\PM1000\Billydev080107\TempDev\190808-2-33808Exp017

### 33808exp018

D:\Backup\PM1000\Billydev080107\TempDev\190818-1-33808Exp018

### 33808exp019 to 33808exp023

D:\Backup\PM1000\Billydev080107\MyBLIBBPOTCode\33808

### 33808exp024 

D:\Backup\PM1000\Billydev080107\spring\spring-framework-5.1.x\_33808exp024

### 33808exp025 to 33808exp027

D:\Backup\PM1000\Billydev080107\spring02\spring-framework\_33808exp027

### 33808exp028   in IDEA 

### 33808exp029 Spring boot source code 

D:\Backup\PM1000\Billydev080107\TempDev\190926-3-33808Exp029_SpringBootSourceCode

### 33808exp030 Spring Cloud luban VIP project 

D:\Backup\PM1000\Billydev080107\TempDev\190930-1-33808Exp030_SpringCloudApp

### 33808exp031 Distributed transaction seems partly working 

D:\Backup\PM1000\Billydev080107\TempDev\191002-1-33808Exp031_DistributedTransaction

### 33808exp032 mybatis examples

### 33808exp033  Luban Cloud project 

D:\Backup\PM1000\Billydev080107\TempDev\191007-1-33808Exp033_SpringCloudExample

### 33808exp034 Eureka Working



### 33808exp035 Luban, Eureka, ribbon, irule and feigin

   <---IDEA Ultimate version

### 33808exp036  nginx setup

no spring code 

### 33808exp037 simple AOP

<--simple point cut and reuse 

### 33808exp038  Spring boot autoconfiguration

D:\Backup\PM1000\Billydev080107\GitHubReps\33808Exp038_SpringBootAutoConfiguration

### 33808exp039  health indicator germany example test looks good

D:\Backup\PM1000\Billydev080107\GitHubReps\33808Exp039_SpringBootMetaConfiguration



### 33808exp040 <---Luban example with security and redis 

D:\Backup\PM1000\Billydev080107\GitHubReps\33808Exp040_LubanVIPWithPermission



### 33808exp041 file upload not completed

D:\Backup\PM1000\Billydev080107\GitHubReps\33808Exp041_SpringBootFileUpload

### 33808exp042  rest file upload good

D:\Backup\PM1000\Billydev080107\GitHubReps\33808Exp042_SpringBootRestFileUpload

### 33808exp043 file upload client not completed 

with a link 

### 33808exp044 transaction boundary in enrich

no code 

### 33808exp046 very simple mvc test header stuff 

D:\Backup\PM1000\Billydev080107\TempDev\200406-1-33808Exp046TempStuff

### 33808exp047 session attribute

​        <--also excluding security and datasource configurations 

​           test configuration also looks very interesting , it import config explicitly 

### 33808exp048 image media data not completed 

### 33808exp049 simple MVC not completed

### 33808exp050 packed as war and deloy to tomcat 

### 33808exp051 with jSP

### 33808exp052 basic hateoas

### 33808exp053 complicated

<--EntityModel will wrap entity with Links

<--CollectionModel will wrap Entity Model 

### 33808exp054 to 33808exp065  

to be input

### 33808Exp055_SpringMVCPDFView not completed

### 33808Exp056_SpringBootWithJSPViewSupport not completed

### 33808Exp057_AsyncServlet not completed

### 33808Exp058_SleepService not compoleted

### 33808Exp059_SpringMVCMimicServlet

### 33808Exp060_SpringMVC_ViewResolver

### 33808Exp061_SpringMVC_ViewResolver_InSourceCode

### 33808Exp062_SpringMVCWithNewSourceCodeBuild

### 33808Exp063_TryPDFView again

### 33808Exp064_SpringBootSourceCode

### 33808Exp065_ApplicationProperites

### 33808exp066 profiles

```
spring.profiles.active=Production
#spring.profiles.active=Dev
     <--in application.properties set which profile is active 

@Component
@Profile("Production")
public class ProductionDataSourceConfig implements DataSourceConfig {
    public void setup() {
        System.out.println("setting up production data source!");
    }
}
     <---in ProductionDataSourceConfig , annotation class with profile
     
     <---from 33808exp066
```

### 33808exp067

```
logging.level.root=debug
logging.pattern.console=%d{dd-MM-yy HH:mm:ss.SSS} %magenta([%thread]) %highlight(%-5level) %logger.%M - %msg%n

output: 
20-10-20 10:33:11.353 [main] DEBUG billydev.SpringBootLoggingDemo.main - Going to divide 42 by 0
       <---date, [thread name in magenta color], Log Level DEBUG/INFO highlighted, 
           %logger. <--full class name with method name main, message 


logging.path=logs
logging.file=${logging.path}/log.log
logging.pattern.file=%d{dd-MM-yyyy HH:mm:ss.SSS} [%thread] %-5level %logger{36}.%M - %msg%n

output of log file: 
23-09-2020 11:48:00.586 [main] DEBUG o.s.u.c.s.UiApplicationContextUtils.initThemeSource - Unable to locate ThemeSource with name 'themeSource': using default [org.springframework.ui.context.support.ResourceBundleThemeSource@78fbff54]
      <---date with format,  [threadname], DEBUG is log level, 
          %logger has length and with method name, message, 
```

​                 <---33808Exp067                     

- `%d` – outputs the time that the log message occurred in formats that `SimpleDateFormat` allows.
- `%thread` – outputs the name of the thread that the log message occurred in.
- `$-5level` – outputs the logging level of the log message.
- `%logger{36}` – outputs the package + class name the log message occurred in. The number inside the brackets represents the maximum length of the package + class name. If the output is longer than the specified length, it will take a substring of the first character of each individual package starting from the root package until the output is below the maximum length. The class name will never be reduced. A nice diagram of this can be found in the [Conversion Word docs](https://logback.qos.ch/manual/layouts.html#conversionWord).
- `%M` – outputs the name of the method that the log message occurred in (apparently this is quite slow to use and not recommended unless you're not worried about performance, or if the method name is particularly important to you).
- `%msg` – outputs the actual log message.
- `%n` – line break.
- `%magenta()` – sets the color of the output contained in the brackets to magenta (other colors are available).
- `highlight()` – sets the color of the output contained in the brackets depending on the logging level (for example ERROR = red).

​                <---check: (https://dzone.com/articles/configuring-logback-with-spring-boot)
​    



### 33808exp068 

jsp 

### 33808exp069 to exp077

to be input

### 33808exp078  <---seems test cglib enhancement stuff 

### 33808exp079 use annotation

<--annotation

### 33808Exp080_SpringBootFilter

### 33808Exp081_SpringBootCustomizeResponseBodyRendering

### 33808exp082 file upload and download  

<---controller see:  mvc crud part 

<---file stream operation see 30840

### 33808exp082 File  Stream Copy

​      InputStream in = resource.getInputStream()....

​      StreamUtils.copy(in, outputMessage.getBody());

​                    <----33808exp082 ResourceHttpMessageConverter

​                            use this Util the buffer size is 4096 and also will do the flush and return byte count !!!!

### 33808exp083 similar to exp147 with security basic

   <--has custom adapter

### 33808exp084 Oauth2.0 with github

   <---not find multiple security filter chain 

### 33808exp085 from exp083 use basic spring security

start: login "user"/"password--from--console"   url: localhost:8080/books

### 33808Exp086_CopyOfExp085ForDiagramDrawing

### 33808Exp087_SecurityOAuth2WithServer not working

### 33808Exp088_SecurityOAuth2Example

### 33808Exp089_SecurityOAuth2ExampleStepByStep

### 33808Exp090_SecurityOAuth2ExampleAuthServer

### 33808Exp091_OfficialResourceServerSamples seems not working

### 33808Exp092_OfficialResouceServerSampleWithMaven

### 33808exp093 resource and authorization server

###### Break points

```
1 WebSecurity line 292
     <--can see multiple SecurityFilterChain built 
        Then according to different requests, use different virtualFilterChain (created on the fly) 
        see break point 2
```

```
2 FilterChainProxy line 198
        <-- this is the place to get filters from filterChain in break point 1 
            then it will form virtualChain in line 214
```

### 33808Exp094_OAuthClientApplication

### 33808Exp095_SpringToolAsStarter

### 33808exp096 actuator basic

```
management.endpoints.web.exposure.include=*
   <--expose web end points
```

### 33808exp097

 <--add  MyHealthIndicator and a release Note endpoint

### 33808exp098

<--custom info contributor

### 33808exp099

<--custom http setup to https

### 33808exp100

<--just jmx look into 

### 33808exp102

<--session persistence

### 33808exp103

<--http trace 

### 33808exp104

<--custom http trace with in memory rep

### 33808exp105

<--authentication auditing

### 33808exp106

<--time

### 33808exp107 

<--gauge

### 33808exp108 

<--counter

### 33808exp109   routing webflux

### 33808Exp110_ReactiveWebServiceMongoDB

### 33808exp111  basic websocket 

### 33808Exp112_SpringBootWebSocket

### 33808Exp113_AsyncServlet conclusion 比喻

### 33808Exp114_WebFluxLoadTest

### 33808Exp115_WebMvcLoadTest

### 33808Exp116_SpringEmailSending

### 33808exp117 33808exp117  <---String Formatting

```
@Transactional(readOnly = true)
public interface BookRepository extends JpaRepository<Book, Integer>{
    @EntityGraph(attributePaths = "bookCategory")  <--@Entity Graph?
    List<Book> findFirst10ByOrderByNameAsc();

    @Modifying
    @Transactional
    @Query("DELETE FROM Book b WHERE b.bookCategory.id = ?1")
    void deleteInBulkByCategoryId(int categoryId);
    
    @Transactional
    void deleteByBookCategoryId(int categoryId);
}
   <--need to figure out  some details 
```



### 

##### String Formatting

```
String.format("Book %s.%s", (i+1), (j+1))
```

​                <--- 33808exp117

### 33808Exp118_SpringDataJPAChangeDataSource

### 33808exp119_SpringBootEmbeddedTomcatJNDIDataSource

 <--jndi code 

```
@Configuration
@EnableTransactionManagement
//@PropertySource("classpath:application.properties")
@EnableJpaRepositories(basePackages = "com.roytuts.spring.boot.jndi.datasource.repository")
                    <---basePackages is important to find the respository
public class AppConfig {
....
   <---@EnableJpaRepositories need :     
     JpaTransactionManager  <--it also need EntityManagerFactory
     EntityManagerFactory   <---this the mid layer between data source and high level 
     

it also has JNDI code 

    <--see also 33808exp126

```

### 33808Exp120_SpringBootJPAAutoTableCreation

### 33808exp121  jndi and jdbc template

### 33808exp122_SpringDataJPAQueryMethod

```
@Repository
public interface UserRepository extends JpaRepository<User, Long> {
    Optional<User> findByLastnameAndFirstname(String firstname, String lastname);

    Optional<User> findByLastnameOrFirstname(String firstname, String lastname);
    
    List<User> findByStartDateBetween(Date date1, Date date2);
    
    List<User> findByAgeLessThan(int age);
...
     <---using method names in jpa
```

### 33808Exp123_SpringDataJPANamedQuery

### 33808exp124_SpringDataJPAAuditing

user CRUD, Spring Data JPA

### 33808exp125_SpringDataJPAQueryAnnotation

```
@Repository
public interface UserRepository extends JpaRepository<User, Long> {
   @Query("select u from User u where u.emailAddress = ?1")
   User findByEmailAddress(String emailAddress);

   @Query("select u from User u where u.firstname like %?1")
   List<User> findByFirstnameEndsWith(String firstname);

   @Query(value = "select * from users, employees", nativeQuery = true)
   List<User> findUserCrossEmpolyee();
}
      <--using query and hql
```

### 33808exp126_SpringDataJPAMultipleDataSource [***]

```
@Configuration
@EnableJpaRepositories(
      basePackages = "net.guides.springboot.springbootmultipledatasources.security.repositories",
        entityManagerFactoryRef = "securityEntityManagerFactory",
        transactionManagerRef = "securityTransactionManager"
)                <----3 factors for Jpa stuff 
public class SecurityDataSourceConfig
{
   @Autowired
   private Environment env;
      
    @Bean
    @ConfigurationProperties(prefix="datasource.security")
    public DataSourceProperties securityDataSourceProperties() {
        return new DataSourceProperties();
    }
    
    @Bean
    public DataSource securityDataSource() {
        DataSourceProperties securityDataSourceProperties = securityDataSourceProperties();
      return DataSourceBuilder.create()
                 .driverClassName(securityDataSourceProperties.getDriverClassName())
                 .url(securityDataSourceProperties.getUrl())
                 .username(securityDataSourceProperties.getUsername())
                 .password(securityDataSourceProperties.getPassword())
                 .build();
    }
    
    @Bean
    public PlatformTransactionManager securityTransactionManager()
    {
        EntityManagerFactory factory = securityEntityManagerFactory().getObject();
        return new JpaTransactionManager(factory);
    }
    
    @Bean
    public LocalContainerEntityManagerFactoryBean securityEntityManagerFactory()
                      <--it is used in building JpaTransactionManager
    {
        LocalContainerEntityManagerFactoryBean factory = new LocalContainerEntityManagerFactoryBean();
        factory.setDataSource(securityDataSource());
        factory.setPackagesToScan(new String[]{"net.guides.springboot.springbootmultipledatasources.security.entities"});
        factory.setJpaVendorAdapter(new HibernateJpaVendorAdapter());
        
        Properties jpaProperties = new Properties();
        jpaProperties.put("hibernate.hbm2ddl.auto", env.getProperty("spring.jpa.hibernate.ddl-auto"));
        jpaProperties.put("hibernate.show-sql", env.getProperty("spring.jpa.show-sql"));
        factory.setJpaProperties(jpaProperties);
                                       <---seems jpa properties setting could do this way
        return factory;
    }
    
    @Bean
   public DataSourceInitializer securityDataSourceInitializer() 
                <---I think it is called during datasource building
   {
      DataSourceInitializer dataSourceInitializer = new DataSourceInitializer();
      dataSourceInitializer.setDataSource(securityDataSource());
      ResourceDatabasePopulator databasePopulator = new ResourceDatabasePopulator();
      databasePopulator.addScript(new ClassPathResource("security-data.sql"));
      dataSourceInitializer.setDatabasePopulator(databasePopulator);
      dataSourceInitializer.setEnabled(env.getProperty("datasource.security.initialize", Boolean.class, false));
      return dataSourceInitializer;
   }
    
    
}

```

### 33808Exp127_SpringDataJPAForBPOT2117  --not completed

### 33808Exp128_SpringDataJPATest

### 33808Exp129_SpringDataJPASortAndPagination

### 33808Exp130_SpringDataJPASortAndPagination

### 33808Exp131_SpringDataJpaOneToManyMultipleColumns

### 33808exp132 Spring data JDBC

DB table need to be created manually using  init.sql

### 33808exp133 mybatis 

```
<---for mybatis stuff , dao interface is the center
<---the caller of interface is higher level java code
<---the implementer of interface is mybatis 
@Mapper
public interface StudentMapper {

    /**
     * 新增
     * @param student
     * @return
     */
    int insert(Student student);
                  <---201127-33808exp133S004/S005 confirmed can use pojo as input
                  <---need set in xml side 
    
    /**
     * 更新
     * @param student
     * @return
     */
    int updateIgnoreNullById(@Param("student") Student student);
                             <---use annotation here, no need set in xml
    
    /**
     * 查询
     * @param id
     * @return
     */
    Student selectById(@Param("id") int id);


    @Select("select * from t_student where id = #{id}")
    Student annoSelectById(Integer id);
                                  <---seems annotation is way quicker 
    
    /**
     * 删除
     * @param id
     * @return
     */
    int deleteById(@Param("id") int id);
                        <---use annoation here, can still set type in xml
    
    @Delete("delete from t_student where id = #{id}")
    int annoDeleteById(Integer id);

}           
```

```
public interface ClazzMapper {

    /**
     * 根据id查询班级，并带出其学生信息
     * @param id
     * @return
     */
    ClazzExtend selectWithStudentsById(int id);
                       <---use xml, query is simple here
    @Select("select * from t_clazz where id = #{id}")
    @Results(id = "link", value = {
            @Result(column = "id", property = "id"),
            @Result(column = "name", property = "name"),
            @Result(property = "students", column = "id", javaType = List.class,
                    many = @Many(fetchType = FetchType.EAGER, select = "cn.itweknow.sbmybatis.mapper.StudentMapper.findByClazzId"))
    })
    ClazzExtend annoSelectWithStudentsById(Integer id);
                 <--configuration is done in xml 
                 <--tell the result column and if join, gives query
}
```



```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.itweknow.sbmybatis.mapper.StudentMapper">
  <resultMap id="BaseResultMap" type="cn.itweknow.sbmybatis.model.dao.Student">
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="name" jdbcType="VARCHAR" property="name" />
    <result column="age" jdbcType="INTEGER" property="age" />
    <result column="clazz_id" jdbcType="INTEGER" property="clazzId" />
               <--mapping from: db column to java name: clazzId
    <result column="number" jdbcType="VARCHAR" property="number" />
  </resultMap>
                         <---only selectById need resultMap

  <insert id="insert" parameterType="cn.itweknow.sbmybatis.model.dao.Student" useGeneratedKeys="true" keyProperty="id">
    insert into t_student(name,age,clazz_id,number) values
    (#{name},#{age},#{clazzId},#{number})
               <---parameterType's direct fields could be directly used here 
  </insert>

  <update id="updateIgnoreNullById">
    update t_student
    <set>
      <if test="student.name != null">  <--dynamic sql
        name = #{student.name}   
                    <---how to reference @Param stuff 
      </if>
      <if test="student.age != null">
        age = #{student.age}
      </if>
      <if test="student.clazzId != null">
        clazz_id = #{student.clazzId}
      </if>
      <if test="student.number != null">
        number = #{student.number}
      </if>
    </set>
    where id = #{student.id}
  </update>

  <select id="selectById" resultMap="BaseResultMap">
    select * from t_student where id = #{id}
  </select>

  <delete id="deleteById" parameterType="java.lang.Integer">
    delete from t_student where id = #{id}
  </delete>

</mapper>
 <--from: StudentMapper.xml
```



```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.itweknow.sbmybatis.mapper.ClazzMapper">
<resultMap id="BaseResultMap" type="cn.itweknow.sbmybatis.model.dao.Clazz">
  <id column="id" jdbcType="INTEGER" property="id" />
  <result column="name" jdbcType="VARCHAR" property="name" />
</resultMap>

<resultMap id="ClazzExtendMap" type="cn.itweknow.sbmybatis.model.dao.ClazzExtend">
  <id column="id" jdbcType="INTEGER" property="id" />
  <result column="name" jdbcType="VARCHAR" property="name" />
  <collection property="students" ofType="cn.itweknow.sbmybatis.model.dao.Student">
            <--either collection or association and need a type as well 
            <--using ofType
    <result column="sId" property="id"/>
    <result column="sName" property="name"/>
    <result column="sAge" property="age"/>
    <result column="sClazzId" property="clazzId"/>
    <result column="sNumber" property="number"/>
                <--from db as name to java 
  </collection>
</resultMap>

<select id="selectWithStudentsById" resultMap="ClazzExtendMap">

    select
      c.id as id,
      c.name as name,
      s.id as sId,
      s.name as sName,
      s.age as sAge,
      s.clazz_id as sClazzId,
      s.number as sNumber
    from t_clazz as c
      left join t_student as s on s.clazz_id = c.id
    where c.id = #{id}
  </select>
</mapper>
```

### 33808exp134_SpringWebFluxWithRepository

<-- access memory

### 33808exp135  from exp083 with jdbc userdetails service

start:     login:  superman/super

### 33808Exp136 jwt filter and JPA many to many

#### start:

​    need postman check:  200816ScreenShots 

#### breakpoint: 

```
1 AuthController line 61 generateJwtToken
           <--from authentication to form jwt  210225S002 verified jwt ok
```



### 33808exp137 transaction

<---transaction rollback test cases are interesting 

### 33808Exp138_SpringSecurityFormLogin

### 33808Exp139_SpringSecurityFormDifferentHandler

### 33808Exp140_SpringSecurityFormLoginJsonResponse

### 33808exp141 SpringSecurityFormLoginWithRoles

### 33808exp142 form login, custom user details service

#### start:

url: localhost:8080              http://localhost:8080/logout  to logout !!

username/password: 

​      javaboy/123    as admin user    can access: http://localhost:8080/admin/hello  and  http://localhost:8080/user/hello  

​      江南一点雨/123  as user:  can only access: http://localhost:8080/user/hello  

​      

#### Break points:

```
1. SecurityConfig line 82 <--- this is setting roles 
             then through hasRole method  will reach:   
                     ExpressionUrlAuthorizationConfigurer line 462 
                                <--- then in interceptUrl method, will add URL pattern into REGISTRY
                                      in Registry it has urlMappings which has : 
                                            requestMatcher:       /admin/**
                                            configAttributes:     hasRole (Role_Admin)
                               <---so the resource is now related to the roles; 
```

```
2 AbstractSecurityInterceptor line 196
             <---within beforeInvocation will obtain this metasource 
                        <---from ExpressionUrlAuthorizationConfigurer line 197 from REGISTRY
                             got attributes which has SpEL inside (method access)
```



```
3. AbstractSecurityInterceptor line233  
                   <---do the actual access control ( authorization) 
```



### 33808exp143_LogWithMDC

```
logging.pattern.level=%X{userId}%5p
     <--from application.properties  33808exp143
     <-- a pattern %X{key} to retrieve the values that are present in the MDC.
              The key will be userId in our example.
```

​         <---more pattern : https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html

```
@Component
public class MdcLogEnhancerFilter implements Filter {

    @Override
    public void destroy() {
    
    }
    
    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    
    }
    
    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException
    {
//        MDC.put("userId", "www.SpringBootDev.com");
//        MDC.put("userId", String.valueOf(servletRequest.hashCode()));
//        MDC.put("userId", String.valueOf(new Random().nextInt()));
        MDC.put("userId", String.valueOf(servletRequest.toString()));
                   <---MDC is actually thread local 
        filterChain.doFilter(servletRequest, servletResponse);
    }
}
```



### 33808exp144  access github

### 33808Exp145 interceptor 

### 33808Exp146_WebFluxRedis not completed

### 33808exp147 quick mvc crud with test

###### start

url: http://localhost:8080/books   etc.  





```
@Entity
public class Book {

.....

    @Author         <--use annotation
    @NotEmpty(message = "Please provide a author")
    private String author;
    ....
      <---then annotation definition in which use validator class 

<---web client usage see "web client"
<---exception handling see "webmvc"/"exception handling"
```

### 33808Exp148_SpringBootWebSocket

### 33808exp149 detailed logging configuration

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <include resource="org/springframework/boot/logging/logback/defaults.xml" />

    <springProfile name="default">
        <include resource="org/springframework/boot/logging/logback/console-appender.xml"/>
    
        <root level="INFO">
            <appender-ref ref="CONSOLE"/>
        </root>
    </springProfile>
    
    <springProfile name="prod">
    
        <appender name="FILE-ROLLING" class="ch.qos.logback.core.rolling.RollingFileAppender">
            <file>app_prod.log</file>
    
            <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
                <fileNamePattern>logs/archived/app.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
                <!-- each archived file, size max 10MB -->
                <maxFileSize>2KB</maxFileSize>
                <!-- total size of all archive files, if total size > 20GB, it will delete old archived file -->
                <totalSizeCap>20GB</totalSizeCap>
                <!-- 60 days to keep -->
                <maxHistory>60</maxHistory>
            </rollingPolicy>
    
            <encoder>
                <pattern>%d %p %c{1.} [%t] %m%n</pattern>
            </encoder>
        </appender>
    
        <logger name="org.springframework" level="INFO"/>
        <logger name="com.mkyong" level="DEBUG"/>
        <root level="ERROR">
            <appender-ref ref="FILE-ROLLING"/>
        </root>
    </springProfile>

</configuration>

output log in log file: 
2020-10-20 10:26:33,669 INFO org.springframework.web.context.ContextLoader [restartedMain] Root WebApplicationContext: initialization completed in 3523 ms
        <--first date, INFO is log level, class name, [threadname], message: "Root Web...."

```

​    <--see also 33808Exp149               explained 

​                 %t thread, 

​                 %p log level of logging event, 

​                 %c class, 

​                %d date, 

​               %m message 

​               <--gives different setting from dev or production

​                <--- detailed patterns (https://www.cnblogs.com/chrischennx/p/6781574.html)

### 33808Exp150 reactor 

​          <--reactive test base 

### 33808Exp151_ConfigurationYamlFormat

### 33808Exp152_AdvancedLoadTest

### 33808Exp153_SpringBootAddingMBean

### 33808Exp154_ReactiveStream

### 33808Exp155_RedisServerTest

### 33808exp156 RabbitMQ

##### start: 

docker start see 11041 

management ui:  http://192.168.1.100:15672/   username/pwd:   guest/guest

### 33808Exp157_LDAP Access

### 33808Exp158_SpringCloudRegistrationAndDiscovery

### 33808exp159 cloud configuration

### 33808Exp160_SpringCloudCircuitBreaker

### 33808Exp161_SpringCloudCircuitBreakerWebFlux

### 33808Exp162 gateway  it uses functional routing 

### 33808Exp163_SchedulingTask

### 33808exp164  Spring batch

### 33808Exp165_APIDocumentWithRestDocs

### 33808Exp166_CacheDataWithSpring

### 33808Exp167_ConsumerDrivernContracts

### 33808Exp168_CreateJavaProjectWithGradle

### 33808Exp169_ValidatingFormInput  running ok

### 33808Exp170_CreateAsynchronousMethod   

### 33808Exp171 Zuul



### 33808Exp172_MessagingWithGoogleCloudPubSub(02)  not complted

### 33808Exp173_MessagingWithJMS

33808exp174  client side load balance with ribbon

33808Exp175_AccessDataWithMongoDB

33808Exp176_AccessMongoDBDataWithRest

33808Exp177_CreateMultiModuleProject

33808Exp178_SpringBootDocker not completed 

#### 33808exp179 CORS enable for REST

<--exclude vintage and only use Junit5 Jupiter good!! 

#### 33808exp180 ReactJS with Spring Boot 

##### start : 

###### server side (only have rest available): 

start within IDEA spring boot application in security module; 

url:    http://localhost:8080/   --> http://localhost:8080/login 

user/pwd:  greg/turnquist     <--can check database loader class 

###### overall start (use this) : 

In IDEA maven view,  Spring boot maven plugin , then spring-boot: run 

​            <---this will do the webpack etc.  210314S001  

or

D:\Backup\PM1000\Billydev080107\MyEnabil\170424-1-AllScreenCopiesBPOT\201007-1-33808Exp180\S014 

​           <--run maven task from command line 

&&&&&&&&the following will be merged to keywords&&&&&

```
<div id="react"></div>    
    <--in index.html
ReactDOM.render(
   <App loggedInManager={document.getElementById('managername').innerHTML } />,
   document.getElementById('react')
)
    <--in app.js,reactor rending will replace the element with id="react"
    
Reactor basic structure:     
app.js has 4 extra classes and itself totally 5 classes 201124-33808exp180-s001
user interface like 201124-33808exp180-s002
```

```
==websocket has 3 parts==
==part1:send message ==
@Component
@RepositoryEventHandler(Employee.class)   <---listen to repository event
public class EventHandler {
........
   @HandleAfterCreate
   public void newEmployee(Employee employee) {
      this.websocket.convertAndSend(
            MESSAGE_PREFIX + "/newEmployee", getPath(employee));
   }
        <---when new Employee created, send message throw websocket to broker !!

==part2: listener part==
	componentDidMount() {
		this.loadFromServer(this.state.pageSize);
		stompClient.register([
			{route: '/topic/newEmployee', callback: this.refreshAndGoToLastPage},
			{route: '/topic/updateEmployee', callback: this.refreshCurrentPage},
			{route: '/topic/deleteEmployee', callback: this.refreshCurrentPage}
		]);
	}          
	       <---this is in app.js
	       <---when repository update, got websocket msg, then callback update frontend page
	function register(registrations) {
	const socket = SockJS('/payroll'); // <3>    <---socket connection
	const stompClient = Stomp.over(socket);         <---now can send stomp
	stompClient.connect({}, function(frame) {
		registrations.forEach(function (registration) { // <4>  
			stompClient.subscribe(registration.route, registration.callback);
		});
	});         
	     <--this is in websocket-listener.js
	     <--register the callback 
}
==par3: broker==
@Component
@EnableWebSocketMessageBroker
public class WebSocketConfiguration implements WebSocketMessageBrokerConfigurer {

	static final String MESSAGE_PREFIX = "/topic";
	
	@Override
	public void registerStompEndpoints(StompEndpointRegistry registry) {
		registry.addEndpoint("/payroll").withSockJS();   <--low layer address
	}
	
	@Override
	public void configureMessageBroker(MessageBrokerRegistry registry) {
		registry.enableSimpleBroker(MESSAGE_PREFIX);   <---exp180 use this 
		registry.setApplicationDestinationPrefixes("/app");   <--exp112 use this
	}
}
```

```
Todo: Security part:
1 roles setting
2 userDetailsService setting
```

```
Todo: spring-boot-starter-data-rest
   <--no longer need to write any controller ? how about complicated entity?
```

#### 33808exp181 LDAP with docker

```
# Entry 3: ou=groups,dc=mycompany,dc=com
dn: ou=groups,dc=mycompany,dc=com
objectclass: organizationalUnit
objectclass: top
ou: groups
       <--objectclass is the schema, gives a bunch of attributes to follow
       <--using structural inheritance to build the back bone
       <--see 201124-33808exp181 screen shots
```

### 33808Exp182_BeanPostProcessor

### 33808Exp183_SpringBootApplicationForTest            

### 33808exp184  spring cloud and oauth2, zuul, eureka , not completed 

​                     <---chines blog , code make no sense 

### 33808exp185 spring cloud with oauth2 , configuration, zuul, load balance, 

​                      <----code ok, but zuul in maintenance mode also old 

### 33808exp186 Spring cloud Gateway  (working)

​                     <--using  OAuth2 and JWT

```
String.format("Resource accessed by: %s (with subjectId: %s)" ,
        jwt.getClaims().get("user_name"),
        jwt.getSubject());
      <---33808exp186, we shall use more this way than use string + string
          need collect other more formats
```





### 33808exp187 Spring cloud Gateway OpenId , keycloak, 

###### start: 

​    On Linux VM:    keycloak start see docker compose part

​    On IDEA gateway app: 

​         access url in gateway:   

​          first localhost:8080 

​          then it redirects to http://192.168.1.100:8090/authxxxxx; 

​              input username and password:  spring-cloud-gateway-user/password                           

​                    <---see ReadMe.doc in keycloak folder !!! 

###### break points:                    

AuthenticationWebFilter  line 114

​      <---this breakpoint we can get all filters in this filter chain            

BearerTokenAuthenticationFilter  line 124 

​        <---this is from Oauth2 token got authentication part [important]

DefaultReactiveOAuth2UserService   line108

​         <--this is place to get the userInfo after got the authorization token [important]

DefaultReactiveOAuth2UserService  line 132

​         <---this is place extract scope from access token and give them to default user as authorities

DefaultServerRedirectStrategy line 39 

​          <---this is the actual place do the redirect [important]

OAuth2LoginReactiveAuthenticationManager line 99  

​         <--this is pace to get access token after authenticated [important]

OidcAuthorizationCodeReactiveAuthenticationManager line 173

​        <---this is the place where oidc token is created using access token or token relay happened

​              we need figure out which filter do this ? has it passed authentication ?

TravelGatewayApplication line 41

​       <--this is break point of customer code 

Flux line 9911

​       <--trying to debug reactor stream 

### 33808exp188 Spring SecurityReactive 

### 33808exp189 reactor debug

### 33808exp190 production ready debug 

### 33808exp191 reactor debug spring boot

### 33808exp192 aop to get webflux log

<--use the result the joint point 

### 33808exp193 spring cloud load balancer

### 33808exp194 spring cloud consul

###### start:

    C:\Billydld080107\201119-1-Consul\consul agent -server -bootstrap-expect=1 -data-dir=D:\Backup\PM1000\Billydev080107\TempDev\201119-3-33808Exp194consulData -ui -bind=192.168.1.64
            <---33808exp194





### 33808exp195 spring cloud zookeeper 

### 33808exp196 embedded zookeeper

### 33808exp197 spring cloud integration, gateway, load balancer, consul etc. 

### 33808exp198 spring cloud resilience , cloud configuration, 

###### start : 

url: http://localhost:8080/check   from client

<---client will read configuration from server, showing in log 

### 33808exp199 spring cloud circuit breaker 

###### start:

url:  http://localhost:8080/to-read 



### 33808exp200 spring rest with Swagger

JPA one to many

#### Start: 

url: http://localhost:8080/api/posts





### 33808exp201 spring data jpa blob



### 33808exp202 spring MVC with mybatis

###  33808exp203 webflux positioning through load test

​    some load test, both mvc and webflux included

### 33808exp204 webflux with mongodb

### 33808exp205 spring cloud gateway -- using 187 and 197 together

​           OIDC, cloud gateway

###### start

C:\Billydld080107\201119-1-Consul\consul agent -server -bootstrap-expect=1 -data-dir=D:\Backup\PM1000\Billydev080107\TempDev\201222-1-33808exp205_206_207ConsuleData  -ui -bind=127.0.0.1
                 <--33808exp205-208

Url:     web admin: localhost:8500   



### 33808exp206 spring oauth2 resource server for exp205

​          accept jwt token , resource server 

​          copy some service modules from exp187

### 33808exp207  spring cloud load balanced server 

​          register to consul server 

### 33808exp208 dup of exp206 as another load

### 33808exp209 try to use axios

​       <--from 33808exp180 (security module) and uses axios rest api 

<--- to be changed to do the reactjs dev only for code to be deployed to spring boot like exp210

### 33808exp210 spring build with webpack

​      <--copy from exp180 ( through exp209test--deleted) to accept the react js code from exp209 (passed test) and integrate build with webpack frontend plugin 

### 33808exp211 setup nginx

​     <--- need setup nginx with Spring boot

​          just linux Nginx setup and still use Exp036 application and it use localhost no upstream stuff

​    <--then we add server side application to do the load balance with db connections

​    <--check 10502 Collection/Configuration

### 33808exp212 nginx ssl 

​    <---how to install ssl connection in nginx 

   <--- how to do the authentication and ssl setup and maybe load balance through  reverse proxy

### 33808exp213 Sleuth and zipkin

###### start

```
D:\Backup\PM1000\Billydev080107\TempDev\210107-2-CodeFor33808exp213FromJavaInUse>java -jar zipkin-server-2.12.9-exec.jar
      <---launch
```

 <--Spring Cloud Sleuth and Zipkin

### 33808exp214 redis for caching

​     <--seems service level cache, use redis template 

### 33808exp215 csrf example 

### 33808exp216 jps specification

​    <--spring data jpa with specification

### 33808exp217 specification and join

​      <--specification and join

### 33808exp218 nginx and reactjs

### 33808exp219 continuous integration

​          <--this is just a virtual project actual project is 11031exp003

### 33808exp220 SpringDataJPA with Postgres

​         <--copy from Exp217 but with Postgres in Docker     

### 33808exp221 load test with Hikari connection pool 

<-------??seems have build issues , ,class files in root ???

```
root@billy-VirtualBox:/home/billy/blib/33808/33808exp221#java -jar 33808exp221-1.0-SNAPSHOT.jar root@billy-VirtualBox:/home/billy/blib/33808/33808exp221# java -jar 33808exp221-1.0-SNAPSHOT.jar --spring.datasource.url=jdbc:mysql://192.168.1.66:3306/33808exp221?useSSL=false  --spring.datasource.username=billyFromVbox  --spring.datasource.password=123456
            <--&&&&&& need check windows ip address to replace 192.168.1.66
                      need to turn off windows firewall 
                      some time need copy the above int notepad++ and look into the CR stuff ??
               210203 screen shots
               
            <---210205: change hikari connection poolsize:     
                  --spring.datasource.hikari.maximumPoolSize=3
            <---210215: change tomcat thread pool size 
                  --server.tomcat.threads.max=200  <--seems different from another one
```

### 33808exp222 SpringCloudDeployToK8s

###### start: 

​       url: http://192.168.1.100/ride   

​                <--from windows machine to linux virtual box , nginx running inside bridging to ingress 

### 33808exp223 WebFluxDebugWithIDEA

### 33808exp224 SpringBootGraphQL

###### start: 

launch Spring boot application  within IDEA

Url: http://localhost:8080/graphql?query=%7BbookById(id%3A%20%22book-1%22)%20%7B%20id%20%7D%7D

​                 <--grab book only 



Url: http://localhost:8080/graphql?query=%7B%0AbookById(id%3A%22book-1%22)%7B%0A%20id%0A%20name%0A%20pageCount%0A%20author%20%7B%0A%20%20firstName%0A%20%20lastName%0A%20%20%7D%0A%7D%0A%7D

​     <--check: https://github.com/graphql-java/tutorials/issues/5   <--this is place explained the input issues

```
It should work if you specify query params e.g.
http://localhost:8080/graphql?query=%7BbookById(id%3A%20%22book-1%22)%20%7B%20id%20%7D%7D
          <---input urlEncoded stuff 
query is encodeURIComponent("{bookById(id: \"book-1\") { id }}")
               <--- we can execute encoding within 11008exp021 javascript project: 
```



### 33808exp225 Distributed Session with Redis 

###### start:

docker run  -p 6379:6379 redis



### 33808exp226 use Spring data Redis as cache

start: 

### 33808exp227 GraphQL get data from REST??

​    <--not working, 

### 33808exp228 GraphQL CRUD with mysql and express ?????

​         <---this one is missing we can add later 

### 33808exp229 Kafka example (not working)

### 33808exp230 kafka another example 

### 33808exp231 kafka another example 

### 33808exp232 kafka another example 

​          <---very good fixed name issue

### 33808exp233 Spring Boot starter  

​    <---this seems a test for exp234, yes a simple one 

### 33808exp234 spring boot starter and user application 

​        <---billydev controller in autoconfiguration

​        <--user application is on top of 33808exp200

### 33808exp235 promethus

### 33808exp236 SpringBootOracleJDBCTempalte

### 33808epx237 JavaDatatypeAndOracleDatatypeWithJPA

​           <-- maybe we can try on unicode stuff 

### 33808exp238 SpringBootTest  good example

​          booking is overall test and also booking service unit test mimic all other beans !!!  very good !! 

###  33808exp239  Spring Boot test very good lots of cases

​                        <--seems Junit4 

​            4types of test 

​            1:  unit test of service, without spring env , mock up respository

​            2:  overall integration test 

​            3:  controller test within spring env 

​            4:   specific controller test with partly spring env 

### 33808exp240 Spring Boot GraphQL CRUD with MySQL

#### start: 

need database setup: 

D:\Backup\PM1000\Billydev080107\TempDev\200721-1-DBeaverScripts\33808exp240.sql



start from SpringBootGraphqlMysqlApplication

In postman do the post request:   <--need to choose graphql 

```
{ 
findAllTutotorials{
   id
   title
   description
   author{
      id
      name
    }
  }
}
```

### 33808exp241  spring security test  <--not continue



## Okey JPA Annotations <--seems not very useful

### @Column

    @Column(name ="role_name",nullable = false)
    private String roleName;
    @Column(name ="status",nullable = false)
    private String status;
    @Column(name ="create_date")
    private LocalDateTime createDate;
        <--from 33808exp185
    @Column(name = "user_name", unique = true)  <--column can have unique constraint
    @NotNull
    private String userName;    
          <--OauthAccessTokenEntity in 33808exp185

##### @Id

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
                  <---attention to: GenerationType
    @Column(name ="role_id",nullable = false)
    private Long roleId;
           <---UserRoleEntity in  33808exp185

##### @Column

```
@Column(name ="role_id",nullable = false)  <---nullable
private Long roleId;
   <---UserRoleEntity in  33808exp185    
```

    //    @Lob
    @Column(name = "client_secret",length = 4000)   <---has length
    private String clientSecret;
           <---OauthClientDetailEntity in 33808exp185

```
@Column(name = "token_id", unique = true)    <---unique stuff
@NotNull
private String tokenId;
       <---OauthRefreshTokenEntity in 33808exp185
```

##### @Lob

   private byte[] authentication;

​            <---OauthAccessTokenEntity  33808exp185

##### @ManyToOne

```
@ManyToOne
private PersonProfileEntity personProfileEntity;
      <--PersonAddressEntity in 33808exp185
```

##### @OneToOne

```
   @OneToOne(cascade = CascadeType.ALL)
   private PersonProfileEntity personProfileEntity;
           <----33808exp185
```

##### @OneToMany

    @OneToMany(mappedBy = "personProfileEntity", cascade = CascadeType.ALL, fetch = FetchType.LAZY, orphanRemoval = true)
    private Set<PersonAddressEntity> personAddressEntities = new HashSet<>(0);
          <---PersonProfileEntity in 33808exp185

### @Table

@Table(name = "tbl_sec_user_role",uniqueConstraints = {@UniqueConstraint(columnNames={"role_name"})})

​        <----seems columnNames are from database not java class

​        <----UserRoleEntity in 33808exp185

##### Sample code

33808exp126, 

##### Jpa java configuration 

33808exp126



# 33818 JEE

## Note: 

JEE API (https://docs.oracle.com/javaee/6/api/index.html?javax/servlet/http/HttpServletRequest.html)

JEE JPA API (https://docs.oracle.com/javaee/7/api/index.html?javax/persistence/package-summary.html)



## Questions: 

1.How to compare Spring stack with JEE?

2.What is EJB ? 

3.What is difference between Sprng Rest Service and JAX-RS ? 



## Exp

# 33820 struts

## Questions

1.What is struts?



# 33830 Java logging

## Note

Java Logging slf4j API (http://docs.glngn.com/latest/api/org.slf4j.slf4j-api/index.html?org/slf4j/spi/MDCAdapter.html)

## Okey Command line param

    -Dlogging.level.org.springframework=TRACE 
    -Dlogging.level.com.baeldung=TRACE
                     <---33808Exp152 ???Qus152??


  Java Logging Command Line configure arguments (https://www.baeldung.com/spring-boot-logging)

## Exp

33808exp053  slf4j in lombok

33808exp067  logback configuration

33808exp110  logback configuration

33808exp111 applicatin.properties has console logging pattern and log level setting,logback configuration

33808exp143 MDC logback configuration

33808exp149 logback configuration with file appender

​     Logback format string

```
log.info("{} row(s) inserted for student entity", rowNumInserted);
     <---{} is String format is better then use %s etc. 
```

​                 <-- https://examples.javacodegeeks.com/enterprise-java/slf4j/slf4j-format-string-example/

33808exp155 log4j configuration 

33808exp217 log4j configuration 



# 33840 MyBatis

## Questions

1.How to implement/custom MyBatis transaction with Spring AOP ?
2.What are the key points of MyBatis project?
3.What is the advantage of MyBatis plus ?
4.What is mybatis cache ?
5.How Spring integrate with MyBatis ?
6.What is mybatis batch mode ?
7.Does mybatis batch mode span to other thread ?
8.What is association in mybatis resultmap ?
9.What is mybatis update return code and why sometime it returns -2147482646?
10.Can we have complicated ORM examples ?
11.What is difference between association and collection ?
12.Do I need mybatis-config.xml in spring boot project ?

13.What is mybatis lazy load ?

14.How mybatis implement dynamic SQL?

# 33845 Hibernate

Hibernate API (https://docs.jboss.org/hibernate/orm/5.0/javadocs/)

Hibernate Validator API (https://docs.jboss.org/hibernate/stable/validator/api/index.html?org/hibernate/validator/constraints/Email.html)

# 33866 Groovy

## Questions: 

1.What is the difference between Groovy and java ? 

## Exp

# 33888 Apache Commons

## exp

### 33888exp001 to exp008

# 35000 Shellscripting

???????????????????Maybe merge to 10800 as we now use MD to manage those stuff 

### we need wrap 35000 stuff like Cheat Sheet into Exp and will merge into 10800

### these exp could also be refered by 10800

# 36000 Oracle DB

## Note:

see 36000exp024 for setup ; 

## Questions: 

1.What are the queries we must remembered ? 
2.What is best practice for DB schema design ?
3.How to reset oracle db password using linux root ?
4.What is difference between dba , sysdba and system?

5.How to implement distributed database system ?

6.What are Oracle db interview questions ?

7.How to setup Oracle docker ? 

8.What are oracle data types ?

9.What is oracle package ?

10.What is bitmap index ? Only supported by oracle ?

11.How to use Oracle explain plan ?

12.How Oracle 12 deal with JSON processing ?

13.How to setup sqlplus ? 

14.What is Oracle lock ?

15.How to database overall information quickly ? 

16.How is Oracle distributed solution and sharding ? 

17.What is new feature of Oracle 12 ?



## Exp to keywords

### 36000exp001 <--number functions ceil, floor, round, mode, bitand 

​           <--one decode function included

### 36000exp002 <--String functions substring,split etc. 

### 36000exp003  <--date time function, sysdate, months_between etc. 

### 36000exp004 stored procedure

### 36000exp005  <--query using with structure

### 36000exp006 <---setup new schema or user

### 36000exp007 <--get all tables and dba queries 

36000exp008  <--transaction blocking 

36000exp009  <--create table, modify table and do the constraints etc

36000exp010  <--crud

36000exp011  <--case, pseudo column rownum,  decode 

36000exp012  <--join and subqueries 

36000exp013 <--left right and full join 

36000exp014 <--null related stuff 

36000exp015 <--group by

36000exp016  <--pivot table

### 36000exp017  <---use pivot and join to split the field

### 36000exp018 <--selfjoin

### 36000exp019 <---use connect by to generate hierarchy

### 36000exp020* <--use connect by and partition by to show group details 

### 36000exp021* <--use joining table with rownum to split field content into rows 

### 36000exp022  <---setup data for exp

### 36000exp023  <---create oracle database using docker not completed

#### setup: 

docker pull store/oracle/database-enterprise:12.2.0.1

#### start: 

 docker run  -p 1521:1521   -d -it  store/oracle/database-enterprise:12.2.0.1

​             <---do not use <Oracle-DB-36000exp023>

​             <---better not use:  --name Oracle-DB-36000exp023  or there will be name conflict 

docker start 103c0bd83285  (be careful !!!)

​           <---103c0bd83285  is container id,  use  "docker container ls -a" to get it 

​             <---need make sure the above container was running fine, if not use docker run to start a new one !! 

### 36000exp024  <---setup or restore oracle on virtual box

<--210501 screen copies to see how to setup network, oracle tns and idea setup

#### start: 

 1 Option 1, just go to IDEA  36000exp024 , and switch to  BLIB_SQL_Oracle schema 

​                    then need setup using 36000exp022 

2 Option2 use SQLPlus

#### rules: 

   1 setup query  <--sometimes no need setup we can use shared shema setup by exp022 

   2 main query 

### 36000exp025 paging query

### 36000exp026  defined package and run it and 

​       <---also list all user defined procedures S002,  S005 using the internal package to get the table definition 

### 36000exp027  oracle directory structure

### 36000exp028 oracle explain plan 

### 36000exp029 query big table with index and without index

​    <--also has index creation,   check table space and extend table space , how to check table used space , index worked

### 36000exp030 when using function on query field then index not used 

  <---see screen shots 

### 36000exp031 test null in index column

null is ok when compare column not using null , but if use null as compare value, index will not be used 

### 36000exp032  3 tables join with "grandfather-father-child"  

<-- above relation and also "grandfather and child ", if these 2 relation match in data, no problem, but if they are not matched  relationship, the extra relationship might filter out some records

### 36000exp033  try index during group by and order by  seems not working

### 36000exp034   this is text file to give suggestion of query optimization





## Okey Explain Plan output

Index Fast Scan 

Index Range Scan

Table Access Full 



## Okey functions

## todo:  36000exp001 number function,  exp002 string function,  exp003 date functions

### instr

36000exp021 <--use instr to find location of substring

### length

36000exp017

### lpad 

​    padding space  36000exp019 , what you pad and how many to pad 

​    check: https://www.techonthenet.com/oracle/functions/lpad.php 

### replace

36000exp017

### substr

36000exp017

### to_char

36000exp019 <--convert number to char

### to_number 

36000exp021 <--convert string to number

## Okey Sqlplus Command

<--maybe like create user cmd come here ???

## Okey Sqlplus set

### set history on 

https://stackoverflow.com/questions/35289626/sql-plus-command-line-arrow-keys-not-giving-previous-commands-back

​             <--fix the scroll arrow key

### set linesize 200

### set pagesize 50

### set server output on

​          <---pl/sql output the sqlplus screen 

### set verify off

​           <---not show old/new  when use @salary variable in the query

### set wrap off 

​     <--seems making thing better  from: https://stackoverflow.com/questions/3006431/how-to-display-table-data-more-clearly-in-oracle-sqlplus/3006532

## Okey Users and Privileges

​           <---to add sys, sysdba etc. and concrete privileges;  

​             <---36000qus017-01-5 lots of  hands of stuff including 6:40 screen with user setup and privileges etc.

​             check:  https://blog.csdn.net/MOONCOM/article/details/52033436#:~:text=%E7%B3%BB%E7%BB%9F%E6%9D%83%E9%99%90%E5%88%86%E7%B1%BB%EF%BC%9A,%E4%B8%8D%E5%8F%AF%E4%BB%A5%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BB%93%E6%9E%84%E3%80%82   

​               check: https://zhidao.baidu.com/question/1371710366775490539.html

# 38000 MySQL 

## Note

### API

MySQL Doc (https://dev.mysql.com/doc/)

MySQL Doc reference manual(https://dev.mysql.com/doc/refman/8.0/en/)

My SQl blog Database normalization 3 norms (https://segmentfault.com/a/1190000022843792) 

### Common Sense Data 

#### cardinality

=NUM_ROWS*selectivity

​            <---my guess 1000rows, each group(same value) has 3, selectivity = 1/3, cardinality is 330 

​           <--from: http://blog.itpub.net/26736162/viewspace-2140358/ 

#### DBeaver Script location

 D:\Backup\PM1000\Billydev080107\TempDev\200721-1-DBeaverScripts

#### Log location

## Questions:

1.how to create common tables?
2.what is data type of MySQL ? What is different from Oracle ? 
3.What datetime data type to choose ? Timestamp or Datetime ?
4.What is the max varchar ?How to do the clob ?
5.How to insert double quote in varchar column ?
6.How to get the current db and other information ?
7.How to setup all database stuff in BPOT2114 ? 
8.How to create table with primary key ? 
9.How to use the incremental id ? 
10.How grant privilege to user ?
11.How to insert timestamp ?
12.Why default value issue for timestamp ?
13.Is mysql db table name case sensitive ? 
14.How to set global variable ?
15.How to deal with unicode in mysql ?
16.How to create and display stored procedures?
17.How mysql implement connect by ?
18.How to choose among all number types ?
19.How to use datetime functions?
20.How to select String or character types ?
21.What is the difference between charset and collation?
22.How to use MySQLslap ?
23.How to do the benchmark function ?
24.How to optimize MySQL database  ?
25.How to compare ISAM and InnoDB ?
26.How to setup index and show advantages of index ?
27.How to use explain plan ?
28.How to use query optimizer ?
29.How to optimizing database structure?
30.How to optimize in SQL statement ?
31.How to optimize InnoDB tables ?
32.How to postion MySQL functions ?
33.How about stream ?
34.How to understand execution plan ?
35.What is the difference between in and exists ?
36.What is full text index ?

37.What is transaction isolation level and its implementation ?

38.How to do mysql database sharding and split ?



## Exp to keywords

## <--todo:  38000 CTS or cheat sheet need to be wrapped in Exp

## <---todo:  like Oracle merge these queries into Exp and can be run toward the real data within IDEA 



### 38000exp001 

###          to exp011 <---current hold query for BPOT2114 which is not perfect maybe we need arrange them like Oracle do string ops, datetime etc.

### 38000exp012 DDL, DML and explain plan as well <---might need rearrange 

### 38000exp013  <--session setup

### 38000exp014  JPA and CLOB and BLOB etc

### 38000exp015 MySQL DB replication

#### start: 

docker container exec -it master_1 mysql -uroot -prootpswdmaster1

​           <---get into master database 

## 38000 Collection  <--better to wrap the following into ExpXXX so they can be easily referenced

#### server operations 

server start up option

```
my.cnf on windows  <--I guess should be my.ini

"C:\Program Files\MySQL\MySQL Server 8.0\bin\mysqld.exe" --defaults-file="C:\ProgramData\MySQL\MySQL Server 8.0\my.ini" MySQL80  
           <---see 201022-1  S001 
           <---open that ini file, we can get the following: 
datadir=C:/ProgramData/MySQL/MySQL Server 8.0/Data
default-storage-engine=INNODB
log-output=FILE
general-log=0
general_log_file="BILLYDELL.log"
slow-query-log=1
slow_query_log_file="BILLYDELL-slow.log"
long_query_time=10
             <-----logging might be important 
lower_case_table_names=1
              <--so case insensitive
max_connections=151              
```

​       <--from: https://stackoverflow.com/questions/1712646/i-can-not-find-my-cnf-on-my-windows-computer 

#### user operation

33808exp221  create users and grant privileges;

###### 

#### db isolation level  

   to be input from: https://www.cnblogs.com/fengzheng/p/12557762.html 



#### data source (need move to 38888)

##### connection pool

<--input connection pool stuff from  33808exp133

#### client and session 

command line client

```
SET default_storage_engine=NDBCLUSTER;

	<---set storage engine in session 
	           check exp013 
```



```
show global variables

show global variables like "%port%"

show global variables like "%auto%"

set global autocommit=0;

set session autocommit=0;

show session variables like "%auto%"

set session autocommit=1;
    <--these global and session settings will be gone after server restart
       
    <--details see 38000exp013
```

​      <--check: https://www.cnblogs.com/mrbug/p/9751919.html

```
SHOW GLOBAL STATUS like 'Innodb_page_size'
  result: Innodb_page_size  16384
    <-- 每个节点的大小一般为16K，即一次IO操作，会将16K的数据读取到内存中。
```

​     <--https://www.jianshu.com/p/795e7633d1b4

```
show session variables like "slow_query_log"

     <--慢查询日志指的是在 MySQL 中可以通过配置来开启慢查询日志的记录功能，超过 long_query_time 值的 SQL 将会被记录在日志中。我们可以通过设置“slow_query_log=1”来开启慢查询
```

​     <-- from: https://juejin.cn/post/6844904151646732295

```
SET FOREIGN_KEY_CHECKS=0;
    <--from 33808exp133
```

#### datatype conversion

mysql doc: 

​      https://dev.mysql.com/doc/connector-j/5.1/en/connector-j-reference-type-conversions.html

jdbc view : 

​      https://www.cis.upenn.edu/~bcpierce/courses/629/jdkdocs/guide/jdbc/getstart/mapping.doc.html

​         <---especially list the retrieve compatability which is very useful 



#### Clob blob conversion

​         https://thorben-janssen.com/mapping-blobs-and-clobs-with-hibernate-and-jpa/ 

TODO: 

​      (1) make a entity class which might need to map to not normal types :

​            bigDecimal, boolean, byte[] etc. to see how they are converted to mysql type through JPA

​      (2)  make a mysql table with all types , then do jdbc query and get the datatypes 

​       (3)List scenario that cause overflow, truncated or lost precision 

​                   <---so we can avoid them !! 

#### table operation ( need move to 38888 and some need wrap with exp)

###      <----better to be wrapped with Exp and then could be put in BLIB exp part and referenced by feature center !!!

### <---need to merge with CTS or Cheat Sheet as well

##### create table 

```
create table persistent_logins (

      username varchar(64) not null, 
    
                 <---better to have not null constraints, need collect reasons
    
      series varchar(64) primary key, 
    
                  <----I guess table usually have primary key
    
      token varchar(64) not null, 
    
             <---not fixed length char, less than 65k use varchar
    
      last_used timestamp not null);
    
                <----timestamp will consider timezone, which timezone client or server?
                     I guess should be client, check U003 for details 
```

​       <--- from API decrease 

```
DROP TABLE IF EXISTS `t_student`;
CREATE TABLE `t_student` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'id',
              <---auto_increment is important
  `name` varchar(255) DEFAULT NULL COMMENT '姓名',
                <---default null is interesting
  `age` int(11) DEFAULT NULL COMMENT '年龄',
  `clazz_id` int(11) DEFAULT NULL COMMENT '班级id',
  `number` varchar(6) DEFAULT NULL COMMENT '学号',
  PRIMARY KEY (`id`) USING BTREE
              <--- primary key in the very last,  BTree and other options need to collect
) ENGINE=InnoDB AUTO_INCREMENT=19 DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC;

   <---must use `` in `id`, not 'id', same when `id` is referenced in primary key
   <---if not use `` that is ok !!
   <--totally different from java:
     (i) after table name use "(" not "{" 
     (ii) varaible first then type !!
```

​       <---from 33808exp133

```
DROP TABLE IF EXISTS `user`;

CREATE TABLE `user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
             <---collate need to collect more information
             <---seems name always default null
  `address` varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;
         <---can we assign engine table by table 
         
```

​     <-- from: http://mybatis.javaboy.org/2019/1102/helloworld



db creation example with foreign key
https://grobmeier.solutions/spring-security-5-using-jdbc.html

​         <---need add the code 



33808exp133

33808exp202

##### modify table

```
alter table

(a) Add column

   alter table emptest add (salary int, hire_date timestamp , height int) 
                 <---how about the data already exists in table
                 
(b) Modify column

alter table emptest modify  height  varchar(30)

alter table emptest alter  hire_date set  DEFAULT CURRENT_TIMESTAMP
             <---need confirm
                  desc emptest
                  select * from emptest

alter table emptest  rename column  height  to high

alter table emptest modify  high  varchar(35) 
         <---to test:  select * from emptest

(c) drop column  

   alter  table emptest drop column high

   desc emptest  
        -----seems only rename column and drop column need add the "column" into !!
```

##### insert data

```
insert into posts (jpa_one_to_many_demo.posts.content, created_at,updated_at,description,title) 

   values ("billy test", CURRENT_TIMESTAMP(),CURRENT_TIMESTAMP(),"desc1","admin")
             <---current time 
```





#### index (need wrap with Exp and merge to 38888)

##### index concepts

​         <--- see 38000Qus026_(02) which is very good

##### create general index

```
CREATE TABLE t1 (
  col1 VARCHAR(10),
  col2 VARCHAR(20),
  INDEX (col1, col2(10))
);    <--general create table with index

CREATE TABLE t1 (col1 INT, col2 INT, INDEX func_index ((ABS(col1))));
         <-- with function index
CREATE INDEX idx1 ON t1 ((col1 + col2));
          <---
CREATE INDEX idx2 ON t1 ((col1 + col2), (col1 - col2), col1);
ALTER TABLE t1 ADD INDEX ((col1 * 40) DESC);
```

​           <--- from decrease , should be general index and function index

##### create composite index 

```
CREATE TABLE table_name (
    c1 data_type PRIMARY KEY,
    c2 data_type,
    c3 data_type,
    c4 data_type,
    INDEX index_name (c2,c3,c4)
);
     <---create index during table creation
     
CREATE INDEX index_name 
ON table_name(c2,c3,c4);
       <--add index on existing table
```

​      <--from: https://www.mysqltutorial.org/mysql-index/mysql-composite-index/#:~:text=To%20create%20a%20composite%20index%20at%20the%20time%20of%20table,c2%2C%20c3%2C%20and%20c4.

##### show index

```
SHOW INDEXES FROM table_name;

```

​           <-- from: https://www.mysqltutorial.org/mysql-index/mysql-show-indexes/#:~:text=To%20query%20the%20index%20information,table%20in%20the%20current%20database.

#### query operation (to do and wrap with Exp and put into 38888)

​    see some old queries in 36000 Exp

##### limit 

```
select * from employee limit  10, 2  
```

​     <-- row 11 and 12, when offset is big use subquery see below

​     <--https://segmentfault.com/a/1190000008859706

## database optimization 

## <----could be wrapped in Exp and referenced by BLIB and feature center !!!! 

​    

​        <-- check overall rules on paper

​         <--check U005 

MySQL 数据库常见的优化手段分为三个层面：SQL 和索引优化、数据库结构优化、系统硬件优化

​         <---**Check 38000Qus024_(02) <--this one is super important**

​         <---link is: https://juejin.im/post/6844904151646732295

##### 优化目标

​     IO   : 90% used in IO ,  reduce number of IO

​     CPU :  order by, group by, distinct  consume lots of cpu

##### 方案一： SQL 和索引优化

###### 使用正确的索引

```
对于联合索引来说，要遵守最左前缀法则。比如：组合索引（a,b,c）三列，我们可以使用（a）、（a,b）、(a,c)、（b、c）、（a,b,c）但是不能以（b,a）、(c,a)、（c,b）等组合使用否则导致索引失效。
     <--(seems the rule is: must use the first index field )
     

必要时可以使用force index来强制查询走某个索引。 

build index on field with big cardinality 
use concatenated instead of composite 
use covering index as much as possible
          <--from original note; 

在使用索引字段作为条件时，如果该索引是复合索引，那么必须使用到该索引中的第一个字段作为条件时才能保证系统使用该索引，  否则该索引将不会被使用，并且应尽可能的让字段顺序与索引顺序相一致。

索引并不是越多越好，索引固然可以提高相应的 select 的效率，但同时也降低了 insert 及 update 的效率，
因为 insert 或 update 时有可能会重建索引，所以怎样建索引需要慎重考虑，视具体情况而定。
一个表的索引数最好不要超过6个，若太多则应考虑一些不常使用到的列上建的索引是否有必要。

           <--query should try to use index !!
           <--- from: https://zhuanlan.zhihu.com/p/102150451
```



###### sql书写时的注意:

```
在 MySQL 5.0 之前的版本要尽量避免使用 or 查询，可以使用 union 或者子查询来替代，因为早期的 MySQL 版本使用 or 查询可能会导致索引失效，在 MySQL 5.0 之后的版本中引入了索引合并，简单来说就是把多条件查询，比如 or 或 and 查询的结果集进行合并交集或并集的功能，因此就不会导致索引失效的问题了。如果限制条件中其他字段没有索引，尽量少用or。

避免在 where 查询条件中使用 != 或者 <> 操作符，因为这些操作符会导致查询引擎放弃索引而进行全表扫描。
          <--否则将引擎放弃使用索引而进行全表扫描
          <--https://zhuanlan.zhihu.com/p/102150451

适当使用前缀索引，MySQL 是支持前缀索引的，也就是说我们可以定义字符串的一部分来作为索引。我们知道索引越长占用的磁盘空间就越大，那么在相同数据页中能放下的索引值也就越少，这就意味着搜索索引需要的查询时间也就越长，进而查询的效率就会降低，所以我们可以适当的选择使用前缀索引，以减少空间的占用和提高查询效率。

要尽量避免使用 select *，而是查询需要的字段，这样可以提升速度，以及减少网络传输的带宽压力。

关于JOIN优化，尽量使用 Join 语句来替代子查询，因为子查询是嵌套查询，而嵌套查询会新创建一张临时表，而临时表的创建与销毁会占用一定的系统资源以及花费一定的时间，但 Join 语句并不会创建临时表，因此性能会更高。
      <--避免频繁创建和删除临时表，以减少系统表资源的消耗        
         临时表并不是不可使用，适当地使用它们可以使某些例程更有效，例如，当需要重复引用大型表或常用表中 
         的某个数据集时。但是，对于一次性事件，最好使用导出表。
        在新建临时表时，如果一次性插入数据量很大，那么可以使用 select into 代替 create table，避免造成
        大量 log ，
        以提高速度；如果数据量不大，为了缓和系统表的资源，应先create table，然后insert。
        如果使用到了临时表，在存储过程的最后务必将所有的临时表显式删除，先 truncate table ，然后 drop 
        table ，这样可以避免系统表的较长时间锁定。   
        尽量避免使用游标，因为游标的效率较差，如果游标操作的数据超过1万行，那么就应该考虑改写。
        使用基于游标的方法或临时表方法之前，应先寻找基于集的解决方案来解决问题，基于集的方法通常更有效。
        与临时表一样，游标并不是不可使用。对小型数据集使用 FAST_FORWARD 游标通常要优于其他逐行处理方
        法，尤其是在必须引用几个表才能获得所需的数据时。
         在结果集中包括“合计”的例程通常要比使用游标执行的速度快。如果开发时间允许，基于游标的方法和基于
         集的方法都可以尝试一下，看哪一种方法的效果更好。
         <--the above need to be digested
       <---from: https://zhuanlan.zhihu.com/p/102150451
        

 我们要尽量使用小表驱动大表的方式进行查询，也就是如果 B 表的数据小于 A 表的数据，那执行的顺序就是先查 B 表再查 A 表。
          <---I guess the driving cost is very high !!

不要在列字段上进行算术运算或其他表达式运算，否则可能会导致查询引擎无法正确使用索引，从而影响了查询的效率。
          <---如：select id from t where num/2=100
                应改为:
              select id from t where num=100*2
          <-- 应尽量避免在where子句中对字段进行函数操作，这将导致引擎放弃使用索引而进行全表扫描。如：
              select id from t where substring(name,1,3)='abc'--name以abc开头的id
                  应改为:
              select id from t where name like 'abc%'
          <-- 不要在 where 子句中的“=”左边进行函数、算术运算或其他表达式运算，
               否则系统将可能无法正确使用索引。              
           <--from: https://zhuanlan.zhihu.com/p/102150451

增加冗余字段可以减少大量的连表查询，因为多张表的连表查询性能很低，所有可以适当的增加冗余字段，以减少多张表的关联查询，这是以空间换时间的优化策略。

避免类型转换，这里所说的“类型转换”是指 where 子句中出现 column 字段的类型和传入的参数类型不一致的时候发生的类型转换。
        <---will cause every record do the same conversion again and again
        
尽量用 union all 代替 union，union 和 union all 的差异主要是前者需要将两个(或者多个)结果集合并后再进行唯一性过滤操作，这就会涉及到排序，增加大量的 CPU 运算，加大资源消耗及延迟。所以当我们可以确认不可能出现重复结果集或者不在乎重复结果集的时候，尽量使用 union all 而不是 union。

尽量少排序  order  by，排序操作会消耗较多的 CPU 资源，所以减少排序可以在缓存命中率高等 IO 能力足够的场景下会较大影响 SQL 的响应时间。如果排序字段没有用到索引，就尽量少排序。

SQL语句中IN包含的值不应过多，MySQL对于IN做了相应的优化，即将IN中的常量全部存储在一个数组里面，而且这个数组是排好序的。但是如果数值较多，产生的消耗也是比较大的。
        <-- in 和 not in 也要慎用，否则会导致全表扫描，如：
             select id from t where num in(1,2,3)
             对于连续的数值，能用 between 就不要用 in 了：
             select id from t where num between 1 and 3
             <-- from: https://zhuanlan.zhihu.com/p/102150451

当只需要一条数据的时候，使用limit 1，这是为了使EXPLAIN中type列达到const类型。
           <---explicitly limit to 1, the explain type need look into
           
区分in和exists， not in和not exists。
        <---? I guess need compare to semi join and temp table stuff 
            condition push down
        <---很多时候用 exists 代替 in 是一个好的选择：
            select num from a where num in(select num from b)
            用下面的语句替换：
            select num from a where exists(select 1 from b where num=a.num)    
                  <---I think this is very typical condition push down
        <--from: https://zhuanlan.zhihu.com/p/102150451
        
使用合理的分页方式以提高分页的效率。
       <--paing and filtering 

分段查询
        <-- 

避免在 where 子句中对字段进行 null 值判断
         <--否则将导致引擎放弃使用索引而进行全表扫描
            select id from t where num is null
            可以在num上设置默认值0，确保表中num列没有null值，然后这样查询：
            select id from t where num=0
         <--https://zhuanlan.zhihu.com/p/102150451  

不建议使用%前缀模糊查询，如果使用%前缀来模糊查询，建议使用全文索引。
      <-- 下面的查询也将导致全表扫描：
         select id from t where name like '%abc%'
         <--from: https://zhuanlan.zhihu.com/p/102150451


```

​      

##### 方案二：库结构优化

###### 最小数据长度

       一般说来数据库的表越小，那么它的查询速度就越快，因此为了提高表的效率，应该将表的字段设置的尽可能小，比如身份证号，可以设置为 char(18) 就不要设置为 varchar(18)。
         <---?? should we use varchar or char ??
         因为char无论存储数据长度本身长度多少，都会占用固定的长度，因此存储空间占用会有一定的浪费，而varchar由于是可变长度，这个问题就可以得到解决，但在性能上会受到一定的影响，对于长度基本变化不大，且要求查询速度的应用来讲，char会更加合适，而varchar更节约存储空间
         <--from: https://blog.csdn.net/belen_xue/article/details/52671363
         尽可能的使用 varchar 代替 char ，因为首先变长字段存储空间小，可以节省存储空间，
         <--from: https://zhuanlan.zhihu.com/p/102150451
###### 使用最简单数据类型

    能使用 int 类型就不要使用 varchar 类型，因为 int 类型比 varchar 类型的查询效率更高。

​    
​    尽量使用数字型字段，若只含数值信息的字段尽量不要设计为字符型，这会降低查询和连接的性能，并会增加存储开销。
​    这是因为引擎在处理查询和连接时会逐个比较字符串中每一个字符，而对于数字型而言只需要比较一次就够了。
​                <--from: https://zhuanlan.zhihu.com/p/102150451

###### 尽量少定义 text 类型

       text 类型的查询效率很低，如果必须要使用 text 定义字段，可以把此字段分离成子表，需要查询此字段时使用联合查询，这样可以提高主表的查询效率。
###### PK need to be small

​      <--from my original reading mysql doc as pk will be duplicated in other index; 

###### 选择合适的存储引擎

       存储引擎类型：MyISAM、InnoDB、MEMORY、MERGE、TokuDB、CSV、Archive等。
    
       MyISAM：如果应用是以读操作和插入操作为主，只有很少的更新和删除操作，并且对事务的完整性、并发性要求不是很高，那么选择该存储引擎是非常合适的。MyISAM是在Web、数据仓库和其他应用环境下最常使用的存储引擎之一。
    
        InnoDB：用于事务处理应用程序，支持外键。如果应用程序对事务的完整性有比较高的要求，在并发条件下要求数据的一致性，数据操作除了插入和查询外，还包括很多的更新、删除操作，那么InnoDB存储引擎是比较合适的选择。InnoDB存储引擎除了有效地降低由于删除和更新导致地锁定，还可以确保事务地完整提交(Commit)和回滚(Rollback)，对于类似计费系统或者财务系统等对数据准确性要求较高地系统，InnoDB都是合适地选择。
    
       MEMORY：将所有数据保存在RAM中，在需要快速定位记录和其他类似数据的环境下，可提供极快的访问。MEMORY的缺陷是对表的大小有限制，太大的表无法缓存在内存中，其次是要确保表的数据可以恢复，数据库异常终止后表中的数据是可以恢复的。MEMORY表通常用于更新不太频繁的小表，用以快速访问结果。
              <---will it be persisted
    
       MERGE：用于将一系列等同地MyISAM表以逻辑方式组合在一起，并作为一个对象引用它们，MERGE表地优点在于可以突破对单个MyISAM表大小的限制，并且通过将不同的表分布在多个磁盘上，可以有效地改善MERGE表的访问效率，这对于诸如数据仓库等VLDB环境十分适合。属于第三方存储引擎 ，高写性能高压缩率，支持事务处理的MySQL和MariaDB的存储引擎，支持大多数在线DDL操作。
    
       TokuDB：使用Fractal树索引保证高效的插入性能;优秀的压缩特性，比InnoDB高近10倍;Hot Schema Changes特性支持在线创建索引和添加、删除属性列等DDL操作。使用Bulk Loader达到快速加载大量数据;提供了主从延迟消除技术;支持ACID和MVCC。
###### 适当分表、分库策略

       分表和分库方案也是我们经常说的垂直分隔（分表）和水平分隔（分库）。
    
       分表是指当一张表中的字段更多时，可以尝试将一张大表拆分为多张子表，把使用比较高频的主信息放入主表中，其他的放入子表，这样我们大部分查询只需要查询字段更少的主表就可以完成了，从而有效的提高了查询的效率。
    
       分库是指将一个数据库分为多个数据库。比如我们把一个数据库拆分为了多个数据库，一个主数据库用于写入和修改数据，其他的用于同步主数据并提供给客户端查询，这样就把一个库的读和写的压力，分摊给了多个库，从而提高了数据库整体的运行效率。

###### Additional: 

​      <--from my original paper; 

   BLOB etc on standalone server; 

   set Buffer Pool Size 

   redo log size ?

   table and db size ?

   batch in PK order, 

​    periodically archive and index maintenance  and table optimization 



  尽量避免大事务操作，提高系统并发能力。

  尽量避免向客户端返回大数据量，若数据量过大，应该考虑相应需求是否合理。

​          <---from: https://zhuanlan.zhihu.com/p/102150451

##### 方案三： 系统硬件优化

###### 磁盘

   尽量使用多个小磁盘而不是一个大磁盘，因为磁盘的转速是固定的，有多个小磁盘就相当于拥有多个并行运行的磁盘一样。

###### 网络

   条件允许的话也可以设置多个网卡
   DNS配置 尽量使用skip-name-resolve来减少因解析
   检查网络的ping 丢包率。
   通过优化/etc/sysctl.cnf 中的网络参数，提升性能

###### 内存

   MySQL 服务器的内存越大，提高了整个 MySQL 的运行效率。

##### 知识扩展

使用慢查询日志功能，查询出比较慢的 SQL 语句，然后再通过 explain 来查询 SQL 语句的执行计划
设置“slow_query_log=1”来开启慢查询，它的开启方式有两种
开启慢日志功能之后，会对 MySQL 的性能造成一定的影响，因此在生产环境中要慎用此功能。

#### execution plan

​         <---check 38000Qus034, Qus027  

​         <--Qus034 super good and there is a good example to do !!!

​         <---U007 list output format 

​         <--- https://juejin.im/post/6844904151646732295   <---gives detailed explanation of plan

#### Load test exp

#### number operations

#### datetime operations

string operations 

#38888 Database General and Comparison

# <----------these questions should be answered in specific data ( put int questions or exp) then be referneced by MD feature center

### 38888 Doc

#### db ranking

https://db-engines.com/en/ranking_trend

### 38888 Data

#### Data Type Collections

 see 33808 key word collection -base code  stuff 

#### Questions  <-- to be split into each specific databases !!! 

1.How to deal with two big table join ?
2.How index can help with loop join and merge join ?
3.How to do the execution plan within dbeaver?
4.Can we give example on how index is used ?
5.How can we setup an experiment Derby database ?
6.How to get the RUNTIMESTATISTICS ?
7.How to get the row in left table not found in right table?
8.How to optimize not in ?
9.How to prove 2 query results are the same ?
10.Why split left join into inner join plus union all help ?
11.How does data statistics affect the query optimization? including selectivity and cardinality.
12.How lock stuff affect performance ?
13.How explainplan cost is related to the actual time consuming?
14.How concurrency is related to the lock ?
15.How tomcat or web server threads is related to the lock?
16.How to prove index help ?
17.What are the means we all have to tune the database ?
18.What is duration and fetch time of a query ?
19.What is relationship between transaction isolation, lock and concurrency?
20.Does Spring transactional support async call ?
21.What is database lock?
22.What is the issue of big transaction?
23.What is the issue of read uncommitted ?

24.How to categorize database knowledge?

25.How to compare oracle DB and MySQL DB ?  <--I guess whole 38000 need convert to MD feature center stuff !!!!

#### Key To Exp  <---should be moved to Feature center!!!!!!!!!!!!!!!!!!!!!!

##### Data Type

36000 Oracle

​    https://docs.oracle.com/cd/B28359_01/server.111/b28318/datatype.htm#CNCPT012

38000 MySQL

​    U002,U003, U004

​     https://dev.mysql.com/doc/refman/8.0/en/data-types.html

39008 Postgres

​     https://www.postgresql.org/docs/9.5/datatype.html

##### Data Type Number

38000U002 Number types

​      <--decimal and number is the same 

##### Data Type Date Time

38000U003 Date Time Types

##### Data Type String 

38000U004 String Type

##### Data Type Lob

##### DDL create tables

38000exp002  create table timestamp, varchar, int

38000exp003 create table with medium text (16M)

38000exp007 create table with SMALLINT(2 byte) and timestamp

38000exp008 create table with primary key, id bigint( 8bytes) , not null and auto_increment

​              <--- drop table as well

##### DDL alert tables

##### DDL drop tables

##### DDL truncate table

##### DDL comment tables

##### DDL rename tables

##### DDL create constraints

##### DDL alter constraints

##### DML BASIC CRUD

38000exp002  insert into table and delete from table

38000exp004 insert into timestamp with now() <--maybe not good

##### DML Join

38000exp004 inner join

##### Functions

36000 oracle 

​         https://www.w3resource.com/oracle/index.php

38000 mysql 

​        https://www.w3schools.com/sql/sql_ref_mysql.asp

##### Functions Number

36000exp001 abs, ceil, floor, trunk, round, bitand, mode

Functions ... (to be added from 36000 Exp stuff )

##### DB Info and setup

38000exp001 show database and create databases;

##### DB User Setup and privilege

##### DB backup archive and maintenance



##### Framework cache

33808 spring data jpa

​     33808exp166 <--already implemented default cache

​     33808exp215 <--our own hardcoded cache !! 

​     see qus042 ( to be wrapped a exp)

​     book152pd239  configure cache with redis <--should be better than exp215

33840 mybatis   

​     see  qus004 

​     book147pd137 <---cache L2 need to be configured in pd139 **

​     book146pd46 <--all need wrap an example

##### Framework dynamic SQL

33808 Spring data jpa

​       exp217  in memory postgres database implementation

​       exp220  postgres on docker !!   

​                   <---exp217/220 both have @manyToMany annotation and JPASpecificationExecutor 

​        Qus046_(02)_1 <--define a result object interface and use @Query annotation; <--wrap with Exp

​        book152      

​           pd89 also mentioned @Query <---better than @ManyToMany annotation  

​           query by example pd      

​            <--to wrap with exp

33840 mybatis

​        book146pd42 9 tags :trim | where | set | foreach | if | choose| when | otherwise | bind。

​               <--to wrap with Exp

##### Framework lazy load

33808 Spring data jpa

​      see 33808qus173 (need to create and test exp here)

33840 mybatis   

​     see Qus013 (need to create exp to test)

​     book146pd46

#### Exp to Key



### 38888 Collection

# 39008 Postgres

## Questions

1.What is Postgres?

### 

# 50100 Performance (merge to 50300)

## Questions:

1.How to read flamegraph?
2.How to improve HTML performance ?





# 50216 Authentication and authorization

<--see  Security in feature center

## Note: 

### OAuth2.0

Oauth2.0 (https://tools.ietf.org/html/rfc6749#page-1)

​    <---some comments: 

```
The authorization code provides a few important security benefits,
   such as the ability to authenticate the client, as well as the
   transmission of the access token directly to the client without
   passing it through the resource owner's user-agent and potentially
   exposing it to others, including the resource owner.
      <---seems authorization code go through the browser, use authorization code
          to communicate with the client (whichi has client information),the it is
          client to have the access token !! 33808exp093/094
      <---in 33808exp084, the resource server seems the same as client, so we use
          only authorization code instead of access token which has more detailed info
```

   <---Qus017_(03)  very good article!! 

OAuth2.0 token introspection

​     https://tools.ietf.org/html/rfc7662

### Oauth2 official site

https://oauth.net/2/

### OpenID Connect

https://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation

## Questions:

1.What can we learn from w10029, the procedure of web authentication ?
2.Is http session only belong to ASP , JSP , are they the same ? Is each communication session id the same ?How session is implemented ?
3.What is the difference between server side session and client side session ?   
4.What is third party cookie ?
5.Relationship between cookies and session id ?
6.What is JWT ?
7.JWT vs session id authenticiation ? 
8.How JWT is created ? Especially in Spring ? 
9.Difference between server side and client side cookies ? 
10.How to secure Spring APIs with Auth0?
11.How to secure Spring Boot API and SPA with OAuth2.0 ?
12.What is gerneral Spring Boot authentication?
13.What is relationship between SAML and Auth0?
14.Difference between SAML2.0 and Oauth2.0? 
15.How about JWT timeout setting ?
16.Do we need to renew JWT each request ?
17.What is OAuth2.0?
18.What is RBAC?
19.What is 2FA?
20.What is SSO ?
21.What is the issue to use JWT as authentification method ?
22.What is difference between authentication and authorization ?
23.How to implement cookies authentication ?
24.How to do SPA authentication?
25.What is oauth2.0 SSO procedure ?
26.What is local redis SSO procedure ?
27.How to compare SAML vs. OAuth2 vs. OpenID Connect?

28.What is OpenId connect ?

## Exp

in : D:\Backup\PM1000\Billydev080107\wsCW7

50216exp  8example and 1 demo example here

​        <---exp008 is the most important one



# 50220 LDAP

## Questions

1.How to setup docker LDAP server ?
2.How to setup users in LDAP ?

## Exp

33808exp181 

### 

# 50300 Distributed system and architecture

## Note: 

https://www.youtube.com/watch?v=o36vWQCRrp0 

​             <---talking about microservice top 25 interview questions ok

## Questions: 

1.How to implement idempotent?

2.What are concurrency models ? 

3.What is gRPC and RPC ?

4.What is blocking queue and internal lock and how to implement conditional queue ?

5.How to implement a distributed blocking queue ?  

6.What is UUID and snow flake ? 

7.How to design the system from performance view ?

#51012 applied algorithm and Leet code test

### 51012exp  16 examples here  <--including some leetcode stuff

# 51080 SLB  (merge to 50300??)

## Questions

1. What are basic SLB solutions?

# 51208 Redis

## Questions

1.what is 缓存雪崩、缓存穿透、缓存预热、缓存更新、缓存降级?
2.Does redis need write data back to database ?
3.How to setup redis on docker version ?
4.How to use redis in java application ?
5.How does java applicatioin work with redis as database cache ?
6.What is data pre-warm up ?
7.What is redis CAS expiring and distributed lock ?
8.What is typical application of redis ?
9.How to connect to redis and do some basic test ?

# 51302 RabbitMQ

## Note

#### AMQP

https://www.amqp.org/ 

## Questions: 

1.How to use Rabbit MQ Server?
2.How can I check if RabbitMQ is running ?
3.What are key concepts of RabbitMQ?
4.How to use RabbitMQ to coordinate multiple threads ?
5.How to install RabbitMQ with docker ?
6.How to compare JMS and AMQP?

7.When to use MQ?

8.How does message system ensure that no message was lost ?

## Exp

147pd179 

33808exp156

bpot2123 vhr



# 51500 DevOps

## Questions

1.How can we build a continuous integration system in docker age?

2.What is essential of Agile methodology? 

### 

# 51502 Test

## Questions

1.How to do the REST API test ?
2.How to do javascript test ? Any framework?
3.How to do the react.js test ?
4.What is UX test ?
5 What is TDD?
6.Is there any tutorial for MockMVC?
7.What is integration test ?
8.What is Stress test ?
9.What is A/B test ?

10.How to do the stress test report ?

11.What is test interview questions ?

12.How to write unit test ?

### 

# 51602 TCP/IP

### Note

#### Ip  3 classes and CIDR

 <-- https://en.wikipedia.org/wiki/Classful_network

<-- https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing

#### Tcp 14 states

```
状态  描述
LISTEN  
    首先服务端需要打开一个socket进行监听，状态为LISTEN./* The socket is listening for incoming connections. 侦听来自
    远方TCP端口的连接请求 */
SYN_SENT    
   客户端通过应用程序调用connect进行active open.于是客户端tcp发送一个SYN以请求建立一个连接.之后状态置为SYN_SENT./*The  
   socket is actively attempting to establish a connection. 在发送连接请求后等待匹配的连接请求 */
SYN_RECV    
   服务端应发出ACK确认客户端的 SYN,同时自己向客户端发送一个SYN. 之后状态置为SYN_RECV/* A connection request has been 
   received from the network. 在收到和发送一个连接请求后等待对连接请求的确认 */
ESTABLISHED 
   代表一个打开的连接，双方可以进行或已经在数据交互了。/* The socket has an established connection. 代表一个打开的连接，
   数据可以传送给用户 */
FIN_WAIT1   
   主动关闭(active close)端应用程序调用close，于是其TCP发出FIN请求主动关闭连接，之后进入FIN_WAIT1状态./* The socket is 
   closed, and the connection is shutting down. 等待远程TCP的连接中断请求，或先前的连接中断请求的确认 */
CLOSE_WAIT  
   被动关闭(passive close)端TCP接到FIN后，就发出ACK以回应FIN请求(它的接收也作为文件结束符传递给上层应用程序),并进入
   CLOSE_WAIT./* The remote end has shut down, waiting for the socket to close. 等待从本地用户发来的连接中断请求 
   */
FIN_WAIT2   
   主动关闭端接到ACK后，就进入了 FIN-WAIT-2 ./* Connection is closed, and the socket is waiting for a shutdown 
   from the remote end. 从远程TCP等待连接中断请求 */
LAST_ACK    
   被动关闭端一段时间后，接收到文件结束符的应用程 序将调用CLOSE关闭连接。这导致它的TCP也发送一个 FIN,等待对方的ACK.就进入了
   LAST-ACK ./* The remote end has shut down, and the socket is closed. Waiting for acknowledgement. 等待原来
   发向远程TCP的连接中断请求的确认 */
TIME_WAIT   
   在主动关闭端接收到FIN后，TCP 就发送ACK包，并进入TIME-WAIT状态。/* The socket is waiting after close to handle 
   packets still in the network.等待足够的时间以确保远程TCP接收到连接中断请求的确认 */
CLOSING 
   比较少见./* Both sockets are shut down but we still don’t have all our data sent. 等待远程TCP对连接中断的确认 
   */
CLOSED  
  被动关闭端在接受到ACK包后，就进入了closed的状态。连接结束./* The socket is not being used. 没有任何连接状态 */
UNKNOWN 
  未知的Socket状态。/* The state of the socket is unknown. */
 备注
 SYN: (同步序列编号,Synchronize Sequence Numbers)该标志仅在三次握手建立TCP连接时有效。表示一个新的TCP连接请求。
 ACK: (确认编号,Acknowledgement Number)是对TCP请求的确认标志,同时提示对端系统已经成功接收所有数据。
 FIN: (结束标志,FINish)用来结束一个TCP回话.但对应端口仍处于开放状态,准备接收后续数据。
```

  <--https://www.jianshu.com/p/523048ad7f71

#### TCP flags

   147pd161 <--also gives 6 flags,  URG, ACK, SYN, RST,PSH, FIN

#### TCP header

147pd162 gives the diagram of tcp header

51602Qus001(01)_1_b  explained how to use grab tcp load http GET or POST

## Questions:

1.How to use tcpdump tool ?

# 51606 SSL TLS

## Questions

1.What are common certificate and key format ?

2.What is two-way SSL ?

# 51722 kafka

## Questions: 

1.What is Kafka ? 

2.What is implementation details of Kafka ? 

## 

# 51728 Scylla

## Questions: 

1.How Scylla compare with MongoDb and  Cassandra?

2.How to understand scylla data structure ?

# 51999 UML

## Note

UML diagrams <--list diagrams  (https://www.uml-diagrams.org/class-reference.html)

# 52300 NoSQL

## Questions: 

1.Why NoSQL is faster ?

# 52302 Mongo DB

## Questions

1.How to setup remote mongodb account?
2.How to use Mongdb client ?

## Exp

need put 33808exp here , or just check in feature center

# 52308 ElasticSearch

## Questions

1.What is elasticSearch?

2.What  is Lucence structure and how to do search ? 

### 

# 52328 Cassandra

## Questions: 

1.How is Cassandra underlined data structure ?

2.What is Cassandra ?

# 60066 Shareworks

## Questions: 

1. What is the procedure of code movement ?

# 73002 Browsers

## Note

#### Can I Use

​    <--check browser compatibility  https://caniuse.com/



# 73003 CSS

## Questions:

​     <---other questions need to be input here

6.Which pre-processor shall we use ? scss, sass or less?

Keyword to Exp



## Exp with keywords

#### 73003exp022 Scss/Sass 

##### start:  

​    just create folder like mixin to test mixin, edit scss file and check effect in html; 

## 

# 73030 JavaScript 

   <---just pickup stuff from application view, so pickup "start API" one by one because  system view of js is a mess
   <---here just list overview stuff

## Note

###  API

JavaScript ~~ API overview (https://developer.mozilla.org/en-US/docs/Web/JavaScript)

### Tools

JavaScript Tools JSFiddle (https://jsfiddle.net/)

## Questions

1.What is the typical ajax form with validation API etc.?
2.How to implement javascript timer ?
3.How to do basic comparison of different types ?
4.Javascript vs ECMAScript ? 
5.Is Javascrtipt single thread ?
6.Is ES6 supported by most browsers ?
7.What is promise ?
8.What is lambda expression?
9.What is javascript map, reduce and filter?
10.What is typical array operation of javascript?
11.What is JavaScrip API, library and framework?
12.Javascript regex example ?
13.Please list all examples that  dynamic types could be uniquely decided within "runtime" ? 
14.JavaScript Array Operations?
15.How to deal with regex ? 
16.How to stringify JSON property ? 
17.Javascript for loop and newer versions?
18.JavaScript String operations?
19.JavaScript date operations?
20.What is rxjs ?
21.JavaScript Promises Versus RxJS Observables?
22.What is Subjects in rxjs ?
23.What are the three types of subjects ? Like BehaviorSubject, ReplaySubject and AsyncSubject?
24.How do we handle JSON data ? Can its property be treated as string? 
25.JavaScript logic expressions etc.?
26.What is the overview of javascript? How many parts?
27.How to compare typescript and javascript ?
28.How to do a quick cut in of the key of JS?
29.What is difference between windows object and BOM ?
30.How to handle StreamReadable ?
31.How to filter out one item from array ?
32.Is async call always multiple threading ?
33.What is basic array operation like add element?
34.How to do the url encoding ?
35.What is spread and rest ?
36.What is Async and await? 
37.How to do javascript test ?
38.What is difference between canvas, WebGL and SVG ?
39.How is webpack source code analysis?
40.How to compare different options of js rest call ?
41.What is jsonp ?
42.How to setup JavaScript code base?

43.What is component ?

44.How about the scenarios using this and arrow functions ?

45.What are design patterns in javascript ?

46.What is prototype and how to use it and what is the advantages?

47.What is javascript mixin?

48.How JS create object and prototype stuff ? 

49.What are JS event and related stuff ?

50.What API does node or element support ?

51.How does JS do encoding ?

52.What is babel ?

## Exp to keyword (In idea create new web project not js project)

### 

### 73030exp027 

###            <--now I now the prototype operations !! 

### 73030exp028 enhanced 

### 73030exp029 EMCA vesion 

### 73030exp035  <---book158 examples， lots of basic javascript stuff 

### 73030exp036  <--htmlComponent 

### 73030exp037 <---simple event

### 73030exp038  <--event with option ( not working)  , seems abortable event 

### 73030exp039 <---very good , see capture, once and passive stuff !!!!!!

​                      stopPropagation and preventDefault

### 73030exp040 <--about this pointer, difference scenarios this pointing to different stuff 

### 73030exp041  <---this pointer in arrow function 

### 73030exp042 <---this with function defined in element attribute

### 73030exp043 <--use this and bind stuff 

### 73030exp044 <--get into event listener using this and bind 

### 73030exp045 <---get into event listener using scope property

73030exp046 to 049  <--to be added a bit more js example

### 73030exp050 <-- test event propagation, use stopPropagation method so event will not capturing or bubbling

### 73030exp052 list event properties

<--list all event properties, including  property and method , analysis on paper

### 73030exp053  table and row cell operation

<---in MDN html element is different from JS HTMLElement,  and HTMLElement/Element have different event stuff 

### 73030exp054 to exp057 might deliberately missing 

we can add later on !! 

### 73030exp058  <-- a quick jest setup for test, did not go deeper into it 

### 73030exp059 *  <--test this in arrow function 

### 73030exp060   <--map forEach can bind this 



### 73030exp061 js Array.from,  for..of, using spread

### 73030exp062 data structure to dom, testing new Map data structure 

### 73030exp063 Promise wrapping ajax very good 

#### Start: 

backend using 33808exp200, need start backend first 

### 73030exp064  using fabonacci to test generator function 

​            <---also tried exit for..of loop using break 

​             <--even not async call

### 73030exp065 chained promise super good

### 73030exp066 async function

### 73030exp067 async function parallel or sequential 

### 73030exp068 typescript

### 73030exp069  Babel 

### 73030exp070 style values

## Okey Global Object

### Array

73030exp009 <--- sort is  array's prototype method

### Number

   73030exp008 <--use to convert 



## Okey Web API Event



## Okey Web API Html Element

### Div

73030exp051 <--get computed style of div



### select 

73030exp002 <--get all options of select 

73066qus108-04-2-c-1  <---choose different options will be reflected 



### Table/Row/Cell

73030exp042 <--table element event and this pointer

73030exp050  <--table event propagation

73030exp052 <--show event properties 

73030exp053 <--very good 

### Ul/Li

73030exp062 <---create from data structure with click event listener

## Okey Web API - abstracted or advanced

### Document

73030exp006  <--write method used 

73030exp049 <--document style sheet control 

### EventTarget

#### addEventListener

​    73030exp005  <--all mouse event stuff 

#### dispatchEvent 

​       <--we need try example here

### HtmlElement

#### ElementCSSInlineStyle mixin

​                https://developer.mozilla.org/en-US/docs/Web/API/ElementCSSInlineStyle

​            <---73030exp061  , use this to control style

​              https://developer.mozilla.org/en-US/docs/Web/API/ElementCSSInlineStyle/style

​                       <---can list all the style values , see 73030exp070

### Node

#### nodeValue property

https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeValue

​           <---seems a bit different , element, document node , the nodeValue are null

73030exp037 <----reflect the text value within <td>

#### textContent  property

  https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent

​            <---different from innerHtml and innerText , every interesting  ( from 73030exp037 extra thinking)

### Window

#### confirm method

​     73030exp012 

#### open  method

​       <---73030exp006 open window

#### sessionStorage property

73030exp007 <---

# 73036 NodeJS

## Note

NodeJS Lib RxJS (https://rxjs-dev.firebaseapp.com/guide/overview)

NodeJS Lib RxJS  (https://rxjs-dev.firebaseapp.com/api/index/class/BehaviorSubject)

## Questions: 

1.What is node.js and its basic thing?
2.Do we need to install node.js in standalone folder or the same folder as the application souce code
3.npm vs node.js?
4.What is node.js API , how can we use it?
5.How do we know which node modules installed ?
6.How npm install related local module? Is the set in local jason file ?
7.What is npm command options ?
8.Difference between npx and npm ?
9.When we install use npm -g , where are globle modules ?
10.What is difference between node and npm run ?
11.Is node.js multiple threads?
12.What is difference between dependencies and devdependencies in package.json?
13.Difference between yarn and npm ?
14.Can npm and yarn both installed ?
15.what is node.js non-blocking feature?
16.How to compare node.js with netty and Spring boot?
17.How to implment  node.js server like db and network operations?
18.What is the best node.js framework in 2019?
19.How to check the installed modules latest ?
20.How to check npm install log ?
21.How to compare Java with node.js?
22.What application is good for node.js ?
23.How to setup node.js application with Mongodb at backend ?
24.How to setup npm on macos ?

## Exp

### 73036exp001 to expp002

D:\Backup\PM1000\Billydev080107\TempDev\181101-1-NodeJS73036Exp001
D:\Backup\PM1000\Billydev080107\TempDev\181105-1-NodeJS73936Exp002   <---seems conflict  
D:\Backup\PM1000\Billydev080107\TempDev\190722-1-73036Exp002_FullstackMERNExample

## Okey Node Command

### node -v  

​    <--get node.js version

## Okey NPM Command  

## <--todo input the link stuff below

## <--todo: how to remove stuff from node_modues

refer to: https://kapeli.com/cheat_sheets/npm.docset/Contents/Resources/Documents/index 

 

### npm --help

```
npm --help    <---list all options
npm i -h   <---this will give the help of current command 
          <---I guess npm like maven to manage the central lib and node like java
```

### npm config edit

​        <---seems list npm current configuration, 

​              for example:  ; editor=notepad.exe  <---actually this config edit is opened by notepad

​        <---from 73066qus104_(01)_2_b  <--need a try

### npm config set editor "sublime"

​     Setup editor for npm edit

### npm install 

This command installs a package, or packages, and any packages that it depends on in the current directory. If the package has a shrinkwrap file, the installation of dependencies will be driven by that.

If no `package.json` exists, these options are ignored. If it exists, they'll update them if they are already there.

- `--save`: Package will appear in your depedencies.
- `--save-dev`: Package will appear in your devDependencies.
- `--save-optional`: Package will appear in your optionalDependencies.
- `--global`: Package will be installed globally (if you want to use it as a command line tool for example)



```
npm install react-d3-components --save     <--this will save the to package.json  file 
npm i -S  axios               <--------looks -S is the same as --save !!! 
     <--201226 33808exp209 S016 npm install after version difference found 
```



```
npm install node-sass -S
       <--210129  73003exp021 
```

```
npm install -g
   <---210129  73066exp016 S006
         this should reduce the size of node_modules (maybe help spring boot application as well)
   <--can use:  npm root -g      to check the location  S007
```

```
npm i -D nodemon
   <-- 73066exp045-1-1-d, looks no need to restart server when change happens
```

### npm list 

npm list  --g     or npm list --global    

​             <---check Qus05 ,the result of this is too big 
npm list  --depth=0      

​         <---seems list only local , run in 73066exp016 and 73066exp049 we go different 

​          <---with --depth=0, we did not get much

npm list --g  --depth=0    

​           <----when we run from 73066exp016 and exp048, we got the same, they are really global

​           <----210129  73066exp016S008 

​           <--210129  73066exp016 S007 

​          from: https://stackoverflow.com/questions/5926672/where-does-npm-install-packages#:~:text=When%20installing%20use%20%2Dg%20option,%2Dg%20to%20check%20where.)&text=The%20command%20npm%20root%20will,directory%20of%20your%20npm%20packages.

npm root -g 

npm list -g|find/I  "create-React"     

​            <----this is for DOS and find out within the result of the list !!! 

### npm    init

​       <----I guess this is interactively create package.json file  73066Exp22 19--07-23 S003

​       Interactively create a package.json file

​       Asks you a bunch of questions, and then writes a package.json for you. If you already have a package.json file, it'll read that first, and default to the options in there.

### npm init -y         

​           <----I guess this is just silently create package.json file with out interactioin

​           <--can input entry point as well 73066exp045-1-1-d

### npm test or things from package.json

Run package test suite, based on setup in package.json in

"scripts" : {"test" : "node testfile.js"}



### npm uninstall package-name



### npx 

​    <--not install globally 






# 73055 JQuery

## Note

JQuery official doc (https://api.jquery.com/)



# 73058 WebJars

## Note

WebJars reference doc (on the very right side, list the files) (https://www.webjars.org/)

​            <--can also so search 

## exp to keyword

33808exp084 

# 73066 ReactJS

## Questions:

1.What is JSX ?
2.What is difference between ReactJS one way binding and AngularJS 2 way binding?
3.What is difference between property and state ?
4.What is javaScript framework ?
5.How to compare jQuery and ReactJS and D3 ?
6.What is REACT store?
7.How to make SPA ?
8.What is React Native ?
9.List and compare the Properties and events for React, jQuery and javaScript?
10.What is MVC, MVVM , MVW etc. and what is React pattern ? 
11.How React work with jQuery ? (maybe related to the source code reading)
12.What is best IDE for react.js ?
13.How can we use ReactJS API ?
14.How to compare ReactJS API and Vue.js API?
15.Difference between React.js and node.js? 
16.What is difference between ES5 and ES6 npm for ReactJS?
17.What id difference between React Developer Tools and Chrome internal debug tool(F12) ?  
18.What is create-react-app? 
19.What is serviceWorker ?
20.How about React version incompatable ?
21.How to check React version ?
22.How react manage CSS file per page ?
23.What is package-lock.json , how does it matter ?
24.How React do ajax ?
25.Does React has plugin concept?
26.What is road map of react.js?
27.Typical non-class component like function(Exp001), const(Exp016) what are the scenarios?
28.What is react version history?
29.How React make REST full API call including JWT setup ?
30.When we need use map ? When just use arrow function ?
31.When we use this?
32.When we use {}? 
33.Components looks have extend and super stuff , what does it really mean ?
34.When to use arrow function ? when not use arrow function? 
35.In ReactJS script part, can we use javaScript freely ?
36.When React use event as the parameter ? List scenarios and examples?
37.When React need to use bind(this) ?
38.How to develop React Component ? 

​     (original: what is the advantage  of Controlled components ？->210526 changed) 

39.How to implement a modal popup dialog box ?
40.How react App start ?
41.How about array operations in React js?
42.How set css style of react js to toggle component display?
43.How to integrate React.js with D3.js ? 
44.What is Create-react-app ? What can it provides?
45.How React work with the webpack ?
46.How to implement node.js server side ?
47.Difference between js and jsx?
48.How many types of import ?
49.How to run Exp or demo react app online ?
50.How to deal with file download and upload ?
51.How React deal with Websocket?
52.What is rxjs ?
53.ReactJS vs AngularJS?
54.---merge to 73030qus027---Difference between typescript and javascript ?
55.What is material UI and advantage?
56.What is Loopback API?
57.How react work with Bootstrap?
58.Do we need GraphQL?
59.What Redux really used for?
60.Material-UI vs semantic-UI?
61.How router works with menu bar with sub-menu ?
62.How react do the external configuration ?
63.Difference in import with {} or without {}?
64.How to view Exp036 from authentication service ?
65.How to view Exp036 from fakebackend?
66.How to view Exp036 from PrivateRoute?
67.How to view Exp036 from History?
68.What are difficulties among router and material-UI?
69.How to view helper class in Exp036 ?
70.What is Prototype for React.js?
71.Typical React CRUD examples?
72.Difference between single quotation mark and double quotation mark? 
73.When is JSON when is JSON string ?
74.How router work with history?
75.Compare the concepts of Router, route, link, redirect and window.location reload?
76.How to implement refresh within a certain interval ?
77.ReactJS - What is difference between component state and class variable?
78.D3 diagram not updated during the re-render?
79.What is react script module ?
80.What kind of setup needed to make full use of the advantage of create-react-app?
81.Can the react-script build include all js files like those undersubfolders? what is the difference between this build and webpack build?
82.Does react router support relative link?
83.What is react best practices ?
84.How to add constants files?
85.What is apostrophe in react? compare with quotation mark?
86.How to fix CORS issue with create react app ?
87.How to make Https connection ?
88.How to compare Redux and local storage?
89.What is redux start kit ?
90.Redux vs angular? Does it have the disadvantage of angular?
91.How to use Bootstrap in react.js ?
92.When we use material UI do we still need boostrap ?
93.How to use scsss in react.js ?
94.How to customize boostrap in react.js?
95.What need to do when we convert plain bootstrap to reactstrap?
96.How can we do the nested router?
97.How to create datetime picker ?
98.How react router pass the parameters ? 
99.Can we use function with jsx ?
100.How to add material UI table header?
101:How to do the React Test ?
102.What is typical form input freeze and how to solve it ?
103.Can we do dynamic router using data from backend ?

104.How to deal the problem that the mode_modules is too big ?

105.How to do react.js source code reading ?

106.What is react js ?

107.What is redux Saga?

108.What is  react.js hooks?

109.What is react.js native ?

110. What is jest ?  --see qus101
111. What is HOC and what is it advantages ?

## Exp to Key

### 73066exp001 to exp043  <--to be added

D:\Backup\PM1000\Billydev080107\wsCW7\73066_ReactJS\WebContent   exp001 to exp017
D:\Backup\PM1000\Billydev080107\TempDev\190410-3-73066Exp016BackupOrig
 all around   1904xxx
D:\Backup\PM1000\Billydev080107\TempDev\190422-2-73066Exp029_JWTWithRedux
D:\Backup\PM1000\Billydev080107\TempDev\190422-3-73066Exp030_ReactIntegrateWithJQuery
D:\Backup\PM1000\Billydev080107\TempDev\190423-1-73066Exp032_ReactWithJWT
D:\Backup\PM1000\Billydev080107\TempDev\190422-4-73066Exp031_ReactWithD3\190422-1-WorkedVersion
D:\Backup\PM1000\Billydev080107\TempDev\190425-2-73066Exp033_ReactFileDownloadUpload
???73066exp035 seems a websocket , do not where is the code seem exp034 missing ,034=035 mixed !!
D:\Backup\PM1000\Billydev080107\TempDev\190425-1-73066Exp034_ReactWebSocket
D:\Backup\PM1000\Billydev080107\TempDev\190429-1-73066Exp036_ForBPOT2117
D:\Backup\PM1000\Billydev080107\TempDev\190429-2-73066Exp037_MenuBarWithRouter
D:\Backup\PM1000\Billydev080107\TempDev\190505-1-Exp038BuildTest
D:\Backup\PM1000\Billydev080107\TempDev\190506-1-Exp039OwnStuffToGitHubPages
D:\Backup\PM1000\Billydev080107\TempDev\190515-1-73066Exp040_ReduxExample
D:\Backup\PM1000\Billydev080107\TempDev\190515-2-73066Exp041_Redux
D:\Backup\PM1000\Billydev080107\TempDev\190525-1-73066Exp042_ReactBootStrap
D:\Backup\PM1000\Billydev080107\TempDev\190528-3-73066Exp043_ReactStrap



### 73066exp016 basic crud

​      <--first focus on rendering part then understand the data and even part 

​      <--practice in subfolder

73066exp041 



### 73066exp044  BPOT

##### start: 



### 73066exp045 graphQL  add a bit stuff myself 

​     <--mainly apollo  accessing 33808exp224 as backend

#### start

(1) go to terminal:       

   npm run server       

​             <---in server module , this actually call:  node server.js  

​                   if server run within IDEA, then client need run within command line 

(2) Go to cmd of windows   

D:\Backup\PM1000\Billydev080107\MyBLIBBPOTCode\73066\73066exp045\npm start    in client module 

​               <---do not use  original cmd which is: 'npm run client ' <--no longer available

(3) Access through url: 

http://localhost:5000/graphql?query=%23%20Welcome%20to%20GraphiQL%0A%23%0A%23%20GraphiQL%20is%20an%20in-browser%20tool%20for%20writing%2C%20validating%2C%20and%0A%23%20testing%20GraphQL%20queries.%0A%23%0A%23%20Type%20queries%20into%20this%20side%20of%20the%20screen%2C%20and%20you%20will%20see%20intelligent%0A%23%20typeaheads%20aware%20of%20the%20current%20GraphQL%20type%20schema%20and%20live%20syntax%20and%0A%23%20validation%20errors%20highlighted%20within%20the%20text.%0A%23%0A%23%20GraphQL%20queries%20typically%20start%20with%20a%20%22%7B%22%20character.%20Lines%20that%20starts%0A%23%20with%20a%20%23%20are%20ignored.%0A%23%0A%23%20An%20example%20GraphQL%20query%20might%20look%20like%3A%0A%23%0A%23%20%20%20%20%20%7B%0A%23%20%20%20%20%20%20%20field(arg%3A%20%22value%22)%20%7B%0A%23%20%20%20%20%20%20%20%20%20subField%0A%23%20%20%20%20%20%20%20%7D%0A%23%20%20%20%20%20%7D%0A%23%0A%23%20Keyboard%20shortcuts%3A%0A%23%0A%23%20%20Prettify%20Query%3A%20%20Shift-Ctrl-P%20(or%20press%20the%20prettify%20button%20above)%0A%23%0A%23%20%20%20%20%20%20%20Run%20Query%3A%20%20Ctrl-Enter%20(or%20press%20the%20play%20button%20above)%0A%23%0A%23%20%20%20Auto%20Complete%3A%20%20Ctrl-Space%20(or%20just%20start%20typing)%0A%23%0A%0A%7Blaunches%0A%0A%20%20%7B%0A%20%20%20%20flight_number%2C%0A%20%20%20%20mission_name%2C%0A%20%20%20%20launch_year%2C%0A%20%20%20%20launch_success%2C%0A%0A%20%20%7D%0A%7D

​          <--can edit within the browser gui 

​          <--will give rich GUI function

### 73066exp046 Redux stuff official tutorial using connect

#### start: 

just    npm start  <--package.json has set 

###  73066exp047 Redux with Rest using  redux toolkit 

#### start: 

​     just npm start   in project folder 

#### About Hook: 

​      

### 73066exp048 GraphQL CRUD with Express MySQL

​     <--setup IDEA database connection

#### start: 

###### server: 

 D:\Backup\PM1000\Billydev080107\MyBLIBBPOTCode\73066\73066exp048\server>node index.js

​             <--can run it within IDEA terminal 

###### client: 

can do in IDEA terminal  within client folder:          npm start   

### 73066exp049 ReactJS refs 

#### start: 

change index.js  and import different App.js  from different subfolders under src  to test different functions; 

run  in terminal:           npm start in the main folder  

### 73066exp050 ReactJS HOC

start:  on sandbox

### 73066Exp051_ReactJSUseStateHook

start : on sandbox

### 73066Exp052_ReactJSUseEffectHook

start : on sandbox

### 73066Exp053_BuildOwnHook

### 73066Exp054_BuildOwnHookWithAxios

### 73066exp055 ReactJS D3 using react js hooks

### 73066exp056 Using Billy Websocket Hook  <--not working in CodeSandbox

### 73066exp057 Using Billy Websocket Hook in IDEA 

​             <--worked, only for websocket, not stomp 

### 73066exp58 ReactJS Test Jest

​    <--mixed with 73030exp058, need do some new stuff 

#### start

npm test   <----will run the test setup in package.json

### 73066exp059  Original  Redux Example (not pure origin redux)

​          <--just not use connect 

### 73066exp060  use React Redux to re-fact exp059

​          <--it will Provider and Connect from react redux

### 73066exp061 use own code to implement Provider and Connect from React Redux

​            <---very good, todo: 73066qus059-04-2 has source code also has similar implementation !! 

### 73066exp062 use official render props pattern

​         <--need to improve mouse move action later

### 73066exp063 own redux example

### 73066exp064 

###          -exp068 build own React Components

### 73066exp069  a demo project to use the component built in exp068

### 73066exp070  Jest test

### 73066exp071 GraphQL CRUD client using33808exp240 as backend





# 73080  http protocol

## Note

### method idempotent

https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.1.2

### RFC

RFC 7231 (new http) (https://tools.ietf.org/html/rfc7231)

RFC 2626  (old http) (https://tools.ietf.org/html/rfc2616)

RFC 2626 (old http, better display) (https://www.w3.org/Protocols/rfc2616/rfc2616.html)
               <--clearly state request header, response header, entity header etc. 
RFC 6265 (state management and cookies) (https://tools.ietf.org/html/rfc6265)



### Request and response size

145pd30

see also: https://www.jianshu.com/p/ea99c1e4f6a4 

## Questions

1. Does http protocol have timeout setting ? How is it set?
2. What is relationship between http and tcp protocol ?
3. What is the structure of http message ?
4. Will TCP has a heartbeat message ? 
5. What is http/2 ?
6. What is difference between http trunked response and multipart file upload ?
7. What will happen if we change content type to stream ?
8. What is http cache ?
9. Is http text based ?
10. What is http keep alive header ?
11. What is http message length ?
12. What is difference between get and post ?

## Okey MIME types

​       https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types

​                 <--list all media types

### application/json

​        <---33808exp134,  this is  typical rest controller, spring seems wrapped media type with a class

application/schema+json

```
$ curl http://localhost:8080/api/profile/employees -H "Accept:application/schema+json"
{
  "title" : "Employee",   <---this is entity title
  "properties" : {               <---this is entity properties 
    "firstName" : {
      "title" : "First name",        <---each property definition
      "readOnly" : false,
      "type" : "string"                 
    },
    "lastName" : {
      "title" : "Last name",
      "readOnly" : false,
      "type" : "string"
    },
    "description" : {
      "title" : "Description",
      "readOnly" : false,
      "type" : "string"
    }
  },
  "definitions" : { },              <---I guess this is entity definition 
  "type" : "object",
  "$schema" : "https://json-schema.org/draft-04/schema#"
}                             <---I guess this is the schema data 
```

​         <---33808exp180 part2 hypermediatype 

​         <---original article: https://spring.io/guides/tutorials/react-and-spring-data-rest/ 

### application/pdf

​          <---from 33808exp071

### application/vnd.ms-excel   

​         <---from 33808exp071 AbstractXlsView

### text/csv

​       <---33808exp071   csv content type is: text/csv

### text/html  

​            <---33808exp082 AbstractMessageConverterMethodProcessor line 267 selected media type

​             <---33808exp071 AbstractView Default content type is: text/html;charset=ISO-8859-1

​                       

## Okey headers 

### entity header

http protocol headers entity header content-type (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Type)
http protocol headers entity header content-type  media types (https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types)
                   <---media type should be the actual value of content-type which is a header
                   <---application/JSON是一种通用的MIME类型，具有实用、精简、易读的特点 
                   <---33808exp144 use github special mime type
http protocol headers entity header content-type  media types from Spring MimeMapping
                                                   <---33808Exp069 MimeMappings there is static block
http protocol headers entity header content-type  media types for post (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/POST)
                                                   <---could be: application/x-www-form-urlencoded (see 33808exp144 BodyInserters line501)
                                                                 multipart/form-data
                                                                 text/plain
                                                  <---Media type collections:
                                                     application/hal+json   <---this is Spring Data REST's default media type , from 33808exp180 (https://spring.io/guides/tutorials/react-and-spring-data-rest/)

#### content-length

https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Length

<--210120 33808exp083S001, S002 with content length,    then S004 shows json stuff without Content-length but http trunks

<---210120 33808exp200  http trunks

#### content-type

https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type

<--see above MIME types

### general header

http protocol headers general header

​    (https://developer.mozilla.org/zh-CN/docs/Glossary/%E9%80%9A%E7%94%A8%E9%A6%96%E9%83%A8)

​       <--could be used both request and response

###### cache-control 

```
  example: setHeader("Cache-Control", "s-maxage=" + cacheSeconds);
```

​          <--from  (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control)

​       (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching_FAQ)

​            <--- cache FAQ more advanced things here

```
  HTTP/1.1 200 OK
  Content-Type: application/json
  Cache-Control: no-store    <---do not store in any cache for OpenId response
  Pragma: no-cache

  {
   "access_token": "SlAV32hkKG",
   "token_type": "Bearer",
   "refresh_token": "8xLOxBtZp8",
   "expires_in": 3600,
   "id_token": "eyJhbGc..."
}
```

​         <---from: https://www.jianshu.com/p/be7cc032a4e9

<--book145pd30 also has cache control stuff 

###### connection

   https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Connection

​         <--a general header, decide if need close connection, related to keep-alive header

#### keep-alive

https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Keep-Alive 

​        <--- http general header , need connection header

​        <--timeout seems related to Tcp and other layers

```
HTTP/1.1 200 OK
Connection: Keep-Alive     <--this is needed 
Content-Encoding: gzip
Content-Type: text/html; charset=utf-8
Date: Thu, 11 Aug 2016 15:23:13 GMT
Keep-Alive: timeout=5, max=1000            <--- this is the header 
Last-Modified: Mon, 25 Jul 2016 04:32:39 GMT
Server: Apache

(body)
```

 <--check 73080qus010

<--210120 33808exp084S003 



###### pragma 

​               (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Pragma)

​                <---spring source code: 33808exp069, WebContentGenerator.java line 422 
​                 <---seems old version of cache control 



### request header

###### accept

​       (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Accept)

​         <--- Accept 请求头用来告知（服务器）客户端可以处理的内容类型，这种内容类型用MIME类型来表示。
​         <--- 33808exp069 200908S012 : accept a bunch of media types

###### accept-language

​       (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Accept-Language)

​         <---33808exp069 AcceptHeaderLocaleResolver.java line 98

###### authorization

​       (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Authorization)

​         <---33808exp094 has basic authroization and how to encode user name and password
​         <---33808exp094 also use bear token !!

​         <---33808exp136  AuthFilter use bear token as well 

​         <---related authorization framework 

​              (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Authentication)

###### cookie

​    https://www.geeksforgeeks.org/http-headers-cookie/#:~:text=A%20cookie%20is%20an%20HTTP,It%20is%20an%20optional%20header.&text=It%20is,and%20space%20i.e%20'%3B'.

		HttpHeaders headers = new HttpHeaders();
		headers.set("Cookie", cookie);
		RequestEntity<Object> request = new RequestEntity<>(headers, HttpMethod.GET, uri);
		return restTemplate.exchange(request, String.class);
​            <--33808exp006

```
POST /transfer HTTP/1.1
Host: xxx.bank.com
Cookie: JSESSIONID=randomid; Domain=xxx.bank.com; Secure; HttpOnly
Content-Type: application/x-www-form-urlencoded

amount=100.00&routingNumber=1234&account=8888
```

​            <--from : https://www.cnblogs.com/volcano-liu/p/11301057.html  

​                    trying to explain csrf stuff 

###### If-Match

​    <---see also: -in this MD  http status 412 has the code , 33808exp180,  201023S015,S016 etc.

​    <-- see also ETag in response header 

​       https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/If-Match

​         For GET and HEAD methods, the server will send back the requested resource only if it matches one of  

​          the listed ETags. For PUT and other non-safe methods, it will only upload the resource in this case.

​                <---also mentioned strong and weak comparison 

​               <---in 33808exp180 part5, curl test, we can get Etag back, I guess that is version match !! 

​         

###### origin

```
RequestEntity.get(uri("/greeting")).header(HttpHeaders.ORIGIN, "http://localhost:9000").build()
```

​           <--- 33808exp179_(01) S001,  



###### user-agent

​            (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/User-Agent)

​          <---33808exp144 use own user agent definition

### response header

###### Accept-Ranges 

​              <---33808exp082 AbstractMessageConverterMethodProcessor line 205

​                    the range is : bytes in this example

​             <--- in presence of an `Accept-Ranges` header, the browser may try to *resume* an interrupted 

​                  download, rather than to start it from the start again. from

​                   https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Ranges

​                        

###### Access-Control-Allow-Origin

```
assertEquals("http://localhost:9000", entity.getHeaders().getAccessControlAllowOrigin());
```

​         <---request is from localhost:9000, spring boot(on 8080) allow this 9000 server got stuff and display

​               how about the request pretend to be a general browser ??

​          <---gives a clear answer :  ACTUALLY THE BROWSER NEED "SAME ORIGIN" 

​                     <--my understanding : the code form server A can not access server B unless server B let it !!

​                     https://juejin.im/post/6844903859068862472

​                <--mentioned JSONP, see:  73030Qus041

​         <---33808Exp179_(01) S002

###### Content-Disposition

​         (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition)

​                    <--33808exp082
​                     <--also mentioned: General header (for a subpart of a multipart body)   
​                     <--response.addHeader("Content-Disposition", "attachment; filename="+fileName);  

​                         33808exp051

​                 <--  response.setHeader("Content-Disposition",      "attachment; filename=\"employees.csv\""); 

​                            from 33808exp071 csv view implementation                

###### ETag

​          <--see also If-Match 

​           <--see also 412 response status 

​           https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/ETag

​          <---seems used for both cache and version  control 

​          <---33808exp180__(01)_1_a



###### Expires 

​                (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Expires)

​               <---spring source code: 33808exp069, WebContentGenerator.java line 422 
​               <---如果在Cache-Control响应头设置了 "max-age" 或者 "s-max-age" 指令，那么 Expires 头会被忽略。

##### Location

​           https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Location

​           redirect url served with 3xx stuff 

​           33808exp082 test part 

###### set-cookie

		String sessionId1 = firstResponse.getBody();
		String cookie = firstResponse.getHeaders().getFirst("Set-Cookie");
		String sessionId2 = nextRequest(restTemplate, uri, cookie).getBody();
​             https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie

​             <---                               33808exp006

###### WWW-Authenticate

```
WWW-Authenticate: <type> realm=<realm>[, charset="UTF-8"]
          <---this is syntax
WWW-Authenticate: Basic realm="Access to the staging site", charset="UTF-8"
          <---this is example from MDN
          <---see also screen shot 20110933808exp188S009, S010
response.addHeader("WWW-Authenticate", "Basic realm=\"" + realmName + "\"");
response.sendError(HttpStatus.UNAUTHORIZED.value(), HttpStatus.UNAUTHORIZED.getReasonPhrase());          <----from: BasicAuthenticationEntryPoint.java  33808exp185 
           
```

The HTTP WWW-Authenticate response header defines the authentication method that should be used to gain access to a resource.
The WWW-Authenticate header is sent along with a 401 Unauthorized response.

​      <---from https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/WWW-Authenticate 

​       <---I guess the realm part tell you what to do 

​        <---201109: see : https://en.wikipedia.org/wiki/Basic_access_authentication#:~:text=In%20basic%20HTTP%20authentication%2C%20a,obsoletes%20RFC%202617%20from%201999.



## Okey status code 

###### Status code  doc

IETF status code (https://tools.ietf.org/html/rfc2616#page-57)

MDN Chinese (https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status)

JavaEE Implementation 

​               <---   javax.servlet.http.HttpServletResponse  33808exp136
Spring Implementation 

​                 <--- HttpStatus.java class(enum)  in 33808Exp083
w3.org (https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

###### Status code data

###### Status code collection

### --201

```
CREATED(201, "Created") 
        <--from HttpStatus.java

    // Save
    @PostMapping("/books")
    @ResponseStatus(HttpStatus.CREATED)
    Book newBook(@Valid @RequestBody Book newBook) {
        return repository.save(newBook);
    }
    <--from controller , 33808exp147
```

201217 33808exp202 insertion also have 201 created stuff. 

​         <--seems use different style compare with the exp147 example

### --302 

found and redirect 

https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/302

### --401 Unauthorized

https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401

### --412

​     [`412 Precondition Failed`](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status/412)

服务器在验证在请求的头字段中给出先决条件时，没能满足其中的一个或多个。这个状态码允许客户端在获取资源时在请求的元信息（请求头字段数据）中设置先决条件，以此避免该请求方法被应用到其希望的内容以外的资源上。

```
onUpdate(employee, updatedEmployee) {
		client({
			method: 'PUT',
			path: employee.entity._links.self.href,
			entity: updatedEmployee,
			headers: {
				'Content-Type': 'application/json',
				'If-Match': employee.headers.Etag     <---request has if match
			}
		}).
done(response => {

            this.loadFromServer(this.state.pageSize);
    
        }, response => {
    
            if (response.status.code === 412) {    <---check status code 
    
                alert('DENIED: Unable to update ' +
    
                    employee.entity._links.self.href + '. Your copy is stale.');
    
            }

​        });
```

​      <--- 33808exp180 part3 conditional 

###### --405

<--33808exp202 201209S008

### --415

unsupporte media type: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/415 

201217 33808exp202S006 



# 73083 Curl 

## Okey  options

#### -v option

### -H

curl -H "Authorization: Bearer xxxxx" localhost:8080

      <--a bit header
curl -H "Authorization: Bearer $TOKEN" -d "my message" localhost:8080/message
      <--this is post request  
      <--not sure what this request is


curl -v localhost:8080/employees/99  <--need try 
      <--  -v should show the debug information like:   

~Common Options
    refer to: (https://gist.github.com/subfuzion/08c5d85437d5d4f00e58) 

   (1) escape white space in url
     refer to: (https://superuser.com/questions/1407967/how-to-curl-a-url-with-space-in-windows)
   (2) escape while space in  windows: ****
     curl --header "Content-Type: application/json"   --request POST   -d @data.json http://localhost:8080/posts
           <---must have: data.json in the folder, its content: {"content":"new content", "title":"nnn title"}
              refer to: (https://stackoverflow.com/questions/4514199/how-to-send-double-quote-in-d-parameter-for-curl-exe)

## Okey Command 

### GET 

   curl --dump-header - --header 'Host: www.hystrix.com' http://localhost:8080/delay/3

             <--- using --dump-header to see the response headers, the - after --dump-header is telling cURL to print the headers to stdout.
                 see  (https://spring.io/guides/gs/gateway/)
             <---this was not working in windows 33808exp162
  curl --dump-header - --header "Host: www.hystrix.com" http://localhost:8080/delay/3             
             <----in window might need to use double quotes   33808exp162_(01)




```
curl -i -v  -u bgates:123 localhost:8080/api/private
          <-- -i interation will display some head stuff
          <-- -v more detailed with things like Authorization header
          <-- see 201124-33808exp181-S005
```



```
curl -v --header "content-type:application/json;"   -X GET localhost:8080/class/1
           <--201209 33808exp202
```

```
curl -v -X GET  localhost:8080/student/1
       <--201209  33808exp202
```



#### DELETE 

    curl -X DELETE http://localhost:8080/user/100
    curl -X DELETE http:/localhost:8080/posts/1/comments/1
             <---DELETE must be upper case!! 
    curl --request DELETE http://localhost:8080/posts/14
         <--seems --request and -X is the same
    curl -X DELETE localhost:8080/employees/1         

```
curl -v --header "content-type:application/json;"   -X DELETE localhost:8080/student/4
        <--201209  33808exp202

```



#### POST       

```
curl --header "Content-Type: application/json"   --request POST   --data "{"""firstName""":"""Billy""","""lastName""":"""li""","""emailId""":"""billydev@gmail.com"""}""" http://localhost:8080/api/v1/users
           <---worked in windows

curl -X POST localhost:8080/api/employees -d "{\"firstName\": \"Bilbo\", \"lastName\": \"Baggins\", \"description\": \"burglar\"}" -H "Content-Type:application/json"
           <---worked for windows , 33808Exp180 <---seems use different escape     
```

   (2) curl --header "Content-Type: application/json" \
              --request POST \
              --data '{"username":"xyz","password":"xyz"}' \
              http://localhost:3000/api/login
                <--- refer to: (https://stackoverflow.com/questions/7172784/how-do-i-post-json-data-with-curl)
   (3) In windows, above single quote has issue: 
       Example: "{ """name""":"""Frodo""", """age""":123 }"  <--for inner quote use """ to escape
            refer to: (https://stackoverflow.com/questions/31503754/errormessagesunexpected-character-code-39-expected-a-valid-value)
    
       Other succeed examples: 
           curl --header "content-type:application/json"  -X POST -d "{"""name""":"""test3""","""role""":"""test3"""}" localhost:8080/employees
           curl -H "content-type:application/json"  -X POST -d "{"""name""":"""test4""","""role""":"""test4"""}" localhost:8080/employees
                <---seems -H is the same as --header
           curl --header "content-type:application/json"   --request POST -d "{"""name""":"""test6""", """role""":"""test6"""}" localhost:8080/employees            
       see also:  200716_33808Exp110_S004 etc.    
```
curl -v --header "content-type:application/json;" --header "content-length:2000"  -X POST -d "{"""id""":1,"""clazzId""":1,"""name""":"""newstudentasfs""","""age""":12,"""number""":"""123456"""}" localhost:8080

     <---201209 33808exp202  
     <---there should be no "space" within the content of json 
     <---then entity name "student" do not need appear here 
```


```
curl -F "fileField=@fish.jpg"  http://localhost:8080/companysave
        <--  -F  implied post 
        <--201212  33808exp201 S004
        <--running in the folder where fish.jpg reside 
```

​             <-- https://ec.haxx.se/http/http-multipart 

```
curl -v --header "content-type:application/json;"   -X POST -d "{"""clazzId""":1,"""name""":"""newName3""","""age""":12,"""number""":"""123456"""}" localhost:8080
    <--201209  33808exp202
    <----X POST MUST BE ALL capital Post will not working!!
```



```
curl -v --header "content-type:application/json;" --header   -X POST -d "{"""id""":1,"""name""":"""newemployee""","""salary""":100}" localhost:8080/create
                 <--33808exp204  this one worked 
```

```
curl -v --header "content-type:application/json;" --header   -X POST -d "{"""title""":"""tt tile""","""content""":"""new conttttt"""}" localhost:8080/api/posts
        <----33808exp214 not working ??? really do not know the reason 210108S010 curl not working
```



### PUT

   curl --header "Content-Type: application/json"   --request PUT -d @data.json http://localhost:8080/posts/29

            <---seems  put the json in data file is important
   Other successful examples: 
   curl -H "content-type:application/json"  -X PUT  -d "{"""name""":"""test5""","""role""":"""test5"""}"  localhost:8080/employees/1



```
curl -v --header "content-type:application/json;"   -X PUT -d "{"""id""":1,"""clazzId""":1,"""name""":"""newNameWithPut""","""age""":12,"""number""":"""123456"""}" localhost:8080/1
    <---201209 33808exp202 S010 working 
    <--if url not exactly match the method, it might show 405 method not allowed issue
```

# 73085 Wireshark

## Questions:

1.Basic inform of wireshark ?
2.What are its competitors?
3.How to monitor one app?
4.how to do the different filtering ?

5.How to capture traffic of virtual box ?

6.How to capture traffic of wifi and usually https?

## Okey Cmd Launch and options

actually installed on windows, use start menu

## Okey Display filters

​      <--should be ordered by filter name

```
http and not (http contains "folders") and not ( ip.addr==127.0.0.1)
       <--33808exp083
```

```
http and ( (ip.addr==192.168.1.66 ) or (ip.addr==192.168.1.100))
       <--33808exp221
```

```
(tcp.flags.syn == 1) || (tcp.flags.push == 1) || (tcp.flags.reset == 1)
              <--how to filter tcp flags
              
               <--for 33808exp221 
```

​             <--check: https://osqa-ask.wireshark.org/questions/24961/filter-for-syn-psh-and-rst-flags

```
http.host=="exact.name.here"
          <--host name 
http.host contains "partial.name.here"
          <---partial host name
(tcp.port == 9800||tcp.port == 9000)  && http    
           <--port 
http and not (http contains "folders") and not ( tcp.port==49444)
          <---use port to filter out stuff 
          
http and not (http contains "folders") 
          <---http content details
  <---see 73085Qus004
```



# 73086 JMeter

## Note: 

Check : https://jmeter.apache.org/usermanual/best-practices.html

## Questions

1.What can Jmeter do for us ?
2.Jmeter basic test setup?

## Okey Cmd run and options

```
C:\Billydld080107\200719-1-Jmeter53\apache-jmeter-5.3\apache-jmeter-5.3\bin>java -jar ApacheJMeter.jar
            <---only for test creation and test debugging !!! 
================================================================================
Don't use GUI mode for load testing !, only for Test creation and Test debugging.
For load testing, use CLI Mode (was NON GUI):
   jmeter -n -t [jmx file] -l [results file] -e -o [Path to web report folder]
& increase Java Heap to meet your test requirements:
   Modify current env variable HEAP="-Xms1g -Xmx1g -XX:MaxMetaspaceSize=256m" in the jmeter batch file
       <----should use CLI mode to do the test !!!
       <---there is jmeter.bat or jmeter.sh in the bin folder!!!!!!
       
       <---for 33808exp221
```



# 73090 Web Link 

## Note

Web Link (https://www.iana.org/assignments/link-relations/link-relations.xhtml)
                        <----33808Exp180_(01)_1_a IANA stuff

## Okey parameters 

profile      <---from 33808Exp180 article, and profile in rest response, it is IANA based                         
self         <---from 33808Exp180
stylesheet   <---knew this for long time                                                                                                

# 73092 Chrome

## Note

#### Force reload browser

   Ctrl+F5 in browser can force reload <--before we can right click refresh button and    click force reload

#### Debug tool F12

##### Cookies

​     <--  In cookies  we can see : XSRF TOKEN   201101 33808exp084 S001 

#### Hard refresh

​     ctrl +F5   <--from google 

# 74080 Websocket and Stomp

## Note

Official site https://stomp.github.io/ 

JSR 356 https://jcp.org/en/jsr/detail?id=356

# 80001 Probablity&Statistics

### <---on paper in green clip

## Questions

1.How to understand permutation and combination ?

2.How to design and analyze multiple factor experiments ?

### 

# 90668 Job and Interview

## Note

https://www.w3cschool.cn/architectroad/architectroad-message-queue.html

​                 <---seems lots of architecture stuff 

## Questions

9.What is Behavioural Interview Questions ? 

10.How to do the codility stuff ?



# BLIB Sample

Note <--some important thing for this BLIB

Questions

Exp 

Okey<--ordered key, list like command, specification etc. 

​              they ususally order by alphabetic so we can easily position them, so they come here to BLIB

# Exp in BLIB Standard Sample

Setup:              <----show install and docker setup etc. 

Start:                <----how to launch application and parameters; 

break points:    <--- important break points for key analysis !!!

keywords:        <---list most important thing in this exp !! 

About xxx:      <--do some detailed analysis of the code, then Feacture center could refer to this about 

# Overall TODO

## ReactJS: 

create react package

​      <--check: 73030qus043_(02)_2  use create react library ` 